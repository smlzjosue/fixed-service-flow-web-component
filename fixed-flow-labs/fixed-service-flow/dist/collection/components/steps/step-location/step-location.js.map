{"version":3,"file":"step-location.js","sourceRoot":"","sources":["../../../../src/components/steps/step-location/step-location.tsx"],"names":[],"mappings":"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","sourcesContent":["// ============================================\n// STEP LOCATION - Location/Map Step Component\n// Fixed Service Flow Web Component\n// ============================================\n\nimport { Component, Prop, State, Element, h, Host } from '@stencil/core';\nimport { flowActions } from '../../../store/flow.store';\nimport { coverageService, mapsService } from '../../../services';\nimport { LocationData } from '../../../store/interfaces';\nimport { ERROR_MESSAGES } from '../../../utils/constants';\nimport type { Coordinates, GeocodeResult } from '../../../services/maps.service';\n\n@Component({\n  tag: 'step-location',\n  styleUrl: 'step-location.scss',\n  shadow: true,\n})\nexport class StepLocation {\n  // ------------------------------------------\n  // ELEMENT\n  // ------------------------------------------\n\n  @Element() el: HTMLElement;\n\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() googleMapsKey: string;\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  @State() address: string = '';\n  @State() isValidating: boolean = false;\n  @State() isLoadingMap: boolean = true;\n  @State() isGettingLocation: boolean = false;\n  @State() locationData: LocationData | null = null;\n  @State() mapError: string | null = null;\n  @State() currentCoordinates: Coordinates | null = null;\n  @State() geocodeResult: GeocodeResult | null = null;\n  @State() showErrorModal: boolean = false;\n  @State() errorMessage: string = '';\n\n  // ------------------------------------------\n  // REFS\n  // ------------------------------------------\n\n  private mapContainer: HTMLDivElement;\n  private addressInput: HTMLInputElement;\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  async componentDidLoad() {\n    await this.initializeMap();\n  }\n\n  disconnectedCallback() {\n    mapsService.destroy();\n  }\n\n  // ------------------------------------------\n  // MAP INITIALIZATION\n  // ------------------------------------------\n\n  private async initializeMap() {\n    if (!this.googleMapsKey) {\n      this.mapError = 'Google Maps API key no configurada';\n      this.isLoadingMap = false;\n      return;\n    }\n\n    try {\n      mapsService.setApiKey(this.googleMapsKey);\n\n      // Initialize map\n      await mapsService.initMap(this.mapContainer);\n\n      // Initialize autocomplete on address input\n      if (this.addressInput) {\n        await mapsService.initAutocomplete(this.addressInput, (result) => {\n          this.handlePlaceSelected(result);\n        });\n      }\n\n      // Add map click listener (like TEL: this.map.addListener(\"click\", ...))\n      mapsService.addMapClickListener(async (coordinates) => {\n        await this.handleMapClick(coordinates);\n      });\n\n      this.isLoadingMap = false;\n    } catch (error) {\n      console.error('Error initializing map:', error);\n      this.mapError = 'Error al cargar Google Maps';\n      this.isLoadingMap = false;\n    }\n  }\n\n  // ------------------------------------------\n  // HANDLERS\n  // ------------------------------------------\n\n  private handleAddressChange = (e: Event) => {\n    this.address = (e.target as HTMLInputElement).value;\n  };\n\n  /**\n   * Handles keypress on address input (like TEL: inputText.addEventListener(\"keypress\", ...))\n   * Triggers validation when Enter is pressed\n   */\n  private handleKeyPress = (e: KeyboardEvent) => {\n    if (e.key === 'Enter' || e.code === 'Enter' || e.code === 'NumpadEnter') {\n      e.preventDefault();\n      this.handleValidate();\n    }\n  };\n\n  /**\n   * Handles click on map (like TEL: this.map.addListener(\"click\", ...))\n   * Reverse geocodes the clicked location and validates coverage\n   */\n  private handleMapClick = async (coordinates: Coordinates) => {\n    // Clear previous marker\n    mapsService.clear();\n\n    // Reverse geocode the clicked location\n    const result = await mapsService.reverseGeocode(coordinates);\n\n    if (result) {\n      this.geocodeResult = result;\n      this.address = result.formattedAddress || result.address;\n      this.currentCoordinates = result.coordinates;\n\n      // Update map marker\n      mapsService.setMarker(result.coordinates);\n    } else {\n      // If reverse geocode fails, still set coordinates\n      this.currentCoordinates = coordinates;\n      mapsService.setMarker(coordinates);\n    }\n\n    // Auto-validate coverage (like TEL does on map click)\n    await this.handleValidate();\n  };\n\n  private handlePlaceSelected = (result: GeocodeResult) => {\n    this.geocodeResult = result;\n    this.address = result.formattedAddress || result.address;\n    this.currentCoordinates = result.coordinates;\n\n    // Update map marker\n    mapsService.setMarker(result.coordinates);\n    mapsService.centerMap(result.coordinates);\n  };\n\n  private handleValidate = async () => {\n    if (!this.currentCoordinates && !this.address.trim()) {\n      return;\n    }\n\n    this.isValidating = true;\n\n    try {\n      let coords = this.currentCoordinates;\n      let city = this.geocodeResult?.city || '';\n      let zipCode = this.geocodeResult?.zipCode || '';\n\n      // If we don't have coordinates, try to geocode the address\n      if (!coords && this.address.trim()) {\n        const geocoded = await mapsService.geocodeAddress(this.address);\n        if (geocoded) {\n          coords = geocoded.coordinates;\n          city = geocoded.city;\n          zipCode = geocoded.zipCode;\n          this.currentCoordinates = coords;\n          this.geocodeResult = geocoded;\n\n          // Update map\n          mapsService.setMarker(coords);\n          mapsService.centerMap(coords);\n        } else {\n          this.errorMessage = 'No se pudo encontrar la dirección. Por favor, intenta con otra dirección.';\n          this.showErrorModal = true;\n          this.isValidating = false;\n          return;\n        }\n      }\n\n      if (!coords) {\n        this.errorMessage = 'Por favor, ingresa una dirección válida.';\n        this.showErrorModal = true;\n        this.isValidating = false;\n        return;\n      }\n\n      // Validate coverage with API\n      const location = await coverageService.checkCoverage(\n        coords.lat,\n        coords.lng,\n        this.address || this.geocodeResult?.address || '',\n        city,\n        zipCode,\n      );\n\n      this.locationData = location;\n\n      if (location.isValid) {\n        // Show InfoWindow on marker (like TEL)\n        this.showCoverageInfoWindow(location.serviceMessage, true);\n      } else {\n        // Show error InfoWindow\n        this.showCoverageInfoWindow(ERROR_MESSAGES.NO_COVERAGE, false);\n      }\n    } catch (error) {\n      console.error('Coverage validation error:', error);\n      this.errorMessage = ERROR_MESSAGES.COVERAGE_ERROR;\n      this.showErrorModal = true;\n    } finally {\n      this.isValidating = false;\n    }\n  };\n\n  /**\n   * Shows coverage result in InfoWindow on the marker (like TEL pattern)\n   * Styles match TEL: .info, .infoOn, .infoOff, .continue-map, .continue-button\n   */\n  private showCoverageInfoWindow(message: string, isSuccess: boolean): void {\n    // TEL-style InfoWindow content - width auto to fill parent container (600px set by maps.service)\n    const infoWindowContent = `\n      <div class=\"general-container\" style=\"font-family: 'Open Sans', Arial, sans-serif; width: 100%; box-sizing: border-box;\">\n        <div class=\"info ${isSuccess ? 'infoOn' : 'infoOff'}\" style=\"\n          padding: ${isSuccess ? '20px' : '15px 20px'};\n          width: 100%;\n          height: auto;\n          box-sizing: border-box;\n          background: ${isSuccess ? '#1F97AF' : '#EE122C'};\n          color: #ffffff;\n          font-size: 14px;\n          line-height: 1.5;\n          white-space: normal;\n        \">\n          ${message}\n        </div>\n        <div class=\"continue-map\" style=\"\n          width: 100%;\n          height: auto;\n          padding: 20px;\n          font-size: 16px;\n          text-align: center;\n          background: #ffffff;\n          color: #1F97AF;\n          cursor: pointer;\n          box-sizing: border-box;\n        \">\n          ${!isSuccess ? `\n            <div style=\"color: #333; margin-bottom: 8px;\">\n              Actualmente usted se encuentra fuera del rango de cobertura.\n            </div>\n          ` : ''}\n          <div\n            id=\"infowindow-continue-btn\"\n            class=\"no-link continue-button\"\n            onclick=\"if(window.__infoWindowContinueCallback) window.__infoWindowContinueCallback();\"\n            style=\"\n              text-decoration: none;\n              color: #1F97AF;\n              font-size: 16px;\n              cursor: pointer;\n              font-weight: 600;\n            \"\n          >\n            ${isSuccess ? 'Continuar' : 'Cerrar'}\n          </div>\n        </div>\n      </div>\n    `;\n\n    mapsService.showInfoWindow(infoWindowContent, () => {\n      if (isSuccess && this.locationData && this.locationData.isValid) {\n        this.handleInfoWindowContinue();\n      } else {\n        mapsService.closeInfoWindow();\n      }\n    });\n  }\n\n  /**\n   * Handles continue from InfoWindow (like TEL: goToRouter method)\n   */\n  private handleInfoWindowContinue = () => {\n    if (this.locationData && this.locationData.isValid) {\n      // Close InfoWindow\n      mapsService.closeInfoWindow();\n\n      // Store data in sessionStorage with Base64 encoding (like TEL)\n      this.storeLocationInSession(this.locationData);\n\n      // Set location in store\n      flowActions.setLocation(this.locationData);\n      this.onNext?.();\n    }\n  };\n\n  /**\n   * Stores location data in sessionStorage with Base64 encoding (like TEL)\n   * TEL pattern: sessionStorage.setItem('planCodeInternet', btoa(planCode))\n   */\n  private storeLocationInSession(location: LocationData): void {\n    try {\n      // Store coordinates in Base64 (like TEL)\n      sessionStorage.setItem('latitud', btoa(String(location.latitude)));\n      sessionStorage.setItem('longitud', btoa(String(location.longitude)));\n\n      // Special handling for CLARO HOGAR (like TEL)\n      // TEL: if (servicE_NAME == 'CLARO HOGAR') { sessionStorage.removeItem('planCodeInternet'); }\n      if (location.serviceType.toUpperCase() === 'CLARO HOGAR') {\n        sessionStorage.removeItem('planCodeInternet');\n        console.log('[StepLocation] CLARO HOGAR detected - planCodeInternet removed');\n      } else {\n        sessionStorage.setItem('planCodeInternet', btoa(location.serviceType));\n        console.log('[StepLocation] Service type stored:', location.serviceType);\n      }\n\n      // Also store full plan data as JSON (for convenience)\n      sessionStorage.setItem('plan', JSON.stringify({\n        serviceType: location.serviceType,\n        serviceMessage: location.serviceMessage,\n        address: location.address,\n        city: location.city,\n        zipCode: location.zipCode,\n      }));\n\n      console.log('[StepLocation] Location data stored in sessionStorage');\n    } catch (error) {\n      console.error('[StepLocation] Error storing location in sessionStorage:', error);\n    }\n  }\n\n  private handleUseCurrentLocation = async () => {\n    this.isGettingLocation = true;\n\n    try {\n      const result = await mapsService.getCurrentLocationWithAddress();\n\n      if (result) {\n        this.geocodeResult = result;\n        this.address = result.formattedAddress || result.address;\n        this.currentCoordinates = result.coordinates;\n\n        // Update map\n        mapsService.setMarker(result.coordinates);\n        mapsService.centerMap(result.coordinates);\n        mapsService.setZoom(17);\n      } else {\n        // Got coordinates but couldn't reverse geocode\n        const coords = await mapsService.getCurrentLocation();\n        this.currentCoordinates = coords;\n        mapsService.setMarker(coords);\n        mapsService.centerMap(coords);\n        mapsService.setZoom(17);\n      }\n    } catch (error) {\n      console.error('Geolocation error:', error);\n\n      if (error.message.includes('denied')) {\n        this.errorMessage = ERROR_MESSAGES.GEOLOCATION_DENIED;\n      } else if (error.message.includes('unavailable')) {\n        this.errorMessage = ERROR_MESSAGES.GEOLOCATION_UNAVAILABLE;\n      } else {\n        this.errorMessage = ERROR_MESSAGES.GEOLOCATION_TIMEOUT;\n      }\n\n      this.showErrorModal = true;\n    } finally {\n      this.isGettingLocation = false;\n    }\n  };\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    return (\n      <Host>\n        <div class=\"step-location\">\n          {/* Validating Overlay */}\n          {this.isValidating && (\n            <div class=\"step-location__validating-overlay\">\n              <div class=\"step-location__validating-content\">\n                <div class=\"step-location__validating-spinner\"></div>\n                <p class=\"step-location__validating-text\">Validando cobertura...</p>\n              </div>\n            </div>\n          )}\n\n          {/* Header */}\n          <header class=\"step-location__header\">\n            <h1 class=\"step-location__title\">\n              <span class=\"step-location__title--highlight\">Servicio fijo empresarial</span>\n              {' '}en tu área\n            </h1>\n          </header>\n\n          {/* Map Container */}\n          <div class=\"step-location__map-container\">\n            {/* Map controls */}\n            <div class=\"step-location__controls\">\n              <div class=\"step-location__input-group\">\n                <span class=\"step-location__input-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"></path>\n                    <circle cx=\"12\" cy=\"10\" r=\"3\"></circle>\n                  </svg>\n                </span>\n                <input\n                  type=\"text\"\n                  class=\"step-location__input\"\n                  placeholder=\"Ingrese su dirección\"\n                  value={this.address}\n                  onInput={this.handleAddressChange}\n                  onKeyPress={this.handleKeyPress}\n                  ref={(el) => this.addressInput = el}\n                />\n                <button\n                  class={{\n                    'step-location__btn-validate': true,\n                    'step-location__btn-validate--loading': this.isValidating,\n                  }}\n                  onClick={this.handleValidate}\n                  disabled={this.isValidating || (!this.address.trim() && !this.currentCoordinates)}\n                >\n                  {this.isValidating ? (\n                    <span class=\"step-location__btn-validate-content\">\n                      <span class=\"step-location__btn-spinner\"></span>\n                      Validando...\n                    </span>\n                  ) : (\n                    'Validar'\n                  )}\n                </button>\n              </div>\n              <button\n                class=\"step-location__btn-location\"\n                onClick={this.handleUseCurrentLocation}\n                disabled={this.isGettingLocation || this.isLoadingMap}\n              >\n                <svg class=\"step-location__btn-location-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                  <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                  <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"6\"></line>\n                  <line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"22\"></line>\n                  <line x1=\"2\" y1=\"12\" x2=\"6\" y2=\"12\"></line>\n                  <line x1=\"18\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\n                </svg>\n                {this.isGettingLocation ? 'Obteniendo ubicación...' : 'Utilizar Ubicación Actual'}\n              </button>\n            </div>\n\n            {/* Map */}\n            <div class=\"step-location__map\">\n              {this.isLoadingMap && !this.mapError && (\n                <div class=\"step-location__map-loading\">\n                  <div class=\"step-location__spinner\"></div>\n                  <p>Cargando mapa...</p>\n                </div>\n              )}\n\n              {this.mapError && (\n                <div class=\"step-location__map-error\">\n                  <p>{this.mapError}</p>\n                  {!this.googleMapsKey && (\n                    <small>Configura la prop google-maps-key en el componente</small>\n                  )}\n                </div>\n              )}\n\n              <div\n                class=\"step-location__map-canvas\"\n                ref={(el) => this.mapContainer = el}\n                style={{ display: this.mapError ? 'none' : 'block' }}\n              ></div>\n            </div>\n          </div>\n\n          {/* Error Modal (only for errors that can't be shown in InfoWindow) */}\n          {this.showErrorModal && (\n            <div class=\"step-location__modal-backdrop\">\n              <div class=\"step-location__modal step-location__modal--error\">\n                <button class=\"step-location__modal-close\" onClick={() => this.showErrorModal = false}>\n                  ×\n                </button>\n                <div class=\"step-location__modal-error-bar\">Error</div>\n                <p class=\"step-location__modal-message\">{this.errorMessage}</p>\n                <button\n                  class=\"step-location__modal-btn\"\n                  onClick={() => this.showErrorModal = false}\n                >\n                  Cerrar\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n"]}