{"version":3,"file":"step-catalogue.js","sourceRoot":"","sources":["../../../../src/components/steps/step-catalogue/step-catalogue.tsx"],"names":[],"mappings":"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","sourcesContent":["// ============================================\n// STEP CATALOGUE - Product Catalogue for CLARO HOGAR\n// Fixed Service Flow Web Component\n// Design based on TEL product-list-web + filters-web\n// ============================================\n\nimport { Component, Prop, State, h, Host } from '@stencil/core';\nimport { catalogueService, productService } from '../../../services';\nimport { CatalogueProduct, CatalogueFilter } from '../../../store/interfaces';\n\n@Component({\n  tag: 'step-catalogue',\n  styleUrl: 'step-catalogue.scss',\n  shadow: true,\n})\nexport class StepCatalogue {\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  @State() products: CatalogueProduct[] = [];\n  @State() filteredProducts: CatalogueProduct[] = [];\n  @State() isLoading: boolean = true;\n  @State() error: string | null = null;\n  @State() searchText: string = '';\n  @State() selectedFilter: string = '';\n  @State() showFilters: boolean = true;\n  @State() filterOptions: CatalogueFilter[] = [];\n\n  // Modal state (TEL pattern: seeMoreModal)\n  @State() showDetailModal: boolean = false;\n  @State() modalTitle: string = '';\n  @State() modalContent: string = '';\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  componentWillLoad() {\n    // Get filter options (sync)\n    this.filterOptions = catalogueService.getProductTypeFilters();\n\n    // Set default filter to \"Internet Inalámbrico\" (second option)\n    this.selectedFilter = catalogueService.FILTER_INTERNET_INALAMBRICO;\n\n    // isLoading is already true by default, so loader will show immediately\n  }\n\n  componentDidLoad() {\n    // Load products after component renders (shows loader while loading)\n    this.loadProducts();\n  }\n\n  // ------------------------------------------\n  // METHODS\n  // ------------------------------------------\n\n  private async loadProducts() {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const response = await catalogueService.listCatalogue(\n        this.selectedFilter,\n        1,\n        this.searchText\n      );\n\n      this.products = response.products || [];\n      this.filteredProducts = this.products;\n    } catch (err) {\n      console.error('[StepCatalogue] Error loading products:', err);\n      this.error = 'Error al cargar el catálogo de productos';\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private handleFilterChange = async (filterValue: string) => {\n    this.selectedFilter = filterValue;\n    await this.loadProducts();\n  };\n\n  private handleSearchInput = (e: Event) => {\n    this.searchText = (e.target as HTMLInputElement).value;\n  };\n\n  private handleSearch = async () => {\n    await this.loadProducts();\n  };\n\n  private handleKeyPress = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      this.handleSearch();\n    }\n  };\n\n  // @ts-ignore: toggleFilters reserved for mobile filter toggle feature\n  private _toggleFilters = () => {\n    this.showFilters = !this.showFilters;\n  };\n\n  private clearFilters = () => {\n    this.selectedFilter = catalogueService.FILTER_INTERNET_INALAMBRICO;\n    this.searchText = '';\n    this.loadProducts();\n  };\n\n  private handleViewMore = (product: CatalogueProduct) => {\n    // Store selected product and subcatalog ID for plans API\n    const subcatalogId = parseInt(this.selectedFilter, 10);\n    catalogueService.storeProductInSession(product);\n    productService.storeSelectedProduct(product, subcatalogId);\n    console.log('[StepCatalogue] Product selected:', product.productName, 'subcatalogId:', subcatalogId);\n    this.onNext?.();\n  };\n\n  private cleanHTML(html: string): string {\n    return catalogueService.cleanDescription(html);\n  }\n\n  private getSelectedFilterCount(): number {\n    return this.selectedFilter ? 1 : 0;\n  }\n\n  /**\n   * Opens the detail modal with product description\n   * TEL pattern: seeMore() -> modalProvider.seeMoreModal()\n   */\n  private handleSeeDetail = (product: CatalogueProduct) => {\n    const fullDescription = this.cleanHTML(product.shortDescription || '');\n    this.modalTitle = product.productName;\n    this.modalContent = fullDescription;\n    this.showDetailModal = true;\n  };\n\n  /**\n   * Closes the detail modal\n   * TEL pattern: closeModal() -> modalController.dismiss()\n   */\n  private closeDetailModal = () => {\n    this.showDetailModal = false;\n    this.modalTitle = '';\n    this.modalContent = '';\n  };\n\n  // ------------------------------------------\n  // RENDER HELPERS\n  // ------------------------------------------\n\n  private renderFilterSidebar() {\n    const filterCount = this.getSelectedFilterCount();\n\n    return (\n      <aside class=\"filter-container\" style={{ display: this.showFilters ? 'block' : 'none' }}>\n        {/* Filter Header */}\n        <div class=\"filter-header\">\n          <span class=\"filter-title\">Filtrar por:</span>\n          <a class=\"reset-filter\" onClick={this.clearFilters}>\n            Limpiar filtros\n          </a>\n        </div>\n\n        {/* Filter Count */}\n        <div class=\"filter-result\">\n          <p class=\"result\">\n            {filterCount > 0\n              ? `filtros seleccionados (${filterCount})`\n              : 'Ningún filtro seleccionado'}\n          </p>\n        </div>\n\n        {/* Product Type Filter */}\n        <div class=\"filter-type-product\">\n          <div class=\"filter-type-title\">\n            <h4 class=\"filter-title-section\">Tipo de producto</h4>\n            <svg class=\"chevron-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <polyline points=\"6 9 12 15 18 9\"></polyline>\n            </svg>\n          </div>\n          <div class=\"slot-radio\">\n            <div class=\"radio-group\">\n              {this.filterOptions.map((option) => (\n                <label class=\"radio-button\">\n                  <input\n                    type=\"radio\"\n                    name=\"productType\"\n                    value={option.value}\n                    checked={this.selectedFilter === option.value}\n                    onChange={() => this.handleFilterChange(option.value)}\n                  />\n                  <span class=\"radio-label\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        </div>\n      </aside>\n    );\n  }\n\n  private renderProductCard(product: CatalogueProduct) {\n    const description = this.cleanHTML(product.shortDescription || '');\n    const truncatedDesc = catalogueService.truncateText(description, 80);\n\n    return (\n      <div class=\"new-product-item\">\n        {/* Top section: Image + Info */}\n        <div class=\"new-product-item__top\">\n          <div class=\"new-product-item__img\">\n            <img src={product.imgUrl} alt={product.productName} loading=\"lazy\" />\n          </div>\n          <div class=\"new-product-item__info\">\n            <div class=\"title\">{product.productName}</div>\n            {product.installments > 0 && (\n              <div class=\"financed-price\">\n                <div class=\"financed-price-text\">Financiado</div>\n                <div class=\"financed-price__value\">\n                  ${product.update_price?.toFixed(2) || '0.00'}/mes\n                </div>\n                <div class=\"installments-text\">{product.installments} Plazos</div>\n              </div>\n            )}\n            <div class=\"regular-price\">\n              Precio regular: ${product.regular_price?.toFixed(2) || '0.00'}\n            </div>\n          </div>\n        </div>\n\n        {/* Color dots */}\n        {product.colors && product.colors.length > 0 && (\n          <div class=\"container-colors\">\n            {product.colors.map((color) => (\n              <div class=\"color-dot\" style={{ backgroundColor: color.webColor }}></div>\n            ))}\n          </div>\n        )}\n\n        {/* Middle section: Description (always render for consistent card height) */}\n        <div class=\"new-product-item__middle\">\n          {description ? (\n            <span class=\"description-text\">\n              {truncatedDesc}\n              {description.length > 80 && (\n                <a class=\"see-detail\" onClick={(e) => { e.stopPropagation(); this.handleSeeDetail(product); }}>\n                  Ver detalle\n                </a>\n              )}\n            </span>\n          ) : (\n            <span class=\"description-text\">&nbsp;</span>\n          )}\n        </div>\n\n        {/* Bottom section: Actions */}\n        <div class=\"new-product-item__bottom\">\n          <button class=\"action-button\" onClick={() => this.handleViewMore(product)}>\n            Ver más\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    // Get title based on selected filter\n    const title = this.selectedFilter === catalogueService.FILTER_INTERNET_INALAMBRICO\n      ? 'Internet Inalámbrico'\n      : 'Internet + Telefonía';\n\n    return (\n      <Host>\n        <div class=\"step-catalogue\">\n          {/* Search Header */}\n          <div class=\"container-filter\">\n            <h1 class=\"filter-title-main\">{title}</h1>\n\n            <div class=\"filter-content\">\n              <div class=\"input-filter-wrapper\">\n                <svg class=\"search-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n                  <path d=\"m21 21-4.35-4.35\"></path>\n                </svg>\n                <input\n                  type=\"text\"\n                  class=\"input-filter\"\n                  placeholder=\"Buscar articulo\"\n                  value={this.searchText}\n                  onInput={this.handleSearchInput}\n                  onKeyPress={this.handleKeyPress}\n                />\n              </div>\n              <button class=\"btn-search\" onClick={this.handleSearch}>\n                Buscar\n              </button>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div class=\"catalogue-content\">\n            {/* Filter Sidebar */}\n            {this.renderFilterSidebar()}\n\n            {/* Products Grid */}\n            <div class=\"products-section\">\n              {/* Loading */}\n              {this.isLoading && (\n                <div class=\"loading-container\">\n                  <div class=\"spinner\"></div>\n                  <p>Cargando productos...</p>\n                </div>\n              )}\n\n              {/* Error */}\n              {this.error && !this.isLoading && (\n                <div class=\"error-container\">\n                  <p>{this.error}</p>\n                  <button onClick={() => this.loadProducts()}>Reintentar</button>\n                </div>\n              )}\n\n              {/* Products Grid */}\n              {!this.isLoading && !this.error && (\n                <div class={{\n                  'container-product': true,\n                  'container-product-filter-off': !this.showFilters,\n                }}>\n                  {this.filteredProducts.map((product) => this.renderProductCard(product))}\n                </div>\n              )}\n\n              {/* Empty State */}\n              {!this.isLoading && !this.error && this.filteredProducts.length === 0 && (\n                <div class=\"empty-container\">\n                  <p>No hay productos disponibles para esta categoría</p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Back Button */}\n          <div class=\"back-button-container\">\n            <button class=\"btn-back\" onClick={this.onBack}>\n              Regresar\n            </button>\n          </div>\n        </div>\n\n        {/* Detail Modal (TEL pattern: see-more-modal) */}\n        {this.showDetailModal && (\n          <div class=\"modal-overlay\" onClick={this.closeDetailModal}>\n            <div class=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n              {/* Close Button */}\n              <button class=\"modal-close\" onClick={this.closeDetailModal}>\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n                </svg>\n              </button>\n\n              {/* Modal Title */}\n              <div class=\"modal-title\">\n                <div class=\"modal-subtitle\">Descripción completa</div>\n                {this.modalTitle}\n              </div>\n\n              {/* Modal Content */}\n              <div class=\"modal-body\">\n                <p class=\"modal-text\">{this.modalContent}</p>\n              </div>\n            </div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n"]}