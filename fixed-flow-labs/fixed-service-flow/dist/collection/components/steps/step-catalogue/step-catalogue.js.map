{"version":3,"file":"step-catalogue.js","sourceRoot":"","sources":["../../../../src/components/steps/step-catalogue/step-catalogue.tsx"],"names":[],"mappings":"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","sourcesContent":["// ============================================\n// STEP CATALOGUE - Modem Selection for CLARO HOGAR\n// Fixed Service Flow Web Component\n// Design based on docs/capturas/3.png - Carousel + Summary Bar\n// ============================================\n\nimport { Component, Prop, State, h, Host } from '@stencil/core';\nimport { catalogueService, productService, cartService } from '../../../services';\nimport { CatalogueProduct, ProductDetail } from '../../../store/interfaces';\nimport { formatPrice } from '../../../utils/formatters';\n\n// ------------------------------------------\n// SUMMARY DATA INTERFACE\n// ------------------------------------------\n\ninterface SummaryData {\n  productName: string;\n  planPrice: number;\n  svaPrice: number;\n  equipmentPrice: number;\n  payToday: number;\n}\n\n@Component({\n  tag: 'step-catalogue',\n  styleUrl: 'step-catalogue.scss',\n  shadow: true,\n})\nexport class StepCatalogue {\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  // Products from catalogue\n  @State() products: CatalogueProduct[] = [];\n  @State() isLoading: boolean = true;\n  @State() error: string | null = null;\n\n  // Product details cache (loaded in parallel)\n  @State() productsWithDetails: Map<number, ProductDetail> = new Map();\n  @State() loadingDetails: Set<number> = new Set();\n\n  // Selection state\n  @State() selectedProduct: CatalogueProduct | null = null;\n  @State() selectedProductDetail: ProductDetail | null = null;\n  @State() isAddingToCart: boolean = false;\n\n  // Unavailable modal\n  @State() showUnavailableModal: boolean = false;\n\n  // Summary bar data\n  @State() summaryData: SummaryData | null = null;\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  componentWillLoad() {\n    // isLoading is already true by default, so loader will show immediately\n  }\n\n  componentDidLoad() {\n    // Load products after component renders\n    this.loadProducts();\n  }\n\n  // ------------------------------------------\n  // DATA LOADING METHODS\n  // ------------------------------------------\n\n  /**\n   * Loads products from catalogue API\n   * Uses \"Internet Inalámbrico\" filter by default\n   */\n  private async loadProducts() {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      // Default to \"Internet Inalámbrico\" subcatalog\n      const subcatalogId = catalogueService.FILTER_INTERNET_INALAMBRICO;\n\n      const response = await catalogueService.listCatalogue(subcatalogId, 1, '');\n\n      this.products = response.products || [];\n\n      // After loading products, load details for visible ones\n      if (this.products.length > 0) {\n        await this.loadProductsDetails(this.products);\n      }\n    } catch (err) {\n      console.error('[StepCatalogue] Error loading products:', err);\n      this.error = 'Error al cargar el catálogo de productos';\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  /**\n   * Loads product details in parallel for faster UX\n   * @param products - Products to load details for\n   */\n  private async loadProductsDetails(products: CatalogueProduct[]) {\n    // Load details for first 6 products in parallel\n    const productsToLoad = products.slice(0, 6);\n\n    const detailPromises = productsToLoad.map(async (product) => {\n      // Skip if already loaded\n      if (this.productsWithDetails.has(product.productId)) {\n        return;\n      }\n\n      // Mark as loading\n      this.loadingDetails = new Set([...this.loadingDetails, product.productId]);\n\n      try {\n        const response = await productService.getEquipmentDetail(product.productId);\n\n        if (!response.hasError && response.product) {\n          const newMap = new Map(this.productsWithDetails);\n          newMap.set(product.productId, response.product);\n          this.productsWithDetails = newMap;\n        }\n      } catch (err) {\n        console.error(`[StepCatalogue] Error loading details for ${product.productId}:`, err);\n      } finally {\n        const newSet = new Set(this.loadingDetails);\n        newSet.delete(product.productId);\n        this.loadingDetails = newSet;\n      }\n    });\n\n    await Promise.allSettled(detailPromises);\n  }\n\n  // ------------------------------------------\n  // SELECTION & CART METHODS\n  // ------------------------------------------\n\n  /**\n   * Handles product selection\n   * - Loads details if not cached\n   * - Updates summary bar\n   * - Calls addToCart API\n   */\n  private handleSelectProduct = async (product: CatalogueProduct) => {\n    // If clicking the same product, do nothing\n    if (this.selectedProduct?.productId === product.productId) {\n      return;\n    }\n\n    this.isAddingToCart = true;\n    this.error = null;\n\n    try {\n      // Get product detail (from cache or API)\n      let productDetail = this.productsWithDetails.get(product.productId);\n\n      if (!productDetail) {\n        // Load detail on demand\n        console.log('[StepCatalogue] Loading detail for:', product.productId);\n        const response = await productService.getEquipmentDetail(product.productId);\n\n        if (response.hasError || !response.product) {\n          throw new Error('Error al cargar detalles del producto');\n        }\n\n        productDetail = response.product;\n\n        // Cache it\n        const newMap = new Map(this.productsWithDetails);\n        newMap.set(product.productId, productDetail);\n        this.productsWithDetails = newMap;\n      }\n\n      // Check availability BEFORE proceeding (stock must be > 1)\n      const ENTRY_BARRIER = 1;\n      if (productDetail.stock === undefined || productDetail.stock <= ENTRY_BARRIER) {\n        console.log('[StepCatalogue] Product unavailable, stock:', productDetail.stock);\n        this.showUnavailableModal = true;\n        this.isAddingToCart = false;\n        return;\n      }\n\n      // Update selection\n      this.selectedProduct = product;\n      this.selectedProductDetail = productDetail;\n\n      // Update summary bar\n      this.updateSummaryData(product, productDetail);\n\n      // Store product in session for next steps\n      const subcatalogId = parseInt(catalogueService.FILTER_INTERNET_INALAMBRICO, 10);\n      catalogueService.storeProductInSession(product);\n      productService.storeSelectedProduct(product, subcatalogId);\n\n      // Add to cart\n      console.log('[StepCatalogue] Adding to cart:', product.productName);\n      const cartResponse = await cartService.addToCart(\n        productDetail,\n        product.installments || 24,\n        1\n      );\n\n      if (cartResponse.hasError) {\n        console.error('[StepCatalogue] Cart error:', cartResponse.message);\n        // Still allow selection even if cart fails\n      } else {\n        console.log('[StepCatalogue] Added to cart, mainId:', cartResponse.code);\n      }\n\n    } catch (err) {\n      console.error('[StepCatalogue] Selection error:', err);\n      this.error = 'Error al seleccionar el producto. Por favor intente de nuevo.';\n    } finally {\n      this.isAddingToCart = false;\n    }\n  };\n\n  /**\n   * Updates the summary bar data based on selected product\n   */\n  private updateSummaryData(product: CatalogueProduct, detail: ProductDetail) {\n    // Calculate \"Paga hoy\" = regular_price (down payment + any initial costs)\n    const payToday = product.regular_price || detail.decDownPayment || 0;\n\n    this.summaryData = {\n      productName: product.productName,\n      planPrice: 0, // Will be set in step-plans\n      svaPrice: 0,  // No SVA at this point\n      equipmentPrice: product.update_price || 0, // Monthly equipment payment\n      payToday: payToday,\n    };\n  }\n\n  /**\n   * Handles continue button click\n   * Proceeds to step-plans\n   */\n  private handleContinue = () => {\n    if (this.selectedProduct && !this.isAddingToCart) {\n      this.onNext?.();\n    }\n  };\n\n  /**\n   * Closes the unavailable product modal\n   */\n  private handleCloseUnavailableModal = () => {\n    this.showUnavailableModal = false;\n  };\n\n  // ------------------------------------------\n  // RENDER HELPERS\n  // ------------------------------------------\n\n  /**\n   * Renders the unavailable product modal\n   */\n  private renderUnavailableModal() {\n    if (!this.showUnavailableModal) {\n      return null;\n    }\n\n    return (\n      <div class=\"unavailable-modal-overlay\" onClick={this.handleCloseUnavailableModal}>\n        <div class=\"unavailable-modal\" onClick={(e) => e.stopPropagation()}>\n          <div class=\"unavailable-modal__icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n              <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n              <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n            </svg>\n          </div>\n          <h3 class=\"unavailable-modal__title\">Producto no disponible</h3>\n          <p class=\"unavailable-modal__message\">\n            Lo sentimos, este producto no está disponible en este momento.\n            Por favor, seleccione otro equipo.\n          </p>\n          <button class=\"unavailable-modal__button\" onClick={this.handleCloseUnavailableModal}>\n            Entendido\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Renders a product card for the carousel\n   */\n  private renderProductCard(product: CatalogueProduct) {\n    const isSelected = this.selectedProduct?.productId === product.productId;\n    const isLoadingDetail = this.loadingDetails.has(product.productId);\n    const isProcessing = this.isAddingToCart && isSelected;\n\n    return (\n      <div\n        class={{\n          'product-card': true,\n          'product-card--selected': isSelected,\n          'product-card--loading': isLoadingDetail,\n        }}\n        onClick={() => !this.isAddingToCart && this.handleSelectProduct(product)}\n      >\n        {/* Card content: Image | Info */}\n        <div class=\"product-card__content\">\n          {/* Left: Image */}\n          <div class=\"product-card__image\">\n            <img src={product.imgUrl} alt={product.productName} loading=\"lazy\" />\n          </div>\n\n          {/* Right: Info */}\n          <div class=\"product-card__info\">\n            <h3 class=\"product-card__name\">{product.productName}</h3>\n\n            {/* Financed price */}\n            {product.installments > 0 && (\n              <div class=\"product-card__financed\">\n                <span class=\"product-card__financed-label\">Financiado</span>\n                <span class=\"product-card__financed-price\">\n                  {formatPrice(product.update_price || 0)}/mes\n                </span>\n                <span class=\"product-card__installments\">\n                  {product.installments} plazos\n                </span>\n              </div>\n            )}\n\n            {/* Regular price */}\n            <p class=\"product-card__regular-price\">\n              Precio regular: {formatPrice(product.regular_price || 0)}\n            </p>\n          </div>\n        </div>\n\n        {/* Card footer with message */}\n        <div class=\"product-card__footer\">\n          <p class=\"product-card__footer-text\">¡Mantente conectado en todo momento!</p>\n        </div>\n\n        {/* Loading indicator for detail fetch */}\n        {isProcessing && (\n          <div class=\"product-card__processing\">\n            <div class=\"product-card__spinner\"></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Renders the summary bar footer\n   */\n  private renderSummaryBar() {\n    const productName = this.summaryData?.productName || '-';\n    const planPrice = this.summaryData?.planPrice || 0;\n    const svaPrice = this.summaryData?.svaPrice || 0;\n    const equipmentPrice = this.summaryData?.equipmentPrice || 0;\n    const payToday = this.summaryData?.payToday || 0;\n\n    return (\n      <footer class=\"step-catalogue__summary-bar\">\n        <div class=\"step-catalogue__summary-content\">\n          {/* PCD */}\n          <div class=\"step-catalogue__summary-item\">\n            <span class=\"step-catalogue__summary-label\">PCD</span>\n            <span class=\"step-catalogue__summary-value\">{productName}</span>\n          </div>\n\n          {/* Plan */}\n          <div class=\"step-catalogue__summary-item\">\n            <span class=\"step-catalogue__summary-label\">Plan</span>\n            <span class=\"step-catalogue__summary-value\">\n              {formatPrice(planPrice)} / mes\n            </span>\n          </div>\n\n          {/* SVA */}\n          <div class=\"step-catalogue__summary-item\">\n            <span class=\"step-catalogue__summary-label\">SVA</span>\n            <span class=\"step-catalogue__summary-value\">\n              {formatPrice(svaPrice)} / mes\n            </span>\n          </div>\n\n          {/* Equipo / Accesorio */}\n          <div class=\"step-catalogue__summary-item\">\n            <span class=\"step-catalogue__summary-label\">Equipo / Accesorio</span>\n            <span class=\"step-catalogue__summary-value\">\n              {formatPrice(equipmentPrice)} / mes\n            </span>\n          </div>\n\n          {/* Paga hoy */}\n          <div class=\"step-catalogue__summary-item step-catalogue__summary-item--highlight\">\n            <span class=\"step-catalogue__summary-label\">Paga hoy</span>\n            <span class=\"step-catalogue__summary-value step-catalogue__summary-value--red\">\n              {formatPrice(payToday)} + IVU\n            </span>\n          </div>\n        </div>\n\n        {/* Continue button */}\n        <button\n          class={{\n            'step-catalogue__continue-btn': true,\n            'step-catalogue__continue-btn--disabled': !this.selectedProduct || this.isAddingToCart,\n          }}\n          onClick={this.handleContinue}\n          disabled={!this.selectedProduct || this.isAddingToCart}\n        >\n          {this.isAddingToCart ? 'Procesando...' : 'Continuar'}\n        </button>\n      </footer>\n    );\n  }\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    return (\n      <Host>\n        <div class=\"step-catalogue\">\n          {/* Header */}\n          <header class=\"step-catalogue__header\">\n            <button class=\"step-catalogue__back-link\" onClick={this.onBack}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <polyline points=\"15 18 9 12 15 6\"></polyline>\n              </svg>\n              <span>Regresar</span>\n            </button>\n            <h1 class=\"step-catalogue__title\">Escoger modem para servicio fijo</h1>\n            <div class=\"step-catalogue__divider\"></div>\n          </header>\n\n          {/* Loading state */}\n          {this.isLoading && (\n            <div class=\"step-catalogue__loading\">\n              <div class=\"step-catalogue__spinner\"></div>\n              <p>Cargando productos...</p>\n            </div>\n          )}\n\n          {/* Error state */}\n          {this.error && !this.isLoading && (\n            <div class=\"step-catalogue__error\">\n              <p>{this.error}</p>\n              <button onClick={() => this.loadProducts()}>Reintentar</button>\n            </div>\n          )}\n\n          {/* Products carousel */}\n          {!this.isLoading && !this.error && this.products.length > 0 && (\n            <div class=\"step-catalogue__carousel-container\">\n              <ui-carousel\n                totalItems={this.products.length}\n                gap={24}\n                showNavigation={false}\n                showPagination={true}\n                breakpoints={[\n                  { minWidth: 0, slidesPerView: 1 },\n                  { minWidth: 600, slidesPerView: 2 },\n                  { minWidth: 900, slidesPerView: 3 },\n                ]}\n              >\n                {this.products.map((product) => this.renderProductCard(product))}\n              </ui-carousel>\n            </div>\n          )}\n\n          {/* Empty state */}\n          {!this.isLoading && !this.error && this.products.length === 0 && (\n            <div class=\"step-catalogue__empty\">\n              <p>No hay productos disponibles en este momento.</p>\n            </div>\n          )}\n\n          {/* Summary bar */}\n          {this.renderSummaryBar()}\n\n          {/* Unavailable product modal */}\n          {this.renderUnavailableModal()}\n        </div>\n      </Host>\n    );\n  }\n}\n"]}