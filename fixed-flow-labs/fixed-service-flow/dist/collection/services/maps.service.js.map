{"version":3,"file":"maps.service.js","sourceRoot":"","sources":["../../src/services/maps.service.ts"],"names":[],"mappings":"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","sourcesContent":["// ============================================\n// MAPS SERVICE - Google Maps Integration\n// Fixed Service Flow Web Component\n// ============================================\n\nimport { GOOGLE_MAPS_CONFIG } from '../utils/constants';\n\n// ------------------------------------------\n// TYPES\n// ------------------------------------------\n\nexport interface Coordinates {\n  lat: number;\n  lng: number;\n}\n\nexport interface GeocodeResult {\n  address: string;\n  city: string;\n  zipCode: string;\n  coordinates: Coordinates;\n  formattedAddress: string;\n}\n\nexport interface PlaceResult {\n  placeId: string;\n  description: string;\n  mainText: string;\n  secondaryText: string;\n}\n\n// Extend Window interface for Google Maps\ndeclare global {\n  interface Window {\n    google?: typeof google;\n  }\n}\n\n// ------------------------------------------\n// MAPS SERVICE CLASS\n// ------------------------------------------\n\nclass MapsService {\n  private apiKey: string = '';\n  private isLoaded: boolean = false;\n  private loadPromise: Promise<void> | null = null;\n  private map: google.maps.Map | null = null;\n  private marker: google.maps.marker.AdvancedMarkerElement | null = null;\n  private autocomplete: google.maps.places.Autocomplete | null = null;\n  private infoWindow: google.maps.InfoWindow | null = null;\n\n  // ------------------------------------------\n  // INITIALIZATION\n  // ------------------------------------------\n\n  /**\n   * Sets the Google Maps API key\n   */\n  setApiKey(apiKey: string): void {\n    this.apiKey = apiKey;\n  }\n\n  /**\n   * Loads the Google Maps JavaScript API\n   */\n  async loadGoogleMaps(): Promise<void> {\n    if (this.isLoaded) {\n      return;\n    }\n\n    if (this.loadPromise) {\n      return this.loadPromise;\n    }\n\n    if (!this.apiKey) {\n      throw new Error('Google Maps API key is required');\n    }\n\n    this.loadPromise = new Promise((resolve, reject) => {\n      // Check if already loaded\n      if (window.google?.maps) {\n        this.isLoaded = true;\n        resolve();\n        return;\n      }\n\n      const script = document.createElement('script');\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${this.apiKey}&libraries=places,marker&v=weekly`;\n      script.async = true;\n      script.defer = true;\n\n      script.onload = () => {\n        this.isLoaded = true;\n        resolve();\n      };\n\n      script.onerror = () => {\n        reject(new Error('Failed to load Google Maps API'));\n      };\n\n      document.head.appendChild(script);\n    });\n\n    return this.loadPromise;\n  }\n\n  /**\n   * Checks if Google Maps is loaded\n   */\n  isGoogleMapsLoaded(): boolean {\n    return this.isLoaded && !!window.google?.maps;\n  }\n\n  // ------------------------------------------\n  // MAP MANAGEMENT\n  // ------------------------------------------\n\n  /**\n   * Initializes the map in a container element\n   */\n  async initMap(container: HTMLElement, options?: Partial<google.maps.MapOptions>): Promise<google.maps.Map> {\n    await this.loadGoogleMaps();\n\n    const defaultOptions: google.maps.MapOptions = {\n      center: GOOGLE_MAPS_CONFIG.DEFAULT_CENTER,\n      zoom: GOOGLE_MAPS_CONFIG.DEFAULT_ZOOM,\n      mapTypeId: GOOGLE_MAPS_CONFIG.DEFAULT_MAP_TYPE as google.maps.MapTypeId,\n      mapId: GOOGLE_MAPS_CONFIG.MAP_ID,\n      disableDefaultUI: false,\n      zoomControl: true,\n      mapTypeControl: true,\n      mapTypeControlOptions: {\n        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,\n        position: google.maps.ControlPosition.LEFT_TOP,\n        mapTypeIds: ['roadmap', 'satellite'],\n      },\n      streetViewControl: false,\n      fullscreenControl: false,\n    };\n\n    this.map = new google.maps.Map(container, {\n      ...defaultOptions,\n      ...options,\n    });\n\n    return this.map;\n  }\n\n  /**\n   * Gets the current map instance\n   */\n  getMap(): google.maps.Map | null {\n    return this.map;\n  }\n\n  /**\n   * Centers the map on given coordinates\n   */\n  centerMap(coordinates: Coordinates): void {\n    if (this.map) {\n      this.map.setCenter(coordinates);\n    }\n  }\n\n  /**\n   * Sets the map zoom level\n   */\n  setZoom(zoom: number): void {\n    if (this.map) {\n      this.map.setZoom(zoom);\n    }\n  }\n\n  // ------------------------------------------\n  // MARKER MANAGEMENT\n  // ------------------------------------------\n\n  /**\n   * Adds or updates a marker on the map\n   */\n  async setMarker(coordinates: Coordinates): Promise<void> {\n    if (!this.map) {\n      throw new Error('Map not initialized');\n    }\n\n    // Remove existing marker\n    if (this.marker) {\n      this.marker.map = null;\n    }\n\n    // Create new advanced marker\n    const { AdvancedMarkerElement } = await google.maps.importLibrary('marker') as google.maps.MarkerLibrary;\n\n    this.marker = new AdvancedMarkerElement({\n      map: this.map,\n      position: coordinates,\n      gmpDraggable: true,\n    });\n\n    // Center map on marker\n    this.map.setCenter(coordinates);\n  }\n\n  /**\n   * Adds a click listener to the map (like TEL: this.map.addListener(\"click\", ...))\n   * When user clicks on map, it triggers geocoding at that location\n   */\n  addMapClickListener(onMapClick: (coordinates: Coordinates) => void): void {\n    if (!this.map) {\n      console.warn('Map not initialized');\n      return;\n    }\n\n    this.map.addListener('click', (e: google.maps.MapMouseEvent) => {\n      if (e.latLng) {\n        const coordinates: Coordinates = {\n          lat: e.latLng.lat(),\n          lng: e.latLng.lng(),\n        };\n        onMapClick(coordinates);\n      }\n    });\n  }\n\n  /**\n   * Clears the marker from the map (like TEL: clear() method)\n   */\n  clear(): void {\n    this.removeMarker();\n  }\n\n  /**\n   * Gets the current marker position\n   */\n  getMarkerPosition(): Coordinates | null {\n    if (!this.marker?.position) {\n      return null;\n    }\n\n    const position = this.marker.position as google.maps.LatLngLiteral;\n    return {\n      lat: position.lat,\n      lng: position.lng,\n    };\n  }\n\n  /**\n   * Removes the marker from the map\n   */\n  removeMarker(): void {\n    if (this.marker) {\n      this.marker.map = null;\n      this.marker = null;\n    }\n  }\n\n  // ------------------------------------------\n  // INFOWINDOW (like TEL pattern)\n  // ------------------------------------------\n\n  /**\n   * Shows an InfoWindow at the marker position with custom HTML content\n   * Like TEL: this.infowindow.open(this.map, this.marker)\n   */\n  showInfoWindow(content: string, onContinueClick?: () => void): void {\n    if (!this.map || !this.marker) {\n      console.warn('Map or marker not initialized');\n      return;\n    }\n\n    // Close existing InfoWindow\n    this.closeInfoWindow();\n\n    // Override Google Maps InfoWindow styles - force wider width\n    const popStyle = `<style>\n      .gm-ui-hover-effect { display: none !important; }\n      .gm-style .gm-style-iw-c { padding: 0px !important; width: 600px !important; max-width: none !important; }\n      .gm-style .gm-style-iw-d { padding: 0px !important; overflow: unset !important; width: 100% !important; max-width: none !important; }\n      .gm-style .gm-style-iw-tc { display: none !important; }\n      .gm-style-iw { width: 600px !important; max-width: none !important; }\n    </style>`;\n\n    // Create InfoWindow with TEL config: maxWidth: 600\n    this.infoWindow = new google.maps.InfoWindow({\n      content: popStyle + content,\n      maxWidth: 600,\n    });\n\n    // Open InfoWindow at marker position\n    this.infoWindow.open({\n      anchor: this.marker,\n      map: this.map,\n    });\n\n    // Force wider InfoWindow after DOM is ready\n    this.infoWindow.addListener('domready', () => {\n      // Use setTimeout to ensure Google Maps has finished applying its styles\n      setTimeout(() => {\n        // Target the main InfoWindow container and set explicit width\n        const iwc = document.querySelector('.gm-style-iw-c') as HTMLElement;\n        const iwd = document.querySelector('.gm-style-iw-d') as HTMLElement;\n\n        if (iwc) {\n          iwc.style.setProperty('width', '600px', 'important');\n          iwc.style.setProperty('max-width', 'none', 'important');\n          iwc.style.setProperty('padding', '0', 'important');\n        }\n        if (iwd) {\n          iwd.style.setProperty('width', '100%', 'important');\n          iwd.style.setProperty('max-width', 'none', 'important');\n          iwd.style.setProperty('overflow', 'visible', 'important');\n        }\n\n        // Also target the general container\n        const gmiw = document.querySelector('.gm-style-iw') as HTMLElement;\n        if (gmiw) {\n          gmiw.style.setProperty('width', '600px', 'important');\n          gmiw.style.setProperty('max-width', 'none', 'important');\n        }\n      }, 50);\n    });\n\n    // Store callback reference for external access\n    if (onContinueClick) {\n      // Use a global callback that can be accessed from the InfoWindow content\n      (window as any).__infoWindowContinueCallback = onContinueClick;\n    }\n  }\n\n  /**\n   * Closes the InfoWindow\n   */\n  closeInfoWindow(): void {\n    if (this.infoWindow) {\n      this.infoWindow.close();\n      this.infoWindow = null;\n    }\n  }\n\n  /**\n   * Gets the current InfoWindow instance\n   */\n  getInfoWindow(): google.maps.InfoWindow | null {\n    return this.infoWindow;\n  }\n\n  // ------------------------------------------\n  // AUTOCOMPLETE\n  // ------------------------------------------\n\n  /**\n   * Initializes address autocomplete on an input element\n   */\n  async initAutocomplete(\n    inputElement: HTMLInputElement,\n    onPlaceSelected: (result: GeocodeResult) => void,\n  ): Promise<void> {\n    await this.loadGoogleMaps();\n\n    // Restrict to Puerto Rico\n    const options: google.maps.places.AutocompleteOptions = {\n      componentRestrictions: { country: 'pr' },\n      fields: ['address_components', 'geometry', 'formatted_address'],\n      types: ['address'],\n    };\n\n    this.autocomplete = new google.maps.places.Autocomplete(inputElement, options);\n\n    this.autocomplete.addListener('place_changed', () => {\n      const place = this.autocomplete?.getPlace();\n\n      if (!place?.geometry?.location) {\n        return;\n      }\n\n      const result = this.parseAddressComponents(place);\n      onPlaceSelected(result);\n\n      // Update map and marker if map exists\n      if (this.map) {\n        this.centerMap(result.coordinates);\n        this.setMarker(result.coordinates);\n      }\n    });\n  }\n\n  /**\n   * Parses Google Places address components\n   */\n  private parseAddressComponents(place: google.maps.places.PlaceResult): GeocodeResult {\n    const components = place.address_components || [];\n    let streetNumber = '';\n    let route = '';\n    let city = '';\n    let zipCode = '';\n\n    for (const component of components) {\n      const type = component.types[0];\n\n      switch (type) {\n        case 'street_number':\n          streetNumber = component.long_name;\n          break;\n        case 'route':\n          route = component.long_name;\n          break;\n        case 'locality':\n        case 'administrative_area_level_2':\n          city = city || component.long_name;\n          break;\n        case 'postal_code':\n          zipCode = component.long_name;\n          break;\n      }\n    }\n\n    const address = [streetNumber, route].filter(Boolean).join(' ');\n    const location = place.geometry?.location;\n\n    return {\n      address,\n      city,\n      zipCode,\n      coordinates: {\n        lat: location?.lat() || 0,\n        lng: location?.lng() || 0,\n      },\n      formattedAddress: place.formatted_address || '',\n    };\n  }\n\n  // ------------------------------------------\n  // GEOCODING\n  // ------------------------------------------\n\n  /**\n   * Geocodes an address to coordinates\n   */\n  async geocodeAddress(address: string): Promise<GeocodeResult | null> {\n    await this.loadGoogleMaps();\n\n    const geocoder = new google.maps.Geocoder();\n\n    return new Promise((resolve) => {\n      geocoder.geocode(\n        {\n          address,\n          componentRestrictions: { country: 'pr' },\n        },\n        (results, status) => {\n          if (status === 'OK' && results && results[0]) {\n            const place = results[0];\n            const result = this.parseGeocoderResult(place);\n            resolve(result);\n          } else {\n            resolve(null);\n          }\n        },\n      );\n    });\n  }\n\n  /**\n   * Reverse geocodes coordinates to an address\n   */\n  async reverseGeocode(coordinates: Coordinates): Promise<GeocodeResult | null> {\n    await this.loadGoogleMaps();\n\n    const geocoder = new google.maps.Geocoder();\n\n    return new Promise((resolve) => {\n      geocoder.geocode(\n        { location: coordinates },\n        (results, status) => {\n          if (status === 'OK' && results && results[0]) {\n            const place = results[0];\n            const result = this.parseGeocoderResult(place);\n            resolve(result);\n          } else {\n            resolve(null);\n          }\n        },\n      );\n    });\n  }\n\n  /**\n   * Parses geocoder result to GeocodeResult\n   */\n  private parseGeocoderResult(result: google.maps.GeocoderResult): GeocodeResult {\n    const components = result.address_components || [];\n    let streetNumber = '';\n    let route = '';\n    let city = '';\n    let zipCode = '';\n\n    for (const component of components) {\n      const type = component.types[0];\n\n      switch (type) {\n        case 'street_number':\n          streetNumber = component.long_name;\n          break;\n        case 'route':\n          route = component.long_name;\n          break;\n        case 'locality':\n        case 'administrative_area_level_2':\n          city = city || component.long_name;\n          break;\n        case 'postal_code':\n          zipCode = component.long_name;\n          break;\n      }\n    }\n\n    const address = [streetNumber, route].filter(Boolean).join(' ');\n    const location = result.geometry.location;\n\n    return {\n      address,\n      city,\n      zipCode,\n      coordinates: {\n        lat: location.lat(),\n        lng: location.lng(),\n      },\n      formattedAddress: result.formatted_address,\n    };\n  }\n\n  // ------------------------------------------\n  // GEOLOCATION\n  // ------------------------------------------\n\n  /**\n   * Gets the user's current location\n   */\n  async getCurrentLocation(): Promise<Coordinates> {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by this browser'));\n        return;\n      }\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          resolve({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n        },\n        (error) => {\n          let message = 'Error getting location';\n\n          switch (error.code) {\n            case error.PERMISSION_DENIED:\n              message = 'Location permission denied';\n              break;\n            case error.POSITION_UNAVAILABLE:\n              message = 'Location information unavailable';\n              break;\n            case error.TIMEOUT:\n              message = 'Location request timed out';\n              break;\n          }\n\n          reject(new Error(message));\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0,\n        },\n      );\n    });\n  }\n\n  /**\n   * Gets current location and reverse geocodes it\n   */\n  async getCurrentLocationWithAddress(): Promise<GeocodeResult | null> {\n    const coordinates = await this.getCurrentLocation();\n    return this.reverseGeocode(coordinates);\n  }\n\n  // ------------------------------------------\n  // CLEANUP\n  // ------------------------------------------\n\n  /**\n   * Cleans up map resources\n   */\n  destroy(): void {\n    this.closeInfoWindow();\n    this.removeMarker();\n    this.autocomplete = null;\n    this.map = null;\n  }\n}\n\n// ------------------------------------------\n// SINGLETON EXPORT\n// ------------------------------------------\n\nexport const mapsService = new MapsService();\nexport default mapsService;\n"]}