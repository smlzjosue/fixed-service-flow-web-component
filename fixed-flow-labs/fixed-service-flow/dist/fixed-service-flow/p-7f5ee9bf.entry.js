import{a as e,f as t,r as a,c as r,h as o,H as i,d as n}from"./p-X-V47bix.js";const s=(e,t,a)=>{const r=e.get(t);if(!r){e.set(t,[a])}else if(!r.includes(a)){r.push(a)}};const c=(e,t)=>{let a;return(...r)=>{if(a){clearTimeout(a)}a=setTimeout((()=>{a=0;e(...r)}),t)}};const l=e=>!("isConnected"in e)||e.isConnected;const d=c((e=>{for(let t of e.keys()){e.set(t,e.get(t).filter(l))}}),2e3);const p=()=>{if(typeof e!=="function"){return{}}const a=new Map;return{dispose:()=>a.clear(),get:t=>{const r=e();if(r){s(a,t,r)}},set:e=>{const r=a.get(e);if(r){a.set(e,r.filter(t))}d(a)},reset:()=>{a.forEach((e=>e.forEach(t)));d(a)}}};const u=e=>typeof e==="function"?e():e;const f=(e,t=(e,t)=>e!==t)=>{const a=u(e);let r=new Map(Object.entries(a??{}));const o={dispose:[],get:[],set:[],reset:[]};const i=new Map;const n=()=>{r=new Map(Object.entries(u(e)??{}));o.reset.forEach((e=>e()))};const s=()=>{o.dispose.forEach((e=>e()));n()};const c=e=>{o.get.forEach((t=>t(e)));return r.get(e)};const l=(e,a)=>{const i=r.get(e);if(t(a,i,e)){r.set(e,a);o.set.forEach((t=>t(e,a,i)))}};const d=typeof Proxy==="undefined"?{}:new Proxy(a,{get(e,t){return c(t)},ownKeys(e){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(e,t){return r.has(t)},set(e,t,a){l(t,a);return true}});const p=(e,t)=>{o[e].push(t);return()=>{h(o[e],t)}};const f=(t,a)=>{const r=(e,r)=>{if(e===t){a(r)}};const o=()=>a(u(e)[t]);const n=p("set",r);const s=p("reset",o);i.set(a,{setHandler:r,resetHandler:o,propName:t});return()=>{n();s();i.delete(a)}};const m=(...e)=>{const t=e.reduce(((e,t)=>{if(t.set){e.push(p("set",t.set))}if(t.get){e.push(p("get",t.get))}if(t.reset){e.push(p("reset",t.reset))}if(t.dispose){e.push(p("dispose",t.dispose))}return e}),[]);return()=>t.forEach((e=>e()))};const b=e=>{const t=r.get(e);o.set.forEach((a=>a(e,t,t)))};const g=(e,t)=>{const a=i.get(t);if(a&&a.propName===e){h(o.set,a.setHandler);h(o.reset,a.resetHandler);i.delete(t)}};return{state:d,get:c,set:l,on:p,onChange:f,use:m,dispose:s,reset:n,forceUpdate:b,removeListener:g}};const h=(e,t)=>{const a=e.indexOf(t);if(a>=0){e[a]=e[e.length-1];e.length--}};const m=(e,t)=>{const a=f(e,t);a.use(p());return a};const b={currentStep:1,token:null,correlationId:null,location:null,availablePlans:[],selectedPlan:null,selectedContract:null,formData:null,orderId:null,requestError:null,isLoading:false,error:null};const{state:g,onChange:y,reset:x}=m(b);const _={setToken:(e,t)=>{g.token=e;g.correlationId=t;sessionStorage.setItem("token",e);sessionStorage.setItem("correlationId",t)},getStoredToken:()=>({token:sessionStorage.getItem("token"),correlationId:sessionStorage.getItem("correlationId")}),hasToken:()=>!!g.token||!!sessionStorage.getItem("token"),clearToken:()=>{g.token=null;g.correlationId=null;sessionStorage.removeItem("token");sessionStorage.removeItem("correlationId")},setStep:e=>{g.currentStep=e},nextStep:()=>{if(g.currentStep<5){g.currentStep=g.currentStep+1}},prevStep:()=>{if(g.currentStep>1){g.currentStep=g.currentStep-1}},setLocation:e=>{g.location=e;sessionStorage.setItem("latitud",btoa(String(e.latitude)));sessionStorage.setItem("longitud",btoa(String(e.longitude)));sessionStorage.setItem("planCodeInternet",btoa(e.serviceType))},setAvailablePlans:e=>{g.availablePlans=e},selectPlan:e=>{g.selectedPlan=e;sessionStorage.setItem("planId",String(e.planId));sessionStorage.setItem("planPrice",String(e.decPrice));sessionStorage.setItem("plan",JSON.stringify(e))},setContract:e=>{g.selectedContract=e;sessionStorage.setItem("typeContractId",String(e.typeId));sessionStorage.setItem("contractInstallment",String(e.deadlines));sessionStorage.setItem("contractInstallation",String(e.installation));sessionStorage.setItem("contractActivation",String(e.activation));sessionStorage.setItem("contractModen",String(e.modem))},setFormData:e=>{g.formData=e},setOrderResult:(e,t)=>{g.orderId=e;g.requestError=t},setLoading:e=>{g.isLoading=e},setError:e=>{g.error=e},clearError:()=>{g.error=null},resetFlow:()=>{const e=["planCodeInternet","latitud","longitud","planId","planPrice","plan","typeContractId","contractInstallment","contractInstallation","contractActivation","contractModen"];e.forEach((e=>sessionStorage.removeItem(e)));x()},getSubmissionData:()=>({location:g.location,plan:g.selectedPlan,contract:g.selectedContract,formData:g.formData})};if(typeof window!=="undefined"&&window.__FSF_DEBUG__){y("currentStep",(e=>{console.log("[FSF Store] Step changed:",e)}));y("isLoading",(e=>{console.log("[FSF Store] Loading:",e)}));y("error",(e=>{if(e){console.error("[FSF Store] Error:",e)}}))}class v extends Error{status;response;constructor(e,t,a){super(e);this.status=t;this.response=a;this.name="HttpError"}}class k{baseUrl="";defaultTimeout=6e4;setBaseUrl(e){this.baseUrl=e.replace(/\/$/,"")}getBaseUrl(){return this.baseUrl}setTimeout(e){this.defaultTimeout=e}getHeaders(e,t){const a=new Headers;if(!t){a.set("Content-Type","application/json")}const r=g.token||sessionStorage.getItem("token");const o=g.correlationId||sessionStorage.getItem("correlationId");if(r){a.set("Authorization",`Bearer ${r}`)}if(o){a.set("X-Correlation-ID",o)}a.set("App","shop");a.set("Platform","web");if(e){Object.entries(e).forEach((([e,t])=>{a.set(e,t)}))}return a}async request(e){const{method:t,endpoint:a,body:r,headers:o,timeout:i,isFormData:n}=e;const s=a.startsWith("/")?a:`/${a}`;const c=`${this.baseUrl}${s}`;const l=new AbortController;const d=setTimeout((()=>l.abort()),i||this.defaultTimeout);try{const e={method:t,headers:this.getHeaders(o,n),signal:l.signal};if(r&&t!=="GET"){if(n&&r instanceof FormData){e.body=r}else{e.body=JSON.stringify(r)}}const a=await fetch(c,e);clearTimeout(d);let i;const s=a.headers.get("content-type");const p=await a.text();if(p&&(p.startsWith("{")||p.startsWith("["))){try{i=JSON.parse(p)}catch{i=p}}else if(s&&s.includes("application/json")){try{i=JSON.parse(p)}catch{i=p}}else{i=p}if(!a.ok){throw new v(`HTTP Error: ${a.status} ${a.statusText}`,a.status,i)}return{data:i,status:a.status,ok:a.ok}}catch(e){clearTimeout(d);if(e instanceof v){throw e}if(e.name==="AbortError"){throw new v("Request timeout",408)}throw new v(e.message||"Network error",0)}}async get(e,t){const a=await this.request({method:"GET",endpoint:e,headers:t});return a.data}async post(e,t,a){const r=await this.request({method:"POST",endpoint:e,body:t,headers:a});return r.data}async postFormData(e,t,a){const r=await this.request({method:"POST",endpoint:e,body:t,headers:a,isFormData:true});return r.data}async put(e,t,a){const r=await this.request({method:"PUT",endpoint:e,body:t,headers:a});return r.data}async delete(e,t){const a=await this.request({method:"DELETE",endpoint:e,headers:t});return a.data}}const w=new k;class C{isInitializing=false;initPromise=null;async fetchToken(){const e=await w.post("api/Token/getToken",{agentName:""});if(e.hasError){throw new Error(e.message||"Failed to obtain token")}return e}async initialize(){if(this.isInitializing&&this.initPromise){return this.initPromise}this.isInitializing=true;this.initPromise=(async()=>{try{const e=_.getStoredToken();if(e.token&&e.correlationId){_.setToken(e.token,e.correlationId);console.log("[TokenService] Using existing token from sessionStorage");return true}console.log("[TokenService] Fetching new token...");const t=await this.fetchToken();_.setToken(t.token,t.correlationId);console.log("[TokenService] Token obtained and stored successfully");return true}catch(e){console.error("[TokenService] Failed to initialize token:",e);_.setError("Error al obtener el token de autenticación");return false}finally{this.isInitializing=false}})();return this.initPromise}hasToken(){return _.hasToken()}getToken(){const e=_.getStoredToken();return e.token}getCorrelationId(){const e=_.getStoredToken();return e.correlationId}clearToken(){_.clearToken();console.log("[TokenService] Token cleared")}async refreshToken(){this.clearToken();return this.initialize()}async ensureToken(){if(!this.hasToken()){const e=await this.initialize();if(!e){throw new Error("Failed to obtain authentication token")}}}}const S=new C;const A=[{typeId:1,type:"Con Contrato",contract:[{contractId:2,deadlines:12,installation:80,activation:0,modem:0},{contractId:3,deadlines:24,installation:0,activation:0,modem:0}]},{typeId:0,type:"Sin Contrato",contract:[{contractId:1,deadlines:0,installation:160,activation:0,modem:0}]}];const I={NO_COVERAGE:"¡Fuera de área! Por el momento no contamos con cobertura en tu zona."};class F{async validateCoverage(e,t){await S.ensureToken();const a=await w.post("api/Catalogue/getInternetPlans",{latitud:String(e),longitud:String(t)});return a}async checkCoverage(e,t,a,r,o){const i=await this.validateCoverage(e,t);if(i.hasError){return{latitude:e,longitude:t,address:a,city:r,zipCode:o,serviceType:"",serviceMessage:I.NO_COVERAGE,isValid:false}}const n=i.priorityService;let s=I.NO_COVERAGE;if(i.attributes&&i.attributes.length>0){const e=i.attributes.find((e=>e.servicE_NAME===n));if(e){s=e.servicE_MESSAGE}}const c=["GPON","VRAD","CLARO HOGAR"];const l=c.includes(n);if(!l){return{latitude:e,longitude:t,address:a,city:r,zipCode:o,serviceType:"",serviceMessage:I.NO_COVERAGE,isValid:false}}console.log("[CoverageService] Returning valid coverage");return{latitude:e,longitude:t,address:a,city:r,zipCode:o,serviceType:n,serviceMessage:s,isValid:true}}getServiceDisplayName(e){const t={GPON:"Fibra Óptica",VRAD:"Internet DSL","CLARO HOGAR":"Internet Inalámbrico"};return t[e]||e}isClaroHogar(e){return e.toLowerCase()==="claro hogar"}}const E=new F;class P{currentCartId=0;async getPlans(e,t=0){await S.ensureToken();let a=e;if(e==="CLARO HOGAR"){a="internet"}console.log("[PlansService] Fetching plans for type:",a,"catalogId:",t);const r=await w.post("api/Plans/getPlansInternet",{catalogID:t,type:a});console.log("[PlansService] Response:",r);if(r.hasError){console.error("[PlansService] API error:",r.message);throw new Error(r.message||"Failed to fetch plans")}console.log("[PlansService] Plans found:",r.planList?.length||0);return r.planList||[]}async addToCart(e,t=0,a=0,r=0,o=""){await S.ensureToken();const i=S.getToken()||"";const n=this.getEffectivePrice(e);const s={token:i,productId:e.planId,notificationDetailID:0,chvSource:"",promoCode:sessionStorage.getItem("discountCoupon")||"",installments:r,decPrice:n,decDeposit:0,decDownPayment:0,decTotalPrice:n,Qty:1,flowId:1,ssoToken:"",userID:"0",parentProductId:a,parentCartId:t,creditClass:o,downgradeAllowed:false,pendingAccelerated:0,acceletartedAmount:0,pastDueAmount:0,delicuency:false};const c=await w.post("api/Card/addToCart",{cartItems:JSON.stringify([s])});if(c.hasError){throw new Error(c.message||"Failed to add plan to cart")}if(c.code){this.currentCartId=c.code}this.storePlanInSession(e);return c}async addToCartCurrentPlan(e,t){await S.ensureToken();const a=new FormData;a.append("productId",String(e));a.append("cartId",String(t));return await w.postFormData("api/Plans/addToCartCurrentPlan",a)}async deleteFromCart(e,t=0){await S.ensureToken();const a=await w.post("api/Card/deleteItem",{cartId:e,productId:t});if(!a.hasError){if(e===this.currentCartId){this.currentCartId=0}}return a}storePlanInSession(e){try{sessionStorage.setItem("plan",JSON.stringify(e));sessionStorage.setItem("planId",String(e.planId));const t=this.getEffectivePrice(e);sessionStorage.setItem("planPrice",String(t));sessionStorage.setItem("planCodeInternet",btoa(e.planSoc||String(e.planId)))}catch(e){console.error("[PlansService] Error storing plan in session:",e)}}getStoredPlan(){try{const e=sessionStorage.getItem("plan");return e?JSON.parse(e):null}catch{return null}}getStoredPlanId(){const e=sessionStorage.getItem("planId");return e?parseInt(e,10):0}getCartId(){return this.currentCartId}setCartId(e){this.currentCartId=e}clearPlan(){this.currentCartId=0;sessionStorage.removeItem("plan");sessionStorage.removeItem("planId");sessionStorage.removeItem("planPrice");sessionStorage.removeItem("planCodeInternet")}formatPrice(e){return`$${e.toFixed(2)}`}parsePlanFeatures(e){if(!e)return[];const t=/<li[^>]*>([^<]+)<\/li>/gi;const a=[];let r;while((r=t.exec(e))!==null){a.push(r[1].trim())}return a}getDiscountPercentage(e,t){if(!t||t>=e)return 0;return Math.round((e-t)/e*100)}hasPromotion(e){return e.bitPromotion||e.decSalePrice&&e.decSalePrice<e.decPrice}getEffectivePrice(e){if(e.decSalePrice&&e.decSalePrice<e.decPrice){return e.decSalePrice}return e.decPrice}sortByPrice(e,t=true){return[...e].sort(((e,a)=>{const r=this.getEffectivePrice(e);const o=this.getEffectivePrice(a);return t?r-o:o-r}))}}const D=new P;class z{async submitRequest(e){await S.ensureToken();const t=new FormData;Object.entries(e).forEach((([e,a])=>{if(a!==undefined&&a!==null){t.append(e,String(a))}}));const a=await w.postFormData("api/Orders/internetServiceRequest",t);return a}async getOrder(e){await S.ensureToken();const t=await w.get(`api/Orders/getOrder?orderId=${encodeURIComponent(e)}`);return t}async sendConfirmation(e,t){await S.ensureToken();const a=new FormData;a.append("orderId",e);a.append("email",t);const r=await w.postFormData("api/Orders/sendConfirmation",a);return r}buildPayload(e,t,a,r){return{type:t.typeId,name:e.personal.firstName,second_name:e.personal.secondName||"",last_name:e.personal.lastName,second_surname:e.personal.secondLastName,date_birth:e.personal.birthDate||"1990-01-01",email:e.personal.email,telephone1:e.personal.phone1,telephone2:e.personal.phone2||"",zipCode:e.address.zipCode,address:e.address.address,city:e.address.city,id_type:e.personal.identificationType==="license"?"1":"2",id:e.personal.identificationNumber,identification_expiration:e.personal.identificationExpiration,frontFlowId:this.generateFlowId(),plan_id:String(a.planId),plan_name:a.planName,deadlines:String(t.deadlines),installation:String(t.installation),activation:String(t.activation),moden:String(t.modem),claro_customer:e.isExistingCustomer,latitud:String(r.latitude),longitud:String(r.longitude),business_name:e.business.businessName,business_position:e.business.position}}generateFlowId(){return`FSF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}validateSubmissionData(e,t,a,r){const o=[];if(!r){o.push("location")}if(!a){o.push("plan")}if(!t){o.push("contract")}if(!e){o.push("formData")}else{if(!e.personal.firstName)o.push("firstName");if(!e.personal.lastName)o.push("lastName");if(!e.personal.secondLastName)o.push("secondLastName");if(!e.personal.identificationNumber)o.push("identificationNumber");if(!e.personal.identificationExpiration)o.push("identificationExpiration");if(!e.personal.phone1)o.push("phone1");if(!e.personal.email)o.push("email");if(!e.business.businessName)o.push("businessName");if(!e.business.position)o.push("position");if(!e.address.address)o.push("address");if(!e.address.city)o.push("city");if(!e.address.zipCode)o.push("zipCode")}return{isValid:o.length===0,missingFields:o}}}const N=new z;const T={DEFAULT_CENTER:{lat:18.333036,lng:-66.4161211},DEFAULT_ZOOM:17,MAP_ID:"8481b97098c495ab",DEFAULT_MAP_TYPE:"satellite"};const O={NO_COVERAGE:"¡Fuera de área! Por el momento no contamos con cobertura en tu zona.",COVERAGE_ERROR:"Error al verificar la cobertura. Por favor, intenta de nuevo.",REQUEST_ERROR:"¡Lo sentimos, ha ocurrido un error en el proceso de solicitud! En este momento estamos presentando inconvenientes en nuestro sistema. Por favor, inténtalo nuevamente.",GEOLOCATION_DENIED:"Permiso de ubicación denegado. Por favor, permite el acceso a tu ubicación.",GEOLOCATION_UNAVAILABLE:"No se pudo obtener tu ubicación. Por favor, ingresa tu dirección manualmente.",GEOLOCATION_TIMEOUT:"Tiempo de espera agotado al obtener tu ubicación."};const M={REQUEST_SUCCESS:"¡Tu solicitud fue enviada con éxito!",REQUEST_SUCCESS_SUBTITLE:"Pronto nos comunicaremos contigo."};class L{apiKey="";isLoaded=false;loadPromise=null;map=null;marker=null;autocomplete=null;infoWindow=null;setApiKey(e){this.apiKey=e}async loadGoogleMaps(){if(this.isLoaded){return}if(this.loadPromise){return this.loadPromise}if(!this.apiKey){throw new Error("Google Maps API key is required")}this.loadPromise=new Promise(((e,t)=>{if(window.google?.maps){this.isLoaded=true;e();return}const a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${this.apiKey}&libraries=places,marker&v=weekly`;a.async=true;a.defer=true;a.onload=()=>{this.isLoaded=true;e()};a.onerror=()=>{t(new Error("Failed to load Google Maps API"))};document.head.appendChild(a)}));return this.loadPromise}isGoogleMapsLoaded(){return this.isLoaded&&!!window.google?.maps}async initMap(e,t){await this.loadGoogleMaps();const a={center:T.DEFAULT_CENTER,zoom:T.DEFAULT_ZOOM,mapTypeId:T.DEFAULT_MAP_TYPE,mapId:T.MAP_ID,disableDefaultUI:false,zoomControl:true,mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_TOP,mapTypeIds:["roadmap","satellite"]},streetViewControl:false,fullscreenControl:false};this.map=new google.maps.Map(e,{...a,...t});return this.map}getMap(){return this.map}centerMap(e){if(this.map){this.map.setCenter(e)}}setZoom(e){if(this.map){this.map.setZoom(e)}}async setMarker(e){if(!this.map){throw new Error("Map not initialized")}if(this.marker){this.marker.map=null}const{AdvancedMarkerElement:t}=await google.maps.importLibrary("marker");this.marker=new t({map:this.map,position:e,gmpDraggable:true});this.map.setCenter(e)}addMapClickListener(e){if(!this.map){console.warn("Map not initialized");return}this.map.addListener("click",(t=>{if(t.latLng){const a={lat:t.latLng.lat(),lng:t.latLng.lng()};e(a)}}))}clear(){this.removeMarker()}getMarkerPosition(){if(!this.marker?.position){return null}const e=this.marker.position;return{lat:e.lat,lng:e.lng}}removeMarker(){if(this.marker){this.marker.map=null;this.marker=null}}showInfoWindow(e,t){if(!this.map||!this.marker){console.warn("Map or marker not initialized");return}this.closeInfoWindow();const a=`<style>\n      .gm-ui-hover-effect { display: none !important; }\n      .gm-style .gm-style-iw-c { padding: 0px !important; width: 600px !important; max-width: none !important; }\n      .gm-style .gm-style-iw-d { padding: 0px !important; overflow: unset !important; width: 100% !important; max-width: none !important; }\n      .gm-style .gm-style-iw-tc { display: none !important; }\n      .gm-style-iw { width: 600px !important; max-width: none !important; }\n    </style>`;this.infoWindow=new google.maps.InfoWindow({content:a+e,maxWidth:600});this.infoWindow.open({anchor:this.marker,map:this.map});this.infoWindow.addListener("domready",(()=>{setTimeout((()=>{const e=document.querySelector(".gm-style-iw-c");const t=document.querySelector(".gm-style-iw-d");if(e){e.style.setProperty("width","600px","important");e.style.setProperty("max-width","none","important");e.style.setProperty("padding","0","important")}if(t){t.style.setProperty("width","100%","important");t.style.setProperty("max-width","none","important");t.style.setProperty("overflow","visible","important")}const a=document.querySelector(".gm-style-iw");if(a){a.style.setProperty("width","600px","important");a.style.setProperty("max-width","none","important")}}),50)}));if(t){window.__infoWindowContinueCallback=t}}closeInfoWindow(){if(this.infoWindow){this.infoWindow.close();this.infoWindow=null}}getInfoWindow(){return this.infoWindow}async initAutocomplete(e,t){await this.loadGoogleMaps();const a={componentRestrictions:{country:"pr"},fields:["address_components","geometry","formatted_address"],types:["address"]};this.autocomplete=new google.maps.places.Autocomplete(e,a);this.autocomplete.addListener("place_changed",(()=>{const e=this.autocomplete?.getPlace();if(!e?.geometry?.location){return}const a=this.parseAddressComponents(e);t(a);if(this.map){this.centerMap(a.coordinates);this.setMarker(a.coordinates)}}))}parseAddressComponents(e){const t=e.address_components||[];let a="";let r="";let o="";let i="";for(const e of t){const t=e.types[0];switch(t){case"street_number":a=e.long_name;break;case"route":r=e.long_name;break;case"locality":case"administrative_area_level_2":o=o||e.long_name;break;case"postal_code":i=e.long_name;break}}const n=[a,r].filter(Boolean).join(" ");const s=e.geometry?.location;return{address:n,city:o,zipCode:i,coordinates:{lat:s?.lat()||0,lng:s?.lng()||0},formattedAddress:e.formatted_address||""}}async geocodeAddress(e){await this.loadGoogleMaps();const t=new google.maps.Geocoder;return new Promise((a=>{t.geocode({address:e,componentRestrictions:{country:"pr"}},((e,t)=>{if(t==="OK"&&e&&e[0]){const t=e[0];const r=this.parseGeocoderResult(t);a(r)}else{a(null)}}))}))}async reverseGeocode(e){await this.loadGoogleMaps();const t=new google.maps.Geocoder;return new Promise((a=>{t.geocode({location:e},((e,t)=>{if(t==="OK"&&e&&e[0]){const t=e[0];const r=this.parseGeocoderResult(t);a(r)}else{a(null)}}))}))}parseGeocoderResult(e){const t=e.address_components||[];let a="";let r="";let o="";let i="";for(const e of t){const t=e.types[0];switch(t){case"street_number":a=e.long_name;break;case"route":r=e.long_name;break;case"locality":case"administrative_area_level_2":o=o||e.long_name;break;case"postal_code":i=e.long_name;break}}const n=[a,r].filter(Boolean).join(" ");const s=e.geometry.location;return{address:n,city:o,zipCode:i,coordinates:{lat:s.lat(),lng:s.lng()},formattedAddress:e.formatted_address}}async getCurrentLocation(){return new Promise(((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition((t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})}),(e=>{let a="Error getting location";switch(e.code){case e.PERMISSION_DENIED:a="Location permission denied";break;case e.POSITION_UNAVAILABLE:a="Location information unavailable";break;case e.TIMEOUT:a="Location request timed out";break}t(new Error(a))}),{enableHighAccuracy:true,timeout:1e4,maximumAge:0})}))}async getCurrentLocationWithAddress(){const e=await this.getCurrentLocation();return this.reverseGeocode(e)}destroy(){this.closeInfoWindow();this.removeMarker();this.autocomplete=null;this.map=null}}const R=new L;class B{HOGAR_CATALOGUE_ID=6;DEFAULT_PAGE_ITEMS=300;FILTER_INTERNET_TELEFONIA="39";FILTER_INTERNET_INALAMBRICO="23";async listCatalogue(e=this.FILTER_INTERNET_INALAMBRICO,t=1,a="",r="",o=""){await S.ensureToken();const i={catalogId:this.HOGAR_CATALOGUE_ID,pageNo:t,pageItems:this.DEFAULT_PAGE_ITEMS,creditClass:"C",orderBy:7,news:0,offers:"0",categoryID:"0",brand:r,filter:a,price:o,labels:[]};console.log("[CatalogueService] Request:",JSON.stringify(i));const n=await w.post("api/Catalogue/listCatalogue",i);console.log("[CatalogueService] API Response keys:",Object.keys(n||{}));if(n.hasError){throw new Error(n.message||"Failed to fetch catalogue")}const s=parseInt(e,10);const c=this.extractProductsFromSubcatalog(n,this.HOGAR_CATALOGUE_ID,s);console.log("[CatalogueService] Extracted products:",c.length);return{hasError:false,products:c,totalItems:c.length}}extractProductsFromSubcatalog(e,t,a){if(!e.catalogs||!Array.isArray(e.catalogs)){console.log("[CatalogueService] No catalogs in response");return[]}const r=e.catalogs.find((e=>e.catalogId===t));if(!r){console.log("[CatalogueService] Parent catalog not found:",t);for(const t of e.catalogs){if(t.catalog){const e=t.catalog.find((e=>e.catalogId===a));if(e){console.log("[CatalogueService] Found subcatalog in:",t.catalogId);return e.products||[]}}}return[]}console.log("[CatalogueService] Found parent catalog:",r.catalogId,r.catalogName);if(!r.catalog||!Array.isArray(r.catalog)){console.log("[CatalogueService] No subcatalogs in parent");return r.products||[]}const o=r.catalog.find((e=>e.catalogId===a));if(!o){console.log("[CatalogueService] Subcatalog not found:",a);console.log("[CatalogueService] Available subcatalogs:",r.catalog.map((e=>({id:e.catalogId,name:e.catalogName}))));return r.catalog[0]?.products||[]}console.log("[CatalogueService] Found subcatalog:",o.catalogId,o.catalogName);return o.products||[]}_findCatalogById(e,t){const a=[...e];while(a.length>0){const e=a.shift();if(e.catalogId===t){return e}if(e.catalog&&e.catalog.length>0){a.push(...e.catalog)}}return null}getProductTypeFilters(){return[{value:this.FILTER_INTERNET_TELEFONIA,label:"Internet + Telefonía"},{value:this.FILTER_INTERNET_INALAMBRICO,label:"Internet Inalámbrico"}]}formatInstallmentPrice(e){return`$${e.toFixed(2)}/mes`}formatRegularPrice(e){return`$${e.toFixed(2)}`}calculateInstallment(e,t){if(t<=0)return e;return Number((e/t).toFixed(2))}cleanDescription(e){if(!e)return"";return e.replace(/<[^>]*>/g,"").trim()}truncateText(e,t=80){if(!e||e.length<=t)return e;return e.substring(0,t).trim()+"..."}parseColors(e){if(!e||!Array.isArray(e))return[];return e.map((e=>e.webColor)).filter(Boolean)}storeProductInSession(e){try{sessionStorage.setItem("selectedProduct",JSON.stringify(e));sessionStorage.setItem("productId",String(e.productId))}catch(e){console.error("[CatalogueService] Error storing product in session:",e)}}getStoredProduct(){try{const e=sessionStorage.getItem("selectedProduct");return e?JSON.parse(e):null}catch{return null}}clearProduct(){sessionStorage.removeItem("selectedProduct");sessionStorage.removeItem("productId")}}const j=new B;const U={CART:"cart",CART_ID:"cartId",MAIN_ID:"mainId",DISCOUNT_COUPON:"discountCoupon",CART_TOTAL:"cartTotal",CART_PRODUCTS:"cartProducts"};const $={HOME:6};const q="C";class J{async getCart(e=""){try{await S.ensureToken();const t=e||this.getDiscountCoupon()||"";const a={promoCode:t};console.log("[CartService] Getting cart with promo:",t||"none");const r=await w.post("api/Card/getCart",a);if(r.hasError){console.error("[CartService] API error:",r.message);return{hasError:true,message:r.message||"Error al obtener el carrito",errorDisplay:r.errorDisplay}}this.storeCartInSession(r);return r}catch(e){console.error("[CartService] Exception:",e);return{hasError:true,message:"Error de conexión al obtener el carrito"}}}async addToCart(e,t,a=1,r,o){try{await S.ensureToken();const i=S.getToken()||"";const n={token:i,productId:String(e.productId),notificationDetailID:0,chvSource:"",promoCode:"",installments:t,decPrice:e.update_price||0,decDeposit:0,decDownPayment:e.decDownPayment||0,decTotalPrice:e.regular_price||0,Qty:a,flowId:$.HOME,ssoToken:"",userID:"0",parentProductId:o||0,parentCartId:r||0,creditClass:q,downgradeAllowed:false,pendingAccelerated:0,acceletartedAmount:0,pastDueAmount:0,delicuency:false};const s=JSON.stringify([n]);const c={cartItems:s};console.log("[CartService] Adding to cart:",e.productName);console.log("[CartService] Request payload:",c);const l=await w.post("api/Card/addToCart",c);if(l.hasError){console.error("[CartService] Add to cart error:",l.message);return{code:0,hasError:true,message:l.message||"Error al agregar al carrito",errorDisplay:l.errorDisplay}}if(l.code){this.storeMainId(l.code)}console.log("[CartService] Added to cart, mainId:",l.code);return l}catch(e){console.error("[CartService] Exception:",e);return{code:0,hasError:true,message:"Error de conexión al agregar al carrito"}}}async addPlanToCart(e,t,a){try{await S.ensureToken();const r=S.getToken()||"";const o={token:r,productId:String(e.planId),notificationDetailID:0,chvSource:"",promoCode:"",installments:1,decPrice:e.decSalePrice||e.decPrice,decDeposit:0,decDownPayment:0,decTotalPrice:e.decPrice,Qty:1,flowId:$.HOME,ssoToken:"",userID:"0",parentProductId:a,parentCartId:t,creditClass:q,downgradeAllowed:false,pendingAccelerated:0,acceletartedAmount:0,pastDueAmount:0,delicuency:false};const i=JSON.stringify([o]);const n={cartItems:i};console.log("[CartService] Adding plan to cart:",e.planName);const s=await w.post("api/Card/addToCart",n);if(s.hasError){console.error("[CartService] Add plan error:",s.message);return{code:0,hasError:true,message:s.message||"Error al agregar el plan",errorDisplay:s.errorDisplay}}console.log("[CartService] Plan added to cart");return s}catch(e){console.error("[CartService] Exception:",e);return{code:0,hasError:true,message:"Error de conexión al agregar el plan"}}}async deleteItem(e,t){try{await S.ensureToken();const a={cartId:e,productId:t};console.log("[CartService] Deleting item:",e,t);const r=await w.post("api/Card/deleteItem",a);if(r.hasError){console.error("[CartService] Delete error:",r.message);return{hasError:true,message:r.message||"Error al eliminar del carrito"}}console.log("[CartService] Item deleted successfully");return{hasError:false}}catch(e){console.error("[CartService] Exception:",e);return{hasError:true,message:"Error de conexión al eliminar del carrito"}}}async clearCart(){try{const e=await this.getCart();if(e.hasError||!e.products?.length){return{hasError:false}}for(const t of e.products){const e=await this.deleteItem(t.cartId,t.productId);if(e.hasError){return e}}this.clearCartSession();return{hasError:false}}catch(e){console.error("[CartService] Clear cart error:",e);return{hasError:true,message:"Error al limpiar el carrito"}}}storeCartInSession(e){try{sessionStorage.setItem(U.CART,JSON.stringify(e));if(e.totalPrice!==undefined){sessionStorage.setItem(U.CART_TOTAL,String(e.totalPrice))}if(e.products){sessionStorage.setItem(U.CART_PRODUCTS,JSON.stringify(e.products))}}catch(e){console.error("[CartService] Error storing cart:",e)}}getCachedCart(){try{const e=sessionStorage.getItem(U.CART);return e?JSON.parse(e):null}catch{return null}}storeMainId(e){try{sessionStorage.setItem(U.MAIN_ID,String(e))}catch(e){console.error("[CartService] Error storing mainId:",e)}}getMainId(){try{const e=sessionStorage.getItem(U.MAIN_ID);return e?parseInt(e,10):null}catch{return null}}storeDiscountCoupon(e){try{sessionStorage.setItem(U.DISCOUNT_COUPON,e)}catch(e){console.error("[CartService] Error storing coupon:",e)}}getDiscountCoupon(){try{return sessionStorage.getItem(U.DISCOUNT_COUPON)}catch{return null}}clearDiscountCoupon(){try{sessionStorage.removeItem(U.DISCOUNT_COUPON)}catch(e){console.error("[CartService] Error clearing coupon:",e)}}clearCartSession(){try{Object.values(U).forEach((e=>{sessionStorage.removeItem(e)}));console.log("[CartService] Cleared cart session")}catch(e){console.error("[CartService] Error clearing session:",e)}}calculateTotals(e){let t=0;let a=0;e.forEach((e=>{t+=(e.decPrice||0)*e.qty;a+=(e.decTotalPerMonth||e.decPrice||0)*e.qty}));const r=.115;const o=t*r;const i=t+o;return{subtotal:Number(t.toFixed(2)),tax:Number(o.toFixed(2)),total:Number(i.toFixed(2)),monthlyPayment:Number(a.toFixed(2))}}getEquipmentItems(e){return e.filter((e=>e.equipment===true||e.home===true))}getPlanItems(e){return e.filter((e=>e.plan===true))}hasEquipment(e){return e.some((e=>e.equipment===true||e.home===true))}hasPlan(e){return e.some((e=>e.plan===true))}getItemCount(e){return e.reduce(((e,t)=>e+t.qty),0)}formatPrice(e){return`$${e.toFixed(2)}`}}const G=new J;const V={SELECTED_PRODUCT:"selectedProduct",PRODUCT_ID:"productId",MAIN_ID:"mainId",CHILDREN_ID:"childrenId",PARENT_ID:"parentId",DEVICE_TYPE:"deviceType",SELECTED_COLOR:"selectedColor",SELECTED_STORAGE:"selectedStorage",SUBCATALOG_ID:"subcatalogId"};const H=1;class Y{extractStockAndImagesFromColors(e){const t=[];let a=undefined;let r=undefined;let o=false;if(!e||e.length===0){console.log("[ProductService] No colors array in response, stock will be undefined");return{stock:a,images:t,childrenId:r}}for(let i=0;i<e.length;i++){const n=e[i];if(!n.storages||n.storages.length===0)continue;for(let e=0;e<n.storages.length;e++){const i=n.storages[e];if(!i.products||i.products.length===0)continue;const s=i.products[0];if(n.defaultColor&&i.defaultStorage){if(s.stock!==undefined&&s.stock>H){a=s.stock;r=s.productId;o=true;if(s.imgUrl)t.push(s.imgUrl);if(s.side_image)t.push(s.side_image);if(s.back_image)t.push(s.back_image);console.log("[ProductService] Found default with stock:",a,"childrenId:",r);break}}}if(o)break}if(!o){for(let i=0;i<e.length;i++){const n=e[i];if(!n.storages||n.storages.length===0)continue;for(let e=0;e<n.storages.length;e++){const i=n.storages[e];if(!i.products||i.products.length===0)continue;const s=i.products[0];if(s.stock!==undefined&&s.stock>H){a=s.stock;r=s.productId;o=true;if(s.imgUrl)t.push(s.imgUrl);if(s.side_image)t.push(s.side_image);if(s.back_image)t.push(s.back_image);console.log("[ProductService] Found any with stock:",a,"childrenId:",r);break}}if(o)break}}if(a===undefined&&e.length>0){const o=e[0];if(o.storages&&o.storages.length>0){const e=o.storages[0];if(e.products&&e.products.length>0){const o=e.products[0];a=o.stock;r=o.productId;if(o.imgUrl)t.push(o.imgUrl);if(o.side_image)t.push(o.side_image);if(o.back_image)t.push(o.back_image);console.log("[ProductService] Using first product stock:",a,"childrenId:",r)}}}return{stock:a,images:t,childrenId:r}}async getEquipmentDetail(e){try{await S.ensureToken();const t=S.getToken()||"";const a={productId:e,userID:0,token:t};console.log("[ProductService] Fetching equipment detail:",e);const r=await w.post("api/Catalogue/equipmentDetail",a);if(r.hasError){console.error("[ProductService] API error:",r.message);return{hasError:true,message:r.message||"Error al cargar el detalle del producto",errorDisplay:r.errorDisplay}}const{stock:o,images:i,childrenId:n}=this.extractStockAndImagesFromColors(r.colors);const s=[];if(r.imgUrl)s.push(r.imgUrl);if(r.detailImage&&r.detailImage!==r.imgUrl){s.push(r.detailImage)}i.forEach((e=>{if(e&&!s.includes(e)){s.push(e)}}));if(r.images?.length){r.images.forEach((e=>{if(e&&!s.includes(e)){s.push(e)}}))}const c=o!==undefined?o:r.stock;const l={productId:r.productId||e,productName:r.productName||"",brandName:r.brandName,imgUrl:r.imgUrl||"",detailImage:r.detailImage,images:s.length>0?s:undefined,shortDescription:r.shortDescription,longDescription:r.longDescription,regular_price:r.regular_price||0,update_price:r.update_price||0,installments:r.installments||0,decDownPayment:r.decDownPayment,decDeposit:r.decDeposit,creditClass:r.creditClass,colors:r.colors,storages:r.storages,specifications:r.specifications,features:r.features,catalogId:r.catalogId,home:r.home,stock:c};console.log("[ProductService] Product stock from nested structure:",o,"root:",r.stock,"final:",c);if(n){this.storeChildrenId(n);console.log("[ProductService] Stored childrenId from colors:",n)}this.storeMainId(e);return{hasError:false,product:l}}catch(e){console.error("[ProductService] Exception:",e);return{hasError:true,message:"Error de conexión al cargar el detalle del producto"}}}storeMainId(e){try{sessionStorage.setItem(V.MAIN_ID,String(e));console.log("[ProductService] Stored mainId:",e)}catch(e){console.error("[ProductService] Error storing mainId:",e)}}getMainId(){try{const e=sessionStorage.getItem(V.MAIN_ID);return e?parseInt(e,10):null}catch{return null}}storeSelectedProduct(e,t){try{sessionStorage.setItem(V.SELECTED_PRODUCT,JSON.stringify(e));sessionStorage.setItem(V.PRODUCT_ID,String(e.productId));if(t){sessionStorage.setItem(V.SUBCATALOG_ID,String(t));console.log("[ProductService] Stored subcatalogId:",t)}console.log("[ProductService] Stored selected product:",e.productName)}catch(e){console.error("[ProductService] Error storing product:",e)}}storeSubcatalogId(e){try{sessionStorage.setItem(V.SUBCATALOG_ID,String(e));console.log("[ProductService] Stored subcatalogId:",e)}catch(e){console.error("[ProductService] Error storing subcatalogId:",e)}}getSubcatalogId(){try{const e=sessionStorage.getItem(V.SUBCATALOG_ID);return e?parseInt(e,10):0}catch{return 0}}getSelectedProduct(){try{const e=sessionStorage.getItem(V.SELECTED_PRODUCT);return e?JSON.parse(e):null}catch{return null}}getProductId(){try{const e=sessionStorage.getItem(V.PRODUCT_ID);return e?parseInt(e,10):null}catch{return null}}storeSelectedColor(e,t,a){try{const r={colorId:e,colorName:t,webColor:a};sessionStorage.setItem(V.SELECTED_COLOR,JSON.stringify(r))}catch(e){console.error("[ProductService] Error storing color:",e)}}getSelectedColor(){try{const e=sessionStorage.getItem(V.SELECTED_COLOR);return e?JSON.parse(e):null}catch{return null}}storeSelectedStorage(e,t){try{const a={storageId:e,storageName:t};sessionStorage.setItem(V.SELECTED_STORAGE,JSON.stringify(a))}catch(e){console.error("[ProductService] Error storing storage:",e)}}getSelectedStorage(){try{const e=sessionStorage.getItem(V.SELECTED_STORAGE);return e?JSON.parse(e):null}catch{return null}}storeChildrenId(e){try{sessionStorage.setItem(V.CHILDREN_ID,String(e))}catch(e){console.error("[ProductService] Error storing childrenId:",e)}}getChildrenId(){try{const e=sessionStorage.getItem(V.CHILDREN_ID);return e?parseInt(e,10):null}catch{return null}}storeParentId(e){try{sessionStorage.setItem(V.PARENT_ID,String(e))}catch(e){console.error("[ProductService] Error storing parentId:",e)}}getParentId(){try{const e=sessionStorage.getItem(V.PARENT_ID);return e?parseInt(e,10):null}catch{return null}}storeDeviceType(e){try{sessionStorage.setItem(V.DEVICE_TYPE,e)}catch(e){console.error("[ProductService] Error storing deviceType:",e)}}getDeviceType(){try{return sessionStorage.getItem(V.DEVICE_TYPE)}catch{return null}}clearProductSession(){try{Object.values(V).forEach((e=>{sessionStorage.removeItem(e)}));console.log("[ProductService] Cleared product session")}catch(e){console.error("[ProductService] Error clearing session:",e)}}formatPrice(e){return`$${e.toFixed(2)}`}formatInstallmentPrice(e){return`$${e.toFixed(2)}/mes`}calculateInstallment(e,t){if(t<=0)return e;return Number((e/t).toFixed(2))}cleanDescription(e){if(!e)return"";return e.replace(/<[^>]*>/g,"").trim()}isHomeProduct(e){return e.home===true||e.catalogId===6}}const W=new Y;const X={get(e){try{const t=sessionStorage.getItem(e);return t}catch{return null}},set(e,t){try{sessionStorage.setItem(e,t)}catch(e){console.error("[StorageUtils] Error setting value:",e)}},getJSON(e){try{const t=sessionStorage.getItem(e);if(!t)return null;return JSON.parse(t)}catch{return null}},setJSON(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("[StorageUtils] Error setting JSON value:",e)}},remove(e){try{sessionStorage.removeItem(e)}catch(e){console.error("[StorageUtils] Error removing value:",e)}},clear(){try{sessionStorage.clear()}catch(e){console.error("[StorageUtils] Error clearing storage:",e)}},getEncoded(e){try{const t=sessionStorage.getItem(e);if(!t)return null;return atob(t)}catch{return null}},setEncoded(e,t){try{sessionStorage.setItem(e,btoa(t))}catch(e){console.error("[StorageUtils] Error setting encoded value:",e)}},getEncodedJSON(e){try{const t=sessionStorage.getItem(e);if(!t)return null;const a=atob(t);return JSON.parse(a)}catch{return null}},setEncodedJSON(e,t){try{const a=JSON.stringify(t);sessionStorage.setItem(e,btoa(a))}catch(e){console.error("[StorageUtils] Error setting encoded JSON value:",e)}}};const K=[{label:"Adjuntas",value:"00601"},{label:"Adjuntas",value:"00631"},{label:"Aguada",value:"00602"},{label:"Aguadilla",value:"00603"},{label:"Aguadilla",value:"00604"},{label:"Aguadilla",value:"00605"},{label:"Aguadilla",value:"00690"},{label:"Aguas Buenas",value:"00703"},{label:"Aibonito",value:"00705"},{label:"La Plata",value:"00786"},{label:"Añasco",value:"00610"},{label:"Angeles",value:"00611"},{label:"Arecibo",value:"00612"},{label:"Arecibo",value:"00613"},{label:"Arecibo",value:"00614"},{label:"Arecibo",value:"00616"},{label:"Arecibo",value:"00652"},{label:"Arecibo",value:"00688"},{label:"Arroyo",value:"00714"},{label:"Barceloneta",value:"00617"},{label:"Barranquitas",value:"00794"},{label:"Bayamón",value:"00956"},{label:"Bayamón",value:"00957"},{label:"Bayamón",value:"00959"},{label:"Bayamón",value:"00961"},{label:"Bayamón",value:"00958"},{label:"Cabo Rojo",value:"00623"},{label:"Boquerón",value:"00622"},{label:"Caguas",value:"00725"},{label:"Caguas",value:"00727"},{label:"Caguas",value:"00726"},{label:"Camuy",value:"00627"},{label:"Canóvanas",value:"00729"},{label:"Canóvanas",value:"00745"},{label:"Carolina",value:"00979"},{label:"Carolina",value:"00982"},{label:"Carolina",value:"00983"},{label:"Carolina",value:"00985"},{label:"Carolina",value:"00987"},{label:"Carolina",value:"00981"},{label:"Carolina",value:"00984"},{label:"Carolina",value:"00986"},{label:"Carolina",value:"00988"},{label:"Cataño",value:"00962"},{label:"Cataño",value:"00963"},{label:"Cayey",value:"00736"},{label:"Cayey",value:"00737"},{label:"Ceiba",value:"00735"},{label:"Ceiba",value:"00742"},{label:"Ciales",value:"00638"},{label:"Cidra",value:"00739"},{label:"Coamo",value:"00769"},{label:"Comerio",value:"00782"},{label:"Corozal",value:"00783"},{label:"Culebra",value:"00775"},{label:"Dorado",value:"00646"},{label:"Fajardo",value:"00738"},{label:"Fajardo",value:"00740"},{label:"Florida",value:"00650"},{label:"Guánica",value:"00653"},{label:"Guánica",value:"00647"},{label:"Guayama",value:"00784"},{label:"Guayama",value:"00704"},{label:"Guayama",value:"00785"},{label:"Guayanilla",value:"00656"},{label:"Guaynabo",value:"00965"},{label:"Guaynabo",value:"00966"},{label:"Guaynabo",value:"00968"},{label:"Guaynabo",value:"00971"},{label:"Guaynabo",value:"00970"},{label:"Guaynabo",value:"00969"},{label:"Gurabo",value:"00778"},{label:"Hatillo",value:"00659"},{label:"Hormigueros",value:"00660"},{label:"Humacao",value:"00791"},{label:"Humacao",value:"00792"},{label:"Humacao",value:"00741"},{label:"Isabela",value:"00662"},{label:"Jayuya",value:"00664"},{label:"Juana Díaz",value:"00795"},{label:"Juncos",value:"00777"},{label:"Lajas",value:"00667"},{label:"Lares",value:"00669"},{label:"Las Marías",value:"00670"},{label:"Las Piedras",value:"00771"},{label:"Loíza",value:"00772"},{label:"Luquillo",value:"00773"},{label:"Manatí",value:"00674"},{label:"Maricao",value:"00606"},{label:"Maunabo",value:"00707"},{label:"Mayaguez",value:"00680"},{label:"Mayaguez",value:"00682"},{label:"Mayaguez",value:"00681"},{label:"Moca",value:"00676"},{label:"Morovis",value:"00687"},{label:"Naguabo",value:"00718"},{label:"Rio Blanco",value:"00744"},{label:"Naranjito",value:"00719"},{label:"Orocovis",value:"00720"},{label:"Patillas",value:"00723"},{label:"Peñuelas",value:"00624"},{label:"Ponce",value:"00716"},{label:"Ponce",value:"00717"},{label:"Ponce",value:"00728"},{label:"Ponce",value:"00730"},{label:"Ponce",value:"00731"},{label:"Ponce",value:"00733"},{label:"Ponce",value:"00780"},{label:"Ponce",value:"00715"},{label:"Ponce",value:"00732"},{label:"Ponce",value:"00734"},{label:"Quebradillas",value:"00678"},{label:"Rincón",value:"00677"},{label:"Río Grande",value:"00721"},{label:"Río Grande",value:"00745"},{label:"Sabana Grande",value:"00637"},{label:"Salinas",value:"00751"},{label:"San Germán",value:"00683"},{label:"San Germán",value:"00636"},{label:"San Juan",value:"00921"},{label:"San Juan",value:"00923"},{label:"San Juan",value:"00924"},{label:"San Juan",value:"00929"},{label:"San Juan",value:"00915"},{label:"San Juan",value:"00916"},{label:"San Juan",value:"00920"},{label:"San Juan",value:"00909"},{label:"San Juan",value:"00910"},{label:"Fort Buchanan",value:"00934"},{label:"San Juan",value:"00936"},{label:"San Juan",value:"00917"},{label:"San Juan",value:"00919"},{label:"San Juan",value:"00911"},{label:"San Juan",value:"00912"},{label:"San Juan",value:"00913"},{label:"San Juan",value:"00914"},{label:"San Juan",value:"00940"},{label:"San Juan",value:"00901"},{label:"San Juan",value:"00902"},{label:"San Juan",value:"00906"},{label:"San Juan",value:"00925"},{label:"San Juan",value:"00926"},{label:"San Juan",value:"00927"},{label:"San Juan",value:"00928"},{label:"San Juan",value:"00930"},{label:"San Juan",value:"00907"},{label:"San Juan",value:"00908"},{label:"San Juan",value:"00931"},{label:"San Juan",value:"00933"},{label:"San Lorenzo",value:"00754"},{label:"San Sebastián",value:"00685"},{label:"Santa Isabel",value:"00757"},{label:"Toa Alta",value:"00953"},{label:"Toa Alta",value:"00954"},{label:"Toa Baja",value:"00949"},{label:"Toa Baja",value:"00950"},{label:"Toa Baja",value:"00951"},{label:"Toa Baja",value:"00952"},{label:"Trujillo Alto",value:"00976"},{label:"Trujillo Alto",value:"00977"},{label:"Saint Just",value:"00978"},{label:"Utuado",value:"00641"},{label:"Utuado",value:"00611"},{label:"Vega Alta",value:"00692"},{label:"Vega Baja",value:"00693"},{label:"Vega Baja",value:"00694"},{label:"Vieques",value:"00765"},{label:"Villalba",value:"00766"},{label:"Yabucoa",value:"00767"},{label:"Yauco",value:"00698"}];const Z=["PO BOX","P.O. BOX","P O BOX","HC ","RR ","APARTADO"];const Q={SHIPMENT_ID:"shipmentId",ZIP_CODE:"zipCode",SHIPPING_ADDRESS:"shippingAddress",DELIVERY_METHOD:"deliveryMethodInfo"};class ee{http;constructor(){this.http=w}async createAddress(e,t="6"){const a=X.get("wBCUserID")||"0";const r=S.getToken();const o=new FormData;o.append("token",r);o.append("flowId",t);o.append("userId",a);o.append("name",e.name);o.append("email",e.email);o.append("phone",this.cleanPhoneNumber(e.phone));o.append("phone2",this.cleanPhoneNumber(e.phone2||""));o.append("address1",e.address1);o.append("address2",e.address2||"");o.append("city",e.city);o.append("zip",e.zip+"-0000");o.append("state",e.state);o.append("town",e.city);o.append("notes",e.notes||"");o.append("chvAuthorizerName",e.authorizerName||"");o.append("chvAuthorizerPhone",this.cleanPhoneNumber(e.authorizerPhone||""));try{const t=await this.http.postFormData("api/Address/create",o);if(!t.hasError&&t.response){this.setShipmentId(t.response);this.setZipCode(e.zip);this.storeShippingAddress(e)}return t}catch(e){console.error("[ShippingService] Create address error:",e);return{hasError:true,message:"Error al crear la dirección de envío"}}}async getDeliveryMethods(){const e=S.getToken();const t=new FormData;t.append("token",e);try{const e=await this.http.postFormData("api/Address/getDeliveryMethods",t);return e}catch(e){console.error("[ShippingService] Get delivery methods error:",e);return{hasError:true,errorDesc:"Error al obtener métodos de entrega"}}}getShipmentId(){const e=X.get(Q.SHIPMENT_ID);return e?parseInt(e,10):0}setShipmentId(e){X.set(Q.SHIPMENT_ID,e.toString())}getZipCode(){return X.get(Q.ZIP_CODE)||""}setZipCode(e){X.set(Q.ZIP_CODE,e)}storeShippingAddress(e){X.setJSON(Q.SHIPPING_ADDRESS,e)}getStoredShippingAddress(){return X.getJSON(Q.SHIPPING_ADDRESS)}storeDeliveryMethod(e){X.setJSON(Q.DELIVERY_METHOD,e)}getStoredDeliveryMethod(){return X.getJSON(Q.DELIVERY_METHOD)}clearShippingData(){X.remove(Q.SHIPMENT_ID);X.remove(Q.ZIP_CODE);X.remove(Q.SHIPPING_ADDRESS);X.remove(Q.DELIVERY_METHOD)}validateZipCode(e){const t=K.find((t=>t.value===e));return t?t.label:null}getMunicipalityByZip(e){return this.validateZipCode(e)||""}getAllZipCodes(){return K}isValidPhysicalAddress(e){const t=e.toUpperCase();return!Z.some((e=>t.includes(e)))}isValidEmail(e){const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return t.test(e)}isValidPhone(e){const t=this.cleanPhoneNumber(e);return t.length===10}cleanPhoneNumber(e){return e.replace(/\(|\)|-|\s/g,"")}formatPhoneNumber(e){const t=this.cleanPhoneNumber(e);if(t.length!==10)return e;return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`}}const te=new ee;const ae={ORDER_BAN:"orderBan",PAYMENT_RESULT:"paymentResult"};class re{paymentIframeUrl="";setPaymentIframeUrl(e){this.paymentIframeUrl=e}getPaymentIframeUrl(){return this.paymentIframeUrl}async createOrder(e){const t=S.getToken();const a=new FormData;a.append("token",t);a.append("flowId",e.flowId);a.append("frontFlowId",e.frontFlowId);a.append("frontFlowName",e.frontFlowName);a.append("banExisting",e.banExisting||"");a.append("subscriberExisting",e.subscriberExisting||"");a.append("amount",e.amount);a.append("email",e.email);a.append("zipCode",e.zipCode);a.append("deposit",e.deposit);a.append("pastDueAmount",e.pastDueAmount||"0");try{const e=await w.postFormData("api/Orders/creationOfOrder",a);if(!e.hasError&&e.ban){this.storeOrderBan(e.ban)}return e}catch(e){console.error("[PaymentService] Create order error:",e);return{hasError:true,errorDisplay:"Error al crear la orden"}}}async recordPayment(e){const t=S.getToken();const a=new FormData;a.append("token",t);a.append("ban",e.ban);a.append("cardNumber",e.cardNumber);a.append("cardType",e.cardType);a.append("authorizationNumber",e.authorizationNumber);a.append("referenceNumber",e.referenceNumber);a.append("description",e.description);a.append("operationId",e.operationId);a.append("amount",e.amount);a.append("deposit",e.deposit);try{const e=await w.postFormData("api/Payment/record",a);return e}catch(e){console.error("[PaymentService] Record payment error:",e);return{hasError:true,errorDisplay:"Error al registrar el pago"}}}async recordPaymentError(e,t,a,r,o,i,n,s){const c=S.getToken();const l=new FormData;l.append("token",c);l.append("ban",e);l.append("subscriber",t);l.append("description",a);l.append("operationId",r);l.append("deposit",o);l.append("cardType",i);l.append("cardNumber",n);l.append("amount",s);try{return await w.postFormData("api/Payment/error",l)}catch(e){console.error("[PaymentService] Record error error:",e);return{hasError:true}}}async getPaymentIframe(e){try{const t=await w.post("api/Payment/getPaymentIframe",e);return t}catch(e){console.error("[PaymentService] Get iframe error:",e);return{errorInfo:{hasError:true,errorDisplay:"Error al obtener el iframe de pago"}}}}storeOrderBan(e){X.set(ae.ORDER_BAN,e)}getOrderBan(){return X.get(ae.ORDER_BAN)||""}storePaymentResult(e){X.setJSON(ae.PAYMENT_RESULT,e)}getPaymentResult(){return X.getJSON(ae.PAYMENT_RESULT)}clearPaymentData(){X.remove(ae.ORDER_BAN);X.remove(ae.PAYMENT_RESULT)}buildPaymentItems(e){const t=[];if(e.depositAmount&&e.depositAmount>0){t.push({paymentType:"DEPOSIT",amount:e.depositAmount})}if(e.totalDownPayment&&e.totalDownPayment>0){t.push({paymentType:"DOWNPAYMENT",amount:e.totalDownPayment})}if(e.totalTax&&e.totalTax>0){const a=(e.totalPrice||0)-(e.depositAmount||0)-(e.totalDownPayment||0)-(e.installmentAmount||0);if(a>0){t.push({paymentType:"TAXES",amount:Number(a.toFixed(2))})}}if(e.cartUpdateResponse?.acceletartedAmount){t.push({paymentType:"INSTALLMENT",amount:e.cartUpdateResponse.acceletartedAmount})}return t}calculateTotalAmount(e){return e.reduce(((e,t)=>e+t.amount),0)}}const oe=new re;const ie=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block;width:100%;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;color:#333333;line-height:1.5}.fsf-container{width:100%;max-width:1200px;margin:0 auto;padding:1rem}@media (min-width: 768px){.fsf-container{padding:1.5rem}}.fsf-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;padding:2rem}.fsf-loading__spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#0097A9;border-radius:50%;animation:spin 1s linear infinite}.fsf-loading__text{margin-top:1rem;font-size:1rem;font-weight:400;line-height:1.5;color:#666666}.fsf-error{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;padding:2rem;text-align:center}.fsf-error__icon{display:flex;align-items:center;justify-content:center;width:64px;height:64px;font-size:1.75rem;font-weight:700;color:#FFFFFF;background-color:#DA291C;border-radius:50%}.fsf-error__title{margin-top:1rem;font-size:1.5rem;font-weight:600;line-height:1.35;color:#333333}.fsf-error__message{margin-top:0.5rem;font-size:1rem;font-weight:400;line-height:1.5;color:#666666;max-width:400px}.fsf-error__button{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.fsf-error__button:disabled{opacity:0.5;cursor:not-allowed}.fsf-error__button{height:48px;background-color:#DA291C;color:#FFFFFF}.fsf-error__button:hover:not(:disabled){background-color:rgb(181.843902439, 34.2, 23.356097561)}.fsf-error__button:active:not(:disabled){background-color:rgb(163.7658536585, 30.8, 21.0341463415)}.fsf-error__button{margin-top:1.5rem}.step-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;padding:2rem;text-align:center;background:#FFFFFF;border-radius:0.75rem;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);margin:1rem}.step-placeholder h2{font-size:1.75rem;font-weight:700;line-height:1.2;color:#333333;margin-bottom:1rem}.step-placeholder p{font-size:1rem;font-weight:400;line-height:1.5;color:#666666;margin-bottom:1.5rem}.step-placeholder button{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-placeholder button:disabled{opacity:0.5;cursor:not-allowed}.step-placeholder button{height:48px;background-color:#DA291C;color:#FFFFFF}.step-placeholder button:hover:not(:disabled){background-color:rgb(181.843902439, 34.2, 23.356097561)}.step-placeholder button:active:not(:disabled){background-color:rgb(163.7658536585, 30.8, 21.0341463415)}.step-placeholder button{margin:0.5rem}.step-placeholder button:last-child{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-placeholder button:last-child:disabled{opacity:0.5;cursor:not-allowed}.step-placeholder button:last-child{height:48px;background-color:#0097A9;color:#FFFFFF}.step-placeholder button:last-child:hover:not(:disabled){background-color:rgb(0, 114.5455621302, 128.2)}.step-placeholder button:last-child:active:not(:disabled){background-color:rgb(0, 96.3183431953, 107.8)}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}`;const ne={LOCATION:1,CATALOGUE:2,PRODUCT_DETAIL:3,PLANS:4,ORDER_SUMMARY:5,SHIPPING:6,PAYMENT:7,CONFIRMATION:8};const se=5;const ce=8;const le=class{constructor(e){a(this,e);this.flowComplete=r(this,"flowComplete");this.flowError=r(this,"flowError");this.flowCancel=r(this,"flowCancel");this.stepChange=r(this,"stepChange")}apiUrl;googleMapsKey;correlationId;initialStep=1;debug=false;currentStep=1;isLoading=true;error=null;isInitialized=false;flowComplete;flowError;flowCancel;stepChange;handleApiUrlChange(e){if(e){w.setBaseUrl(e)}}async componentWillLoad(){if(this.debug){window.__FSF_DEBUG__=true}if(this.apiUrl){w.setBaseUrl(this.apiUrl)}if(this.initialStep){this.currentStep=this.initialStep;_.setStep(this.initialStep)}await this.initializeToken()}componentDidLoad(){this.log("Component loaded")}disconnectedCallback(){this.log("Component disconnected")}async initializeToken(){this.isLoading=true;this.error=null;try{const e=await S.initialize();if(!e){this.error="Error al inicializar la sesión";this.emitError(new Error(this.error),false)}this.isInitialized=true}catch(e){this.error=e.message||"Error de inicialización";this.emitError(e,false)}finally{this.isLoading=false}}handleStepChange=e=>{const t=this.currentStep;const a=this.isClaroHogar()?ce:se;let r;if(e==="forward"){r=Math.min(this.currentStep+1,a);_.nextStep()}else{r=Math.max(this.currentStep-1,1);_.prevStep()}this.currentStep=r;_.setStep(r);this.stepChange.emit({from:t,to:r,direction:e});this.log(`Step changed: ${t} -> ${r}`)};_goToStep=e=>{const t=this.currentStep;const a=e>t?"forward":"backward";_.setStep(e);this.currentStep=e;this.stepChange.emit({from:t,to:e,direction:a});this.log(`Step changed: ${t} -> ${e}`)};handleFlowComplete=e=>{this.log("Flow completed",e);this.flowComplete.emit(e)};handleFlowCancel=()=>{this.log("Flow cancelled");_.resetFlow();this.currentStep=1;_.setStep(1);this.flowCancel.emit()};emitError(e,t=true){this.flowError.emit({step:this.currentStep,error:e,recoverable:t})}log(...e){if(this.debug){console.log("[FixedServiceFlow]",...e)}}isClaroHogar(){const e=g.location?.serviceType?.toUpperCase();return e==="CLARO HOGAR"}renderStep(){const e={onNext:()=>this.handleStepChange("forward"),onBack:()=>this.handleStepChange("backward"),onComplete:this.handleFlowComplete,googleMapsKey:this.googleMapsKey};if(this.isClaroHogar()){this.log("CLARO HOGAR flow - step:",this.currentStep);return this.renderClaroHogarStep(e)}return this.renderStandardStep(e)}renderStandardStep(e){switch(this.currentStep){case 1:return o("step-location",{...e});case 2:return o("step-plans",{...e});case 3:return o("step-contract",{...e});case 4:return o("step-form",{...e});case 5:return o("step-confirmation",{...e,onCancel:this.handleFlowCancel});default:return null}}renderClaroHogarStep(e){switch(this.currentStep){case ne.LOCATION:return o("step-location",{...e});case ne.CATALOGUE:return o("step-catalogue",{...e});case ne.PRODUCT_DETAIL:return o("step-product-detail",{...e});case ne.PLANS:return o("step-plans",{...e});case ne.ORDER_SUMMARY:return o("step-order-summary",{...e});case ne.SHIPPING:return o("step-shipping",{...e});case ne.PAYMENT:return o("step-payment",{...e});case ne.CONFIRMATION:return o("step-confirmation",{...e,onCancel:this.handleFlowCancel});default:return null}}renderLoading(){return o("div",{class:"fsf-loading"},o("div",{class:"fsf-loading__spinner"}),o("p",{class:"fsf-loading__text"},"Cargando..."))}renderError(){return o("div",{class:"fsf-error"},o("div",{class:"fsf-error__icon"},"!"),o("h3",{class:"fsf-error__title"},"Error"),o("p",{class:"fsf-error__message"},this.error),o("button",{class:"fsf-error__button",onClick:()=>this.initializeToken()},"Reintentar"))}render(){if(this.isLoading){return o(i,null,this.renderLoading())}if(this.error&&!this.isInitialized){return o(i,null,this.renderError())}return o(i,null,o("div",{class:"fsf-container"},this.renderStep()))}static get watchers(){return{apiUrl:["handleApiUrlChange"]}}};le.style=ie();const de=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block}.step-catalogue{width:100%;padding:0 1rem}.container-filter{display:grid;grid-gap:10px;padding:20px 0;align-items:center;justify-content:space-between;border-bottom:1px solid #DBDBDB;grid-template-columns:auto 1fr auto}@media (max-width: 991px){.container-filter{grid-template-columns:1fr;gap:15px}}.filter-title-main{margin:0;font-size:24px;font-weight:700;color:#333333}@media (max-width: 991px){.filter-title-main{font-size:20px}}.filter-content{display:flex;gap:10px;align-items:center;justify-content:flex-end}@media (max-width: 991px){.filter-content{width:100%}}.input-filter-wrapper{position:relative;display:flex;align-items:center;width:300px}@media (max-width: 991px){.input-filter-wrapper{flex:1;width:auto}}.search-icon{position:absolute;left:12px;width:20px;height:20px;color:#999999}.input-filter{width:100%;height:40px;padding:8px 12px 8px 40px;font-size:16px;border:1px solid #DBDBDB;border-radius:12px;outline:none;transition:border-color 0.2s}.input-filter:focus{border-color:#DA291C}.input-filter::placeholder{color:#999999}.btn-search{height:40px;padding:0 24px;background:#DA291C;color:#FFFFFF;border:none;border-radius:22px;font-size:16px;font-weight:700;cursor:pointer;white-space:nowrap;transition:background-color 0.2s}.btn-search:hover{background:rgb(181.843902439, 34.2, 23.356097561)}@media (max-width: 767px){.btn-search{padding:0 16px;font-size:14px}}.btn-hidden-filter{display:flex;align-items:center;gap:8px;height:40px;padding:0 16px;background:transparent;color:#0097A9;border:1px solid #0097A9;border-radius:22px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s}.btn-hidden-filter:hover{background:rgba(0, 151, 169, 0.1)}.btn-hidden-filter .filter-icon{width:16px;height:16px}@media (max-width: 991px){.btn-hidden-filter{display:none}}.catalogue-content{display:grid;grid-template-columns:280px 1fr;gap:24px;padding:20px 0}@media (max-width: 1199px){.catalogue-content{grid-template-columns:240px 1fr}}@media (max-width: 991px){.catalogue-content{grid-template-columns:1fr}}.filter-container{border-radius:12px;border:1px solid #DBDBDB;background:#FFFFFF;height:fit-content}@media (max-width: 991px){.filter-container{display:none !important}}.filter-header{padding:20px;display:flex;align-items:baseline;justify-content:space-between;border-bottom:1px solid #DBDBDB}.filter-title{margin:0;font-size:24px;font-weight:700;color:#333333}.reset-filter{margin:0;color:#0097A9;cursor:pointer;font-size:14px;font-weight:700;text-decoration:none}.reset-filter:hover{text-decoration:underline}.filter-result{padding:20px;border-bottom:1px solid #DBDBDB}.filter-result .result{margin:0;font-size:14px;font-weight:700;color:#666666}.filter-type-product{border-bottom:1px solid #DBDBDB}.filter-type-product:last-child{border-bottom:none}.filter-type-title{display:flex;padding:20px;cursor:pointer;align-items:center;justify-content:space-between}.filter-title-section{margin:0;font-size:16px;font-weight:700;color:#333333}.chevron-icon{width:20px;height:20px;color:#666666}.slot-radio{padding:0 20px 20px}.radio-group{display:flex;flex-direction:column;gap:12px}.radio-button{display:flex;align-items:center;gap:10px;cursor:pointer}.radio-button input[type=radio]{width:18px;height:18px;accent-color:#0097A9;cursor:pointer}.radio-button .radio-label{font-size:14px;color:#333333}.products-section{min-height:400px}.loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;padding:2rem;background:rgba(255, 255, 255, 0.95);border-radius:16px}.loading-container p{margin-top:1rem;font-size:18px;font-weight:600;color:#333333}.error-container,.empty-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;color:#666666}.error-container p,.empty-container p{margin-top:1rem;font-size:16px}.error-container button,.empty-container button{margin-top:1rem;padding:8px 24px;background:#0097A9;color:#FFFFFF;border:none;border-radius:20px;cursor:pointer}.spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#DA291C;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.container-product{display:grid;grid-gap:1.5rem;align-items:stretch;grid-template-columns:1fr 1fr 1fr}@media (max-width: 1399px){.container-product{grid-template-columns:1fr 1fr}}@media (max-width: 767px){.container-product{grid-template-columns:1fr}}.container-product-filter-off{grid-template-columns:1fr 1fr 1fr 1fr}@media (max-width: 1399px){.container-product-filter-off{grid-template-columns:1fr 1fr 1fr}}@media (max-width: 1199px){.container-product-filter-off{grid-template-columns:1fr 1fr}}@media (max-width: 767px){.container-product-filter-off{grid-template-columns:1fr}}.new-product-item{width:100%;height:100%;overflow:hidden;position:relative;border-radius:12px;border:solid 1px #dbdbdb;background:#FFFFFF;box-shadow:2px 3px 27px -3px rgb(211, 211, 211);transition:transform 0.2s, box-shadow 0.2s;display:flex;flex-direction:column}.new-product-item:hover{transform:translateY(-2px);box-shadow:2px 6px 32px -3px rgb(180, 180, 180)}.new-product-item__top{display:grid;margin-top:20px;position:relative;grid-column-gap:16px;padding:16px 16px 8px;grid-template-columns:1fr 2fr}@media (max-width: 1199px){.new-product-item__top{display:flex;flex-direction:column}}.new-product-item__img{display:flex;align-items:center;justify-content:center}.new-product-item__img img{max-width:100%;max-height:120px;object-fit:contain}@media (max-width: 1199px){.new-product-item__img{width:100px;margin:0 auto 16px}}.new-product-item__info .title{margin-top:10px;color:#3c3c3c;font-size:18px;font-weight:700;line-height:24px;margin-bottom:16px;font-family:Roboto, sans-serif}@media (max-width: 1199px){.new-product-item__info .title{margin-top:0;font-size:16px;min-height:48px}}.new-product-item__info .financed-price .financed-price-text{margin-top:4px;color:#3c3c3c;font-size:16px;font-weight:700;line-height:16px}.new-product-item__info .financed-price .financed-price__value{color:#DA291C;font-size:18px;font-weight:700;line-height:24px}.new-product-item__info .financed-price .installments-text{color:#3c3c3c;font-size:14px;font-weight:700;line-height:16px}.new-product-item__info .regular-price{color:#6c6c6c;font-size:14px;font-weight:400;margin-top:10px;line-height:16px}.container-colors{display:flex;gap:8px;padding:10px 25px 15px;flex-wrap:wrap}.color-dot{width:14px;height:14px;border-radius:50%;border:1px solid #3c3c3c;cursor:pointer}.color-dot:active{transform:scale(0.95)}.new-product-item__middle{padding:15px;color:#3c3c3c;min-height:65px;font-size:14px;line-height:1.4;border-top:2px solid #dbdbdb;border-bottom:2px solid #dbdbdb;flex-grow:1}.new-product-item__middle .description-text{display:block}.new-product-item__middle .see-detail{display:inline-block;margin-top:8px;font-size:14px;color:#0097A9;cursor:pointer;text-decoration:underline}.new-product-item__bottom{padding:1rem;display:flex;justify-content:center;align-items:center}.action-button{color:#DA291C;text-align:center;font-size:16px;font-weight:700;line-height:16px;border:solid 1px #DA291C;border-radius:30px;padding:0.5rem 2.5rem;background:transparent;cursor:pointer;transition:all 0.2s}.action-button:hover{background-color:#DA291C;color:#FFFFFF}.back-button-container{display:flex;justify-content:center;padding:24px 0 40px}.btn-back{padding:12px 32px;background:transparent;color:#0097A9;border:2px solid #0097A9;border-radius:30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.2s}.btn-back:hover{background:#0097A9;color:#FFFFFF}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content{position:relative;background:#FFFFFF;border-radius:12px;max-width:500px;width:100%;max-height:80vh;overflow:hidden;box-shadow:0 4px 20px rgba(0, 0, 0, 0.15);animation:modalFadeIn 0.2s ease-out}@keyframes modalFadeIn{from{opacity:0;transform:scale(0.95)}to{opacity:1;transform:scale(1)}}.modal-close{position:absolute;top:12px;right:12px;width:32px;height:32px;background:transparent;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.2s}.modal-close svg{width:20px;height:20px;color:#3c3c3c}.modal-close:hover{background:#f0f0f0}.modal-title{padding:20px;padding-right:50px;border-bottom:1px solid #dbdbdb;color:#3c3c3c;font-size:20px;font-weight:700;line-height:1.3}.modal-title .modal-subtitle{font-size:14px;font-weight:500;color:#6c6c6c;margin-bottom:8px}@media (max-width: 767px){.modal-title{font-size:18px;padding:16px;padding-right:45px}}.modal-body{padding:20px;max-height:300px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#ccc transparent}.modal-body::-webkit-scrollbar{width:6px}.modal-body::-webkit-scrollbar-track{background:transparent}.modal-body::-webkit-scrollbar-thumb{background:#ccc;border-radius:3px}.modal-text{margin:0;color:#3c3c3c;font-size:16px;font-weight:400;line-height:1.5;text-align:justify}@media (max-width: 767px){.modal-text{font-size:14px}}`;const pe=class{constructor(e){a(this,e)}onNext;onBack;products=[];filteredProducts=[];isLoading=true;error=null;searchText="";selectedFilter="";showFilters=true;filterOptions=[];showDetailModal=false;modalTitle="";modalContent="";componentWillLoad(){this.filterOptions=j.getProductTypeFilters();this.selectedFilter=j.FILTER_INTERNET_INALAMBRICO}componentDidLoad(){this.loadProducts()}async loadProducts(){this.isLoading=true;this.error=null;try{const e=await j.listCatalogue(this.selectedFilter,1,this.searchText);this.products=e.products||[];this.filteredProducts=this.products}catch(e){console.error("[StepCatalogue] Error loading products:",e);this.error="Error al cargar el catálogo de productos"}finally{this.isLoading=false}}handleFilterChange=async e=>{this.selectedFilter=e;await this.loadProducts()};handleSearchInput=e=>{this.searchText=e.target.value};handleSearch=async()=>{await this.loadProducts()};handleKeyPress=e=>{if(e.key==="Enter"){this.handleSearch()}};_toggleFilters=()=>{this.showFilters=!this.showFilters};clearFilters=()=>{this.selectedFilter=j.FILTER_INTERNET_INALAMBRICO;this.searchText="";this.loadProducts()};handleViewMore=e=>{const t=parseInt(this.selectedFilter,10);j.storeProductInSession(e);W.storeSelectedProduct(e,t);console.log("[StepCatalogue] Product selected:",e.productName,"subcatalogId:",t);this.onNext?.()};cleanHTML(e){return j.cleanDescription(e)}getSelectedFilterCount(){return this.selectedFilter?1:0}handleSeeDetail=e=>{const t=this.cleanHTML(e.shortDescription||"");this.modalTitle=e.productName;this.modalContent=t;this.showDetailModal=true};closeDetailModal=()=>{this.showDetailModal=false;this.modalTitle="";this.modalContent=""};renderFilterSidebar(){const e=this.getSelectedFilterCount();return o("aside",{class:"filter-container",style:{display:this.showFilters?"block":"none"}},o("div",{class:"filter-header"},o("span",{class:"filter-title"},"Filtrar por:"),o("a",{class:"reset-filter",onClick:this.clearFilters},"Limpiar filtros")),o("div",{class:"filter-result"},o("p",{class:"result"},e>0?`filtros seleccionados (${e})`:"Ningún filtro seleccionado")),o("div",{class:"filter-type-product"},o("div",{class:"filter-type-title"},o("h4",{class:"filter-title-section"},"Tipo de producto"),o("svg",{class:"chevron-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("polyline",{points:"6 9 12 15 18 9"}))),o("div",{class:"slot-radio"},o("div",{class:"radio-group"},this.filterOptions.map((e=>o("label",{class:"radio-button"},o("input",{type:"radio",name:"productType",value:e.value,checked:this.selectedFilter===e.value,onChange:()=>this.handleFilterChange(e.value)}),o("span",{class:"radio-label"},e.label))))))))}renderProductCard(e){const t=this.cleanHTML(e.shortDescription||"");const a=j.truncateText(t,80);return o("div",{class:"new-product-item"},o("div",{class:"new-product-item__top"},o("div",{class:"new-product-item__img"},o("img",{src:e.imgUrl,alt:e.productName,loading:"lazy"})),o("div",{class:"new-product-item__info"},o("div",{class:"title"},e.productName),e.installments>0&&o("div",{class:"financed-price"},o("div",{class:"financed-price-text"},"Financiado"),o("div",{class:"financed-price__value"},"$",e.update_price?.toFixed(2)||"0.00","/mes"),o("div",{class:"installments-text"},e.installments," Plazos")),o("div",{class:"regular-price"},"Precio regular: $",e.regular_price?.toFixed(2)||"0.00"))),e.colors&&e.colors.length>0&&o("div",{class:"container-colors"},e.colors.map((e=>o("div",{class:"color-dot",style:{backgroundColor:e.webColor}})))),o("div",{class:"new-product-item__middle"},t?o("span",{class:"description-text"},a,t.length>80&&o("a",{class:"see-detail",onClick:t=>{t.stopPropagation();this.handleSeeDetail(e)}},"Ver detalle")):o("span",{class:"description-text"}," ")),o("div",{class:"new-product-item__bottom"},o("button",{class:"action-button",onClick:()=>this.handleViewMore(e)},"Ver más")))}render(){const e=this.selectedFilter===j.FILTER_INTERNET_INALAMBRICO?"Internet Inalámbrico":"Internet + Telefonía";return o(i,{key:"633cab4f89f3e79907cb5db33eb2897e114ecf97"},o("div",{key:"9390e25d97abc32a1ad7c303b1460f310f6f05ab",class:"step-catalogue"},o("div",{key:"02e7d0c13069e26f9a07ea6e0c307f5bb699954c",class:"container-filter"},o("h1",{key:"ccded62f26e8b1cb8719a5e85965cbb87a793689",class:"filter-title-main"},e),o("div",{key:"2e8b8d5966728504b0c9a35953d2734cfc9d2166",class:"filter-content"},o("div",{key:"c7b44c9803036ea915e916276935c123e1ae6394",class:"input-filter-wrapper"},o("svg",{key:"fc68b3c733ac05a3d72f3242281495b1a4d195dd",class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("circle",{key:"465cf04a8bac926218930455360383f4ce76d4d2",cx:"11",cy:"11",r:"8"}),o("path",{key:"94880ba619fba184c09735fb5dee50a2dc9e2638",d:"m21 21-4.35-4.35"})),o("input",{key:"96e070ad2f6913c5dac4f32a0331f9c8452c5ca4",type:"text",class:"input-filter",placeholder:"Buscar articulo",value:this.searchText,onInput:this.handleSearchInput,onKeyPress:this.handleKeyPress})),o("button",{key:"3ed9a4be367b1daded8e20f9d04876a5cceaddf4",class:"btn-search",onClick:this.handleSearch},"Buscar"))),o("div",{key:"31dedbc72907c038675e86e69610d656dfb1933c",class:"catalogue-content"},this.renderFilterSidebar(),o("div",{key:"5fc3589a28fc81d2fa105d2ab68a8645c3e16d3c",class:"products-section"},this.isLoading&&o("div",{key:"292cb80c0714438e041805d2250be61c4db7a0e1",class:"loading-container"},o("div",{key:"e58b5e87f3092109d7ebb87f9ad4827d17e9527a",class:"spinner"}),o("p",{key:"d8ea4899e95713de1acb4d5c9e1df3d0da6f00bc"},"Cargando productos...")),this.error&&!this.isLoading&&o("div",{key:"d12da3b185d76e74f3b195a7bc95115502d50801",class:"error-container"},o("p",{key:"bd2d3bbdd3a22d41d90760af4103fcd413858551"},this.error),o("button",{key:"aecf413d4416c536d035453741ccf0b10f07ddc5",onClick:()=>this.loadProducts()},"Reintentar")),!this.isLoading&&!this.error&&o("div",{key:"ab42f43d608c13216bee78a5f6979bb883908434",class:{"container-product":true,"container-product-filter-off":!this.showFilters}},this.filteredProducts.map((e=>this.renderProductCard(e)))),!this.isLoading&&!this.error&&this.filteredProducts.length===0&&o("div",{key:"fe07cc32a053431c0f5624669646ed95d52b2014",class:"empty-container"},o("p",{key:"354f47fce91aa5d8e7d09127119fcfcad12c6a49"},"No hay productos disponibles para esta categoría")))),o("div",{key:"9edaae5bf982ec881e74353e952ae4158ce9e87c",class:"back-button-container"},o("button",{key:"ccb3b1dcafbf7a0f4938e5192874a4c59087a6d1",class:"btn-back",onClick:this.onBack},"Regresar"))),this.showDetailModal&&o("div",{key:"3c3d144571de958f77d47a1d2077e6914f758ec2",class:"modal-overlay",onClick:this.closeDetailModal},o("div",{key:"6e0ea7baa3b102322a025c316276f50468ec1e5f",class:"modal-content",onClick:e=>e.stopPropagation()},o("button",{key:"3f9017ff359a09a6f56ab2b998b64f12f408712d",class:"modal-close",onClick:this.closeDetailModal},o("svg",{key:"8b5debf990dfba49121bc00557ff8787b98766b0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("line",{key:"73e21236ccdc9be42e65ada13b224dfeed689247",x1:"18",y1:"6",x2:"6",y2:"18"}),o("line",{key:"e54bf79a62b785719755ee4e0e906e8540dc2001",x1:"6",y1:"6",x2:"18",y2:"18"}))),o("div",{key:"af62534c7dbdbe94508f0f177200e3362828b595",class:"modal-title"},o("div",{key:"2e867881616c387d65681cf3cc0e9d097e64568a",class:"modal-subtitle"},"Descripción completa"),this.modalTitle),o("div",{key:"5361636aec7839c921dc8d48d2bb5432aff0a876",class:"modal-body"},o("p",{key:"51f2c1a26f1ada39a8e3543dd2b0c4006f566773",class:"modal-text"},this.modalContent)))))}};pe.style=de();const ue=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block}.step-confirmation{width:100%}.step-confirmation__header{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #E5E5E5}.step-confirmation__header-title{font-size:1.75rem;font-weight:700;line-height:1.2;color:#333333}.step-confirmation__content{background-color:#FFFFFF;border:1px solid #E5E5E5;border-radius:0.75rem;box-shadow:0 2px 8px rgba(0, 0, 0, 0.08);transition:box-shadow 150ms ease, border-color 150ms ease;padding:3rem 2rem;text-align:center;min-height:300px;display:flex;flex-direction:column;align-items:center;justify-content:center}.step-confirmation__loading{display:flex;flex-direction:column;align-items:center;justify-content:center}.step-confirmation__loading p{margin-top:1rem;font-size:1rem;font-weight:400;line-height:1.5;color:#666666}.step-confirmation__spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#0097A9;border-radius:50%;animation:spin 1s linear infinite}.step-confirmation__result{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:500px}.step-confirmation__icon{display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.step-confirmation__icon img{width:48px;height:48px}.step-confirmation__icon svg{width:40px;height:40px}.step-confirmation__title{font-size:1.5rem;font-weight:600;line-height:1.35;color:#333333;margin-bottom:0.5rem}.step-confirmation__title--success{color:#15A045}.step-confirmation__title--error{color:#E00814}.step-confirmation__message{font-size:1rem;font-weight:400;line-height:1.5;color:#666666;margin-bottom:1.5rem}.step-confirmation__order-id{font-size:0.875rem;font-weight:400;line-height:1.5;color:#666666;margin-bottom:1.5rem;padding:0.5rem 1rem;background:#FAFAFA;border-radius:0.5rem}.step-confirmation__actions{margin-top:1.5rem;text-align:center}.step-confirmation__btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-confirmation__btn:disabled{opacity:0.5;cursor:not-allowed}.step-confirmation__btn{height:48px;background-color:transparent;color:#0097A9;border:2px solid #0097A9}.step-confirmation__btn:hover:not(:disabled){background-color:rgba(0, 151, 169, 0.1)}.step-confirmation__btn:active:not(:disabled){background-color:rgba(0, 151, 169, 0.2)}.step-confirmation__btn{min-width:180px}.step-confirmation__btn--error{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-confirmation__btn--error:disabled{opacity:0.5;cursor:not-allowed}.step-confirmation__btn--error{height:48px;background-color:#DA291C;color:#FFFFFF}.step-confirmation__btn--error:hover:not(:disabled){background-color:rgb(181.843902439, 34.2, 23.356097561)}.step-confirmation__btn--error:active:not(:disabled){background-color:rgb(163.7658536585, 30.8, 21.0341463415)}@keyframes spin{to{transform:rotate(360deg)}}`;const fe=class{constructor(e){a(this,e)}onComplete;onCancel;onBack;status="loading";orderId=null;orderNumber=null;confirmationSent=false;errorMessage="";async componentWillLoad(){const e=this.isCatalogueFlow();if(e){await this.handleCatalogueFlowConfirmation()}else{await this.submitRequest()}}isCatalogueFlow(){const e=oe.getPaymentResult();const t=!!g.selectedContract;const a=!!g.formData;return!!e&&!t&&!a}async handleCatalogueFlowConfirmation(){this.status="loading";try{const e=oe.getPaymentResult();if(!e||!e.success){throw new Error("No se encontró información del pago")}const t=oe.getOrderBan();this.orderId=t||e.operationId||null;console.log("[StepConfirmation] Catalogue flow - payment success:",{orderId:this.orderId,operationId:e.operationId,authorizationNumber:e.authorizationNumber});this.status="success";_.setOrderResult(this.orderId,null);this.onComplete?.({orderId:this.orderId,plan:g.selectedPlan,contract:null,customer:null,location:g.location})}catch(e){console.error("[StepConfirmation] Catalogue flow error:",e);this.status="error";this.errorMessage=e.message||O.REQUEST_ERROR;_.setOrderResult(null,this.errorMessage)}}async submitRequest(){this.status="loading";try{const{location:e,plan:t,contract:a,formData:r}={location:g.location,plan:g.selectedPlan,contract:g.selectedContract,formData:g.formData};const o=N.validateSubmissionData(r,a,t,e);if(!o.isValid){throw new Error(`Datos incompletos: ${o.missingFields.join(", ")}`)}const i=N.buildPayload(r,a,t,e);const n=await N.submitRequest(i);if(n.hasError){throw new Error(n.errorDisplay||n.message||O.REQUEST_ERROR)}this.orderId=n.orderId||null;if(this.orderId){this.fetchOrderDetails(this.orderId);this.sendConfirmationEmail(this.orderId,r.personal.email)}this.status="success";_.setOrderResult(this.orderId,null);this.onComplete?.({orderId:this.orderId,plan:t,contract:a,customer:r,location:e})}catch(e){console.error("Request submission failed:",e);this.status="error";this.errorMessage=e.message||O.REQUEST_ERROR;_.setOrderResult(null,this.errorMessage)}}async fetchOrderDetails(e){try{const t=await N.getOrder(e);if(!t.hasError&&t.orderNumber){this.orderNumber=t.orderNumber}}catch(e){console.warn("Could not fetch order details:",e)}}async sendConfirmationEmail(e,t){try{const a=await N.sendConfirmation(e,t);if(!a.hasError&&a.sent){this.confirmationSent=true}}catch(e){console.warn("Could not send confirmation email:",e)}}handleRetry=()=>{this.submitRequest()};handleClose=()=>{this.clearSessionStorage();_.resetFlow();this.onCancel?.()};clearSessionStorage(){console.log("[StepConfirmation] Clearing all sessionStorage data");try{G.clearCartSession();W.clearProductSession();te.clearShippingData();oe.clearPaymentData();D.clearPlan();_.clearToken()}catch(e){console.warn("[StepConfirmation] Error clearing service data:",e)}const e=["token","correlationId","latitud","longitud","planCodeInternet","plan","planId","planPrice","typeContractId","contractInstallment","contractInstallation","contractActivation","contractModen","cart","cartId","cartTotal","cartProducts","mainId","discountCoupon","selectedProduct","productId","subcatalogId","selectedColor","selectedStorage","childrenId","parentId","deviceType","shipmentId","zipCode","shippingAddress","deliveryMethod","orderBan","paymentResult","serviceLatitude","serviceLongitude","serviceAddress","serviceCity","serviceZipCode","serviceType","serviceMessage","planName","planSoc","planFeatures","customerFirstName","customerSecondName","customerLastName","customerSecondLastName","customerIdType","customerIdNumber","customerIdExpiration","customerPhone1","customerPhone2","customerEmail","customerBirthDate","businessName","businessPosition","isExistingCustomer","shoppingCart"];e.forEach((e=>{sessionStorage.removeItem(e)}));console.log("[StepConfirmation] SessionStorage cleared successfully")}renderLoading(){return o("div",{class:"step-confirmation__loading"},o("div",{class:"step-confirmation__spinner"}),o("p",null,"Procesando tu solicitud..."))}renderSuccess(){const e=this.orderNumber||this.orderId;return o("div",{class:"step-confirmation__result step-confirmation__result--success"},o("div",{class:"step-confirmation__icon step-confirmation__icon--success"},o("img",{src:"/assets/images/ok-check.svg",alt:"Éxito"})),o("h2",{class:"step-confirmation__title step-confirmation__title--success"},M.REQUEST_SUCCESS),o("p",{class:"step-confirmation__message"},M.REQUEST_SUCCESS_SUBTITLE),e&&o("p",{class:"step-confirmation__order-id"},"Número de orden: ",e),this.confirmationSent&&o("p",{class:"step-confirmation__email-sent"},"Se ha enviado un correo de confirmación a tu email."))}renderError(){return o("div",{class:"step-confirmation__result step-confirmation__result--error"},o("div",{class:"step-confirmation__icon step-confirmation__icon--error"},o("img",{src:"/assets/images/error-check.svg",alt:"Error"})),o("h2",{class:"step-confirmation__title step-confirmation__title--error"},"¡Lo sentimos, ha ocurrido un error en el proceso de solicitud!"),o("p",{class:"step-confirmation__message"},"En este momento estamos presentando inconvenientes en nuestro sistema.",o("br",null),"Por favor, inténtalo nuevamente."))}render(){return o(i,{key:"5215f0878f1df6b712acc38537e948ce3425b759"},o("div",{key:"9e12c496833250df2608be2b17d6281df49b4a81",class:"step-confirmation"},o("header",{key:"59751a8125cfa08dbffe6ede377909dee0dc36b9",class:"step-confirmation__header"},o("h1",{key:"e3dcbfa01d585cb8a927e5f65d3f3c3be7882e5e",class:"step-confirmation__header-title"},"Confirmación de Solicitud")),o("div",{key:"8c19786bfe36d066a46185738e4d23ca2ffc205b",class:"step-confirmation__content"},this.status==="loading"&&this.renderLoading(),this.status==="success"&&this.renderSuccess(),this.status==="error"&&this.renderError()),this.status==="success"&&o("div",{key:"82a95ae0d94faf62ce1274059cc34bd0343e299c",class:"step-confirmation__actions"},o("button",{key:"1a3e1d2a74e0ad18f5934ab9a872c1d8975708ed",class:"step-confirmation__btn",onClick:this.handleClose},"Cerrar")),this.status==="error"&&o("div",{key:"32cbebb3bbd7de33beb7ab6f956032e77232443d",class:"step-confirmation__actions"},o("button",{key:"1e2a9b4e0919322310e234db3222a023eb46a3c4",class:"step-confirmation__btn step-confirmation__btn--error",onClick:this.handleRetry},"Volver a intentar"))))}};fe.style=ue();const he=(e,t=true)=>{const a={style:"currency",currency:"USD",minimumFractionDigits:t?2:0,maximumFractionDigits:t?2:0};return new Intl.NumberFormat("en-US",a).format(e)};const me=e=>he(e);const be=e=>{const t=e.replace(/\D/g,"");if(t.length===0)return"";if(t.length<=3)return`(${t}`;if(t.length<=6)return`(${t.slice(0,3)}) ${t.slice(3)}`;return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`};const ge=e=>e.replace(/\D/g,"").slice(0,10);const ye=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block}.step-contract{width:100%}.step-contract__header{display:flex;align-items:center;justify-content:space-between;padding-bottom:1rem;margin-bottom:1rem;border-bottom:1px solid #CCCCCC;box-shadow:0 1px 2px rgba(0, 0, 0, 0.05)}.step-contract__title{font-size:1.75rem;font-weight:700;line-height:1.2;color:#333333}.step-contract__btn-back{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-contract__btn-back:disabled{opacity:0.5;cursor:not-allowed}.step-contract__btn-back{height:48px;background-color:transparent;color:#0097A9;border:2px solid #0097A9}.step-contract__btn-back:hover:not(:disabled){background-color:rgba(0, 151, 169, 0.1)}.step-contract__btn-back:active:not(:disabled){background-color:rgba(0, 151, 169, 0.2)}.step-contract__btn-back{height:40px}.step-contract__tabs{display:flex;margin-bottom:1.5rem;background:#FFFFFF;border-radius:0 0 0.75rem 0.75rem;box-shadow:0 2px 4px rgba(0, 0, 0, 0.08);overflow:hidden}.step-contract__tab{flex:1;padding:1.25rem 1rem;background:transparent;border:none;cursor:pointer;text-align:center;position:relative;transition:all 150ms ease}.step-contract__tab:first-child{border-right:1px solid #E5E5E5}.step-contract__tab::after{content:"";position:absolute;bottom:0;left:0;right:0;height:4px;background:transparent;transition:background-color 150ms ease}.step-contract__tab--active::after{background:#0097A9}.step-contract__tab:hover:not(.step-contract__tab--active){background:#FAFAFA}.step-contract__tab-title{display:block;font-size:1rem;font-weight:700;color:#333333;margin-bottom:0.25rem}.step-contract__tab-subtitle{display:block;font-size:0.875rem;color:#666666;line-height:1.5}.step-contract__options{display:flex;flex-direction:column;gap:1rem;align-items:center}@media (min-width: 768px){.step-contract__options{flex-direction:row;justify-content:center}}.step-contract__options--single{justify-content:center}.step-contract__option{flex:0 0 auto;width:280px;display:flex;align-items:center;padding:1rem 1.25rem;background:#FFFFFF;border:1px solid #CCCCCC;border-radius:0.75rem;cursor:pointer;transition:all 150ms ease;position:relative;overflow:hidden}@media (max-width: 767px){.step-contract__option{width:100%;max-width:320px}}.step-contract__option::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:#CCCCCC;border-radius:0.75rem 0 0 0.75rem;transition:background-color 150ms ease}.step-contract__option input[type=radio]{width:20px;height:20px;margin-right:0.75rem;accent-color:#0097A9;flex-shrink:0}.step-contract__option:hover{border-color:#999999}.step-contract__option--selected::before{background:#0097A9}.step-contract__option-content{flex:1;display:flex;flex-direction:column;gap:0.25rem}.step-contract__option-title{display:block;font-size:1rem;font-weight:600;color:#333333;line-height:1.35}.step-contract__option-price{display:block;font-size:0.875rem;color:#666666}.step-contract__option-price strong,.step-contract__option-price b{font-weight:600}.step-contract__actions{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #E5E5E5;text-align:center}.step-contract__btn-continue{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-contract__btn-continue:disabled{opacity:0.5;cursor:not-allowed}.step-contract__btn-continue{height:48px;background-color:#DA291C;color:#FFFFFF}.step-contract__btn-continue:hover:not(:disabled){background-color:rgb(181.843902439, 34.2, 23.356097561)}.step-contract__btn-continue:active:not(:disabled){background-color:rgb(163.7658536585, 30.8, 21.0341463415)}.step-contract__btn-continue{min-width:280px;height:44px;padding:0 2rem;border-radius:22px;font-size:1rem}.step-contract__btn-continue:disabled{background-color:#999999;border-color:#999999;cursor:not-allowed;opacity:1}.step-contract__btn-continue:disabled:hover{background-color:#999999;border-color:#999999}`;const xe=class{constructor(e){a(this,e)}onNext;onBack;activeTab=1;selectedOption=null;componentWillLoad(){this.restorePreviousSelection()}restorePreviousSelection(){if(g.selectedContract){this.selectedOption=g.selectedContract;this.activeTab=g.selectedContract.typeId;return}const e=sessionStorage.getItem("typeContractId");if(e!==null){const t=parseInt(e);const a=parseInt(sessionStorage.getItem("contractInstallment")||"0");const r=parseInt(sessionStorage.getItem("contractInstallation")||"0");const o=parseInt(sessionStorage.getItem("contractActivation")||"0");const i=parseInt(sessionStorage.getItem("contractModen")||"0");const n=A.find((e=>e.typeId===t));this.selectedOption={typeId:t,typeName:n?.type||"",deadlines:a,installation:r,activation:o,modem:i};this.activeTab=t;_.setContract(this.selectedOption)}}handleTabChange=e=>{this.activeTab=e;if(this.selectedOption?.typeId!==e){this.selectedOption=null}};handleSelectOption=(e,t)=>{const a=A.find((t=>t.typeId===e));this.selectedOption={typeId:e,typeName:a?.type||"",deadlines:t.deadlines,installation:t.installation,activation:t.activation,modem:t.modem};_.setContract(this.selectedOption)};handleContinue=()=>{if(this.selectedOption){this.onNext?.()}};getTotalInstallationCost(e){return e.installation+e.activation+e.modem}formatContractLabel(e){if(e===0)return"Sin contrato";return`${e} Meses de Contrato`}render(){const e=A.find((e=>e.typeId===1));const t=A.find((e=>e.typeId===0));return o(i,{key:"29cf3d679c2803ea1fb5529f32a39b1a8f186003"},o("div",{key:"994e15bc052c3be582ad3d7579898a7a26581049",class:"step-contract"},o("header",{key:"5bddb4e258c2c1f838893ae8f150ec797c628917",class:"step-contract__header"},o("h1",{key:"e9127bb729aed221bc75a3e9d20e407c5cd5748b",class:"step-contract__title"},"Selecciona un tipo de contrato"),o("button",{key:"94071b93852ac46d1edf123239a0a5e7939808ef",class:"step-contract__btn-back",onClick:this.onBack},"Regresar")),o("div",{key:"269d9627d831b10e781b6d91d6b287ae84e82eeb",class:"step-contract__tabs"},o("button",{key:"3301c449db74fdffdc7c5dc9f8127c44a6b4ab1a",class:{"step-contract__tab":true,"step-contract__tab--active":this.activeTab===1},onClick:()=>this.handleTabChange(1)},o("span",{key:"f2a2e40945863a78571c9b58b6f80949fbb4d79f",class:"step-contract__tab-title"},"Con contrato"),o("span",{key:"bae82158d5c45aa2aaf2ea343333b60709d8286e",class:"step-contract__tab-subtitle"},"12 y 24 meses de contrato")),o("button",{key:"ee4e9bfc3f250456330e43f0043360918e1808b3",class:{"step-contract__tab":true,"step-contract__tab--active":this.activeTab===0},onClick:()=>this.handleTabChange(0)},o("span",{key:"a1238ac61cd15563f582d1d4eaf10244788d1a75",class:"step-contract__tab-title"},"Sin contrato"),o("span",{key:"86c1e3e51c3e487243a2da65446dffababaeeb69",class:"step-contract__tab-subtitle"},"Plan mensual con pago por adelantado"))),o("div",{key:"1ca6835907555e07c7088dfbcb0a8a8354ff436f",class:"step-contract__content"},this.activeTab===1&&e&&o("div",{key:"f741a4f0224c6b84e32697be48f11808f1a65874",class:"step-contract__options"},e.contract.map((e=>{const t=this.getTotalInstallationCost(e);return o("label",{class:{"step-contract__option":true,"step-contract__option--selected":this.selectedOption?.deadlines===e.deadlines&&this.selectedOption?.typeId===1}},o("input",{type:"radio",name:"contract",checked:this.selectedOption?.deadlines===e.deadlines&&this.selectedOption?.typeId===1,onChange:()=>this.handleSelectOption(1,e)}),o("div",{class:"step-contract__option-content"},o("span",{class:"step-contract__option-title"},this.formatContractLabel(e.deadlines)),o("span",{class:"step-contract__option-price"},"Instalación: ",t>0?me(t):"$0.00")))}))),this.activeTab===0&&t&&o("div",{key:"ea88719ac616f6d0495ffeb627a413d27e949813",class:"step-contract__options step-contract__options--single"},t.contract.map((e=>{const t=this.getTotalInstallationCost(e);return o("label",{class:{"step-contract__option":true,"step-contract__option--selected":this.selectedOption?.typeId===0}},o("input",{type:"radio",name:"contract",checked:this.selectedOption?.typeId===0,onChange:()=>this.handleSelectOption(0,e)}),o("div",{class:"step-contract__option-content"},o("span",{class:"step-contract__option-title"},"Sin contrato"),o("span",{class:"step-contract__option-price"},"Instalación: ",me(t))))})))),o("div",{key:"031b0a7d971f934de6078801d809538352d621f8",class:"step-contract__actions"},o("button",{key:"ebfb477a49e9c19f29201ba2e89dc59c706f4b3a",class:"step-contract__btn-continue",onClick:this.handleContinue,disabled:!this.selectedOption},"Continuar"))))}};xe.style=ye();const _e={required:"Este campo es requerido",minLength:e=>`Debe tener al menos ${e} caracteres`,maxLength:e=>`No puede exceder ${e} caracteres`,email:"Ingrese un correo electrónico válido",phone:"Ingrese un número de teléfono válido (10 dígitos)",zipCode:"Ingrese un código postal válido (5 dígitos)",date:"Ingrese una fecha válida",futureDate:"La fecha debe ser futura",identification:"La identificación debe tener al menos 10 caracteres",numeric:"Solo se permiten números",alphanumeric:"Solo se permiten letras y números"};const ve=()=>({isValid:true,message:""});const ke=e=>({isValid:false,message:e});const we=e=>{if(!e||e.trim()===""){return ke(_e.required)}return ve()};const Ce=e=>t=>{if(t&&t.length<e){return ke(_e.minLength(e))}return ve()};const Se=e=>{if(!e)return ve();const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!t.test(e)){return ke(_e.email)}return ve()};const Ae=e=>{if(!e)return ve();const t=e.replace(/\D/g,"");if(t.length!==10){return ke(_e.phone)}return ve()};const Ie=e=>{if(!e)return ve();const t=/^\d{5}$/;if(!t.test(e)){return ke(_e.zipCode)}return ve()};const Fe=e=>{if(!e)return ve();const t=/^\d{4}-\d{2}-\d{2}$/;if(!t.test(e)){return ke(_e.date)}const a=new Date(e);if(isNaN(a.getTime())){return ke(_e.date)}return ve()};const Ee=e=>{if(!e)return ve();const t=Fe(e);if(!t.isValid)return t;const a=new Date(e);const r=new Date;r.setHours(0,0,0,0);if(a<=r){return ke(_e.futureDate)}return ve()};const Pe=e=>{if(!e)return ve();if(e.length<10){return ke(_e.identification)}return ve()};const De=(...e)=>t=>{for(const a of e){const e=a(t);if(!e.isValid){return e}}return ve()};const ze={firstName:De(we,Ce(3)),lastName:De(we,Ce(3)),secondLastName:De(we,Ce(3)),identificationNumber:De(we,Pe),identificationExpiration:De(we,Ee),phone1:De(we,Ae),phone2:Ae,email:De(we,Se),businessName:we,position:we,address:we,city:we,zipCode:De(we,Ie)};const Ne=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block}.step-form{width:100%;max-width:800px;margin:0 auto}.step-form__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #E5E5E5}.step-form__title{font-size:1.75rem;font-weight:700;line-height:1.2;color:#333333}.step-form__btn-back{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-form__btn-back:disabled{opacity:0.5;cursor:not-allowed}.step-form__btn-back{height:48px;background-color:transparent;color:#0097A9;border:2px solid #0097A9}.step-form__btn-back:hover:not(:disabled){background-color:rgba(0, 151, 169, 0.1)}.step-form__btn-back:active:not(:disabled){background-color:rgba(0, 151, 169, 0.2)}.step-form__btn-back{height:40px}.step-form form{border:1px solid #E5E5E5;border-radius:0.75rem;padding:1.5rem;background:white}.step-form__instructions{font-size:0.875rem;font-weight:400;line-height:1.5;color:#666666;margin-bottom:1.5rem;padding:0;background:transparent}.step-form__section{margin-bottom:1.5rem;padding-bottom:0.5rem}.step-form__row{display:grid;grid-template-columns:1fr;gap:1rem;margin-bottom:1rem}@media (min-width: 768px){.step-form__row{grid-template-columns:1fr 1fr}}.step-form__row:last-child{margin-bottom:0}.step-form__field{display:flex;flex-direction:column}@media (min-width: 768px){.step-form__field--id{grid-column:span 1}}.step-form__label{display:block;margin-bottom:0.5rem;font-size:0.875rem;font-weight:500;color:#333333}.step-form__label .required{color:#DA291C}.step-form__required{color:#DA291C;margin-right:0.25rem}.step-form__input{width:100%;height:44px;padding:0 1rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;color:#333333;background-color:#FFFFFF;border:1px solid #CCCCCC;border-radius:0.5rem;transition:border-color 150ms ease, box-shadow 150ms ease}.step-form__input::placeholder{color:#999999}.step-form__input:focus{outline:none;border-color:#0097A9;box-shadow:0 0 0 3px rgba(0, 151, 169, 0.15)}.step-form__input:disabled{background-color:#F5F5F5;cursor:not-allowed}.step-form__input.error{border-color:#DA291C}.step-form__input.error:focus{box-shadow:0 0 0 3px rgba(218, 41, 28, 0.15)}.step-form__input--error{border-color:#DA291C}.step-form__input--error:focus{box-shadow:0 0 0 3px rgba(218, 41, 28, 0.15)}.step-form__error{margin-top:0.25rem;font-size:0.75rem;color:#DA291C}.step-form__id-row{display:flex;flex-direction:column;gap:0.5rem}@media (min-width: 768px){.step-form__id-row{flex-direction:row;align-items:flex-start}}.step-form__id-row .step-form__input{flex:1;margin-top:4px}.step-form__radio-group{display:flex;flex-direction:row;align-items:flex-start;gap:1rem}.step-form__radio-group--horizontal{flex-direction:row;gap:1rem}.step-form__radio{display:flex;align-items:flex-start;gap:0.25rem;font-size:0.875rem;font-weight:400;line-height:1.5;color:#333333;cursor:pointer;max-width:90px;line-height:1.2;margin-top:14px}.step-form__radio input[type=radio]{accent-color:#0097A9;margin-top:2px;flex-shrink:0}.step-form__actions{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #E5E5E5;text-align:center}.step-form__btn-submit{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-form__btn-submit:disabled{opacity:0.5;cursor:not-allowed}.step-form__btn-submit{height:48px;background-color:#DA291C;color:#FFFFFF}.step-form__btn-submit:hover:not(:disabled){background-color:rgb(181.843902439, 34.2, 23.356097561)}.step-form__btn-submit:active:not(:disabled){background-color:rgb(163.7658536585, 30.8, 21.0341463415)}.step-form__btn-submit{min-width:280px;height:44px;padding:0 2rem;border-radius:22px;font-size:1rem}.step-form__btn-submit:disabled{background-color:#999999;border-color:#999999;cursor:not-allowed;opacity:1}.step-form__btn-submit:disabled:hover{background-color:#999999;border-color:#999999}`;const Te=class{constructor(e){a(this,e)}onNext;onBack;formData={personal:{firstName:"",secondName:"",lastName:"",secondLastName:"",identificationType:"license",identificationNumber:"",identificationExpiration:"",phone1:"",phone2:"",email:""},business:{businessName:"",position:""},address:{address:g.location?.address||"",city:g.location?.city||"",zipCode:g.location?.zipCode||""},isExistingCustomer:false};errors={};touched={};handleInput=(e,t)=>a=>{const r=a.target;let o=r.value;if(t==="phone1"||t==="phone2"){o=ge(o)}this.formData={...this.formData,[e]:{...this.formData[e],[t]:o}};this.touched={...this.touched,[t]:true};this.validateField(t,o)};handleRadioChange=(e,t)=>{if(e==="identificationType"){this.formData={...this.formData,personal:{...this.formData.personal,identificationType:t}}}else if(e==="isExistingCustomer"){this.formData={...this.formData,isExistingCustomer:t}}};validateField(e,t){const a=ze[e];if(!a)return{isValid:true,message:""};const r=a(t);if(!r.isValid){this.errors={...this.errors,[e]:r.message}}else{const{[e]:t,...a}=this.errors;this.errors=a}return r}getFieldsToValidate(){return[{field:"firstName",value:this.formData.personal.firstName},{field:"lastName",value:this.formData.personal.lastName},{field:"secondLastName",value:this.formData.personal.secondLastName},{field:"identificationNumber",value:this.formData.personal.identificationNumber},{field:"identificationExpiration",value:this.formData.personal.identificationExpiration},{field:"phone1",value:this.formData.personal.phone1},{field:"email",value:this.formData.personal.email},{field:"businessName",value:this.formData.business.businessName},{field:"position",value:this.formData.business.position},{field:"address",value:this.formData.address.address},{field:"city",value:this.formData.address.city},{field:"zipCode",value:this.formData.address.zipCode}]}isFormValid(){for(const{field:e,value:t}of this.getFieldsToValidate()){const a=ze[e];if(a){const e=a(t);if(!e.isValid){return false}}}return true}validateForm(){const e=this.getFieldsToValidate();let t=true;const a={};for(const{field:r,value:o}of e){const e=this.validateField(r,o);if(!e.isValid){t=false;a[r]=e.message}}this.errors=a;return t}handleSubmit=e=>{e.preventDefault();this.touched={firstName:true,lastName:true,secondLastName:true,identificationNumber:true,identificationExpiration:true,phone1:true,email:true,businessName:true,position:true,address:true,city:true,zipCode:true};if(this.validateForm()){_.setFormData(this.formData);this.onNext?.()}};renderInput(e,t,a,r,i={}){const{type:n="text",placeholder:s="",required:c=false,disabled:l=false}=i;const d=this.touched[t]&&this.errors[t];const p=t==="phone1"||t==="phone2"?be(r):r;return o("div",{class:"step-form__field"},o("label",{class:"step-form__label"},c&&o("span",{class:"step-form__required"},"*"),e,":"),o("input",{type:n,class:{"step-form__input":true,"step-form__input--error":!!d},value:p,placeholder:s,disabled:l,onInput:this.handleInput(a,t)}),d&&o("span",{class:"step-form__error"},this.errors[t]))}render(){return o(i,{key:"0b2f99bd94e1adbf650f44a55db6525c6899cf46"},o("div",{key:"bab002c14860341264211f063160759ab37934d0",class:"step-form"},o("header",{key:"3ff52f43ce12b47c99b459924a7c412c4ae31937",class:"step-form__header"},o("h1",{key:"5415a1edaefe1dbcf6c15b37199381ea3780386d",class:"step-form__title"},"Formulario de solicitud de servicio fijo"),o("button",{key:"a2a97733267d9816f59646e2c49cca3fc1d2a87a",class:"step-form__btn-back",onClick:this.onBack},"Regresar")),o("form",{key:"17f59261ae81fca827a728f72152b1a2e135071c",onSubmit:this.handleSubmit},o("p",{key:"267f119a14581b2201e7a24d3fb0d10295b12206",class:"step-form__instructions"},"Por favor, ingresa la información personal solicitada. Su nombre y apellido deben ser iguales a su identificación de gobierno."),o("div",{key:"324437746373bc40a75c7cc24520ec49bbe2a3fb",class:"step-form__section"},o("div",{key:"510e1e8bca4554f2a8577df839f77bb6433e57b1",class:"step-form__row"},this.renderInput("Nombre","firstName","personal",this.formData.personal.firstName,{placeholder:"Ingrese nombre",required:true}),this.renderInput("Segundo nombre","secondName","personal",this.formData.personal.secondName||"",{placeholder:"Ingrese segundo nombre (Opcional)"})),o("div",{key:"b4ad26b6b1f4b8ccfe0149c5fef93e89e6ebebcf",class:"step-form__row"},this.renderInput("Apellido","lastName","personal",this.formData.personal.lastName,{placeholder:"Ingrese apellido",required:true}),this.renderInput("Segundo apellido","secondLastName","personal",this.formData.personal.secondLastName,{placeholder:"Ingrese segundo apellido",required:true})),o("div",{key:"559571d64825f3d68d41ac65f288dc59ee635759",class:"step-form__row"},o("div",{key:"920720d8ea94f7ce5abe8262a03bc50d83db92bb",class:"step-form__field step-form__field--id"},o("label",{key:"a7b2e8574c96e3c772ba52d997f8054a2d44102a",class:"step-form__label"},o("span",{key:"884b499ce30bfbbf703c204f5d0965bf109caaa2",class:"step-form__required"},"*"),"Identificación:"),o("div",{key:"720f30ea432fd5ef746007154559d61d66217d55",class:"step-form__id-row"},o("div",{key:"684aa154a379c5e4022989f4cf9b77048f50c87c",class:"step-form__radio-group"},o("label",{key:"b30a8b648b875b4b1cea14e3ab5b73260e147b6a",class:"step-form__radio"},o("input",{key:"6faee17560e5d8cb0b376a61a4532a6d4ab74afa",type:"radio",name:"idType",checked:this.formData.personal.identificationType==="license",onChange:()=>this.handleRadioChange("identificationType","license")}),"Licencia de conducir"),o("label",{key:"dfb0c00309925bdab56701e648e4dd402bf527e4",class:"step-form__radio"},o("input",{key:"7a4fbfdbcf1e25b87dcf0f4c18d5d801556da806",type:"radio",name:"idType",checked:this.formData.personal.identificationType==="passport",onChange:()=>this.handleRadioChange("identificationType","passport")}),"Pasaporte")),o("input",{key:"fe262abad7767ca9f677d5c208e026828bbdeb46",type:"text",class:{"step-form__input":true,"step-form__input--error":!!(this.touched["identificationNumber"]&&this.errors["identificationNumber"])},value:this.formData.personal.identificationNumber,placeholder:"Ingrese nro de identificación",onInput:this.handleInput("personal","identificationNumber")})),this.touched["identificationNumber"]&&this.errors["identificationNumber"]&&o("span",{key:"f6cc1b9a9034fbe3868a25d4ba24071005b4fcb2",class:"step-form__error"},this.errors["identificationNumber"])),this.renderInput("Fecha de vencimiento","identificationExpiration","personal",this.formData.personal.identificationExpiration,{type:"date",required:true})),o("div",{key:"9ac276afc5c1a29c8829819475c9d5018baf1055",class:"step-form__row"},this.renderInput("Teléfono de contacto 1","phone1","personal",this.formData.personal.phone1,{type:"tel",placeholder:"Ingrese nro de teléfono",required:true}),this.renderInput("Teléfono de contacto 2","phone2","personal",this.formData.personal.phone2||"",{type:"tel",placeholder:"Ingrese nro de teléfono"}))),o("div",{key:"ae2a5883df29772e1de14b8ea1db1ebda264712d",class:"step-form__section"},o("div",{key:"81820f7fdae07c99fc9de3127fa88856655beac1",class:"step-form__row"},this.renderInput("Nombre legal de Empresa (según IRS)","businessName","business",this.formData.business.businessName,{placeholder:"Ingresar nombre legal de empresa",required:true}),this.renderInput("Posición en la Empresa","position","business",this.formData.business.position,{placeholder:"Ingrese posición actual",required:true}))),o("div",{key:"a3d96e10f02fc2e8badaf1e0055dcd5dfb881287",class:"step-form__section"},o("div",{key:"9d72e0baedfd021596fa0bd4f8a730c566742c6d",class:"step-form__row"},this.renderInput("Dirección","address","address",this.formData.address.address,{placeholder:"Ingrese dirección",required:true}),this.renderInput("Ciudad","city","address",this.formData.address.city,{placeholder:"Ingrese ciudad",required:true})),o("div",{key:"996c0aab4c1c57f4014bfdb30e202342243db058",class:"step-form__row"},this.renderInput("Código postal","zipCode","address",this.formData.address.zipCode,{placeholder:"Ingrese código postal",required:true}),this.renderInput("Correo electrónico","email","personal",this.formData.personal.email,{type:"email",placeholder:"Ingrese correo electrónico",required:true}))),o("div",{key:"8b7aeacdd37fc6b98797b498628ab9d129f10bd6",class:"step-form__section"},o("div",{key:"fde1815a479609bf7ae45bc6b780efa2431e8a1e",class:"step-form__field"},o("label",{key:"faea036119860ca1b8bbaca80986587c7438594a",class:"step-form__label"},o("span",{key:"70c30d45a29a996f153642f778d172d6f5ee0cf0",class:"step-form__required"},"*"),"Cliente existente de Claro PR:"),o("div",{key:"c096231cc8d69b9b0d2c7ed343977f48cc99b810",class:"step-form__radio-group step-form__radio-group--horizontal"},o("label",{key:"c06ddf0911aaf06571cb12135d160768236b82b0",class:"step-form__radio"},o("input",{key:"93242f3fcaf0b45d60d3cf593b6c75ad9a0901a9",type:"radio",name:"existingCustomer",checked:this.formData.isExistingCustomer===true,onChange:()=>this.handleRadioChange("isExistingCustomer",true)}),"Sí"),o("label",{key:"4739e30de1341859773c3f51b47172f49f7597a1",class:"step-form__radio"},o("input",{key:"9dfd6b22495955d9fb4a8b3593df08768cf73b81",type:"radio",name:"existingCustomer",checked:this.formData.isExistingCustomer===false,onChange:()=>this.handleRadioChange("isExistingCustomer",false)}),"No")))),o("div",{key:"2656e64fb81fb912b4176749118b8dc5fcddcae1",class:"step-form__actions"},o("button",{key:"e6156b9570363d80d6e9c6101fe063af41962b8f",type:"submit",class:"step-form__btn-submit",disabled:!this.isFormValid()},"Continuar")))))}};Te.style=Ne();const Oe=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block}.step-location{width:100%;position:relative}.step-location__validating-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255, 255, 255, 0.9);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn 0.2s ease-out}.step-location__validating-content{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:1.5rem;background:#FFFFFF;border-radius:16px;box-shadow:0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)}.step-location__validating-spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#DA291C;border-radius:50%;animation:spin 1s linear infinite}.step-location__validating-text{margin:0;font-size:18px;font-weight:600;color:#333333}.step-location__header{text-align:center;margin-bottom:1rem}.step-location__title{font-size:1.5rem;font-weight:600;line-height:1.35;color:#333333;font-weight:400}.step-location__title--highlight{color:#DA291C;font-weight:700}.step-location__map-container{position:relative;border-radius:0.75rem;overflow:hidden;box-shadow:0 2px 8px rgba(0, 0, 0, 0.08)}.step-location__controls{position:absolute;top:3.5rem;left:120px;right:50px;z-index:1;display:flex;flex-direction:column;gap:0.5rem}@media (min-width: 768px){.step-location__controls{top:3.5rem;left:130px;right:60px}}.step-location__input-group{display:flex;align-items:center;background:#FFFFFF;border-radius:10px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);overflow:hidden;border:1px solid #E5E5E5}.step-location__input-icon{display:flex;align-items:center;justify-content:center;padding-left:0.75rem;color:#999999}.step-location__input-icon svg{width:20px;height:20px}.step-location__input{flex:1;padding:0.75rem 0.75rem;border:none;font-size:0.875rem;outline:none;background:transparent;min-width:0}.step-location__input::placeholder{color:#999999}.step-location__btn-validate{padding:0.75rem 1.25rem;background:#DA291C;color:#FFFFFF;border:none;font-size:0.875rem;font-weight:600;cursor:pointer;transition:background-color 150ms ease;white-space:nowrap;min-width:100px}.step-location__btn-validate:hover:not(:disabled){background:rgb(181.843902439, 34.2, 23.356097561)}.step-location__btn-validate:disabled{opacity:0.6;cursor:not-allowed}.step-location__btn-validate--loading{pointer-events:none}.step-location__btn-validate-content{display:inline-flex;align-items:center;gap:0.5rem}.step-location__btn-spinner{display:inline-block;width:14px;height:14px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:#FFFFFF;border-radius:50%;animation:btn-spin 0.8s linear infinite}@keyframes btn-spin{to{transform:rotate(360deg)}}.step-location__btn-location{display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 0.75rem;background:#0097A9;color:#FFFFFF;border:none;border-radius:0.25rem;font-size:0.75rem;font-weight:500;cursor:pointer;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05);transition:background-color 150ms ease;white-space:nowrap;align-self:flex-start}.step-location__btn-location:hover:not(:disabled){background:rgb(0, 114.5455621302, 128.2)}.step-location__btn-location:disabled{opacity:0.6;cursor:not-allowed}.step-location__btn-location-icon{width:16px;height:16px}.step-location__map{position:relative;width:100%;height:400px;background:#E5E5E5}@media (min-width: 768px){.step-location__map{height:500px}}.step-location__map-canvas{width:100%;height:100%}.step-location__map-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;background:#F5F5F5;color:#666666;z-index:5}.step-location__map-loading p{font-size:1rem;font-weight:400;line-height:1.5;margin-top:1rem}.step-location__map-error{display:flex;flex-direction:column;align-items:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;background:#F5F5F5;color:#666666;z-index:5;padding:1rem;text-align:center}.step-location__map-error p{font-size:1rem;font-weight:400;line-height:1.5;color:#DA291C}.step-location__map-error small{margin-top:0.5rem;font-size:0.75rem}.step-location__spinner{width:40px;height:40px;border:3px solid #CCCCCC;border-top-color:#0097A9;border-radius:50%;animation:spin 1s linear infinite}.step-location__map-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;color:#666666}.step-location__map-placeholder p{font-size:1rem;font-weight:400;line-height:1.5}.step-location__map-placeholder small{margin-top:0.5rem;font-size:0.75rem}.step-location__modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);z-index:400;display:flex;align-items:center;justify-content:center}.step-location__modal{position:relative;width:90%;max-width:400px;background:#FFFFFF;border-radius:0.75rem;padding:2rem 1.5rem;text-align:center;box-shadow:0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)}.step-location__modal--error .step-location__modal-error-bar{display:block}.step-location__modal-close{position:absolute;top:0.75rem;right:0.75rem;width:32px;height:32px;background:transparent;border:none;font-size:1.5rem;color:#666666;cursor:pointer;line-height:1}.step-location__modal-close:hover{color:#333333}.step-location__modal-error-bar{display:none;background:#DA291C;color:#FFFFFF;padding:0.5rem 1rem;margin:-2rem -1.5rem 1rem;font-weight:600}.step-location__modal-success-icon{width:60px;height:60px;margin:0 auto 1rem;color:#44AF69}.step-location__modal-success-icon svg{width:100%;height:100%}.step-location__modal-message{font-size:1rem;font-weight:400;line-height:1.5;color:#333333;margin-bottom:1.5rem}.step-location__modal-btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-location__modal-btn:disabled{opacity:0.5;cursor:not-allowed}.step-location__modal-btn{height:48px;background-color:#0097A9;color:#FFFFFF}.step-location__modal-btn:hover:not(:disabled){background-color:rgb(0, 114.5455621302, 128.2)}.step-location__modal-btn:active:not(:disabled){background-color:rgb(0, 96.3183431953, 107.8)}.step-location__modal-btn{min-width:150px}`;const Me=class{constructor(e){a(this,e)}get el(){return n(this)}googleMapsKey;onNext;onBack;address="";isValidating=false;isLoadingMap=true;isGettingLocation=false;locationData=null;mapError=null;currentCoordinates=null;geocodeResult=null;showErrorModal=false;errorMessage="";mapContainer;addressInput;async componentDidLoad(){await this.initializeMap()}disconnectedCallback(){R.destroy()}async initializeMap(){if(!this.googleMapsKey){this.mapError="Google Maps API key no configurada";this.isLoadingMap=false;return}try{R.setApiKey(this.googleMapsKey);await R.initMap(this.mapContainer);if(this.addressInput){await R.initAutocomplete(this.addressInput,(e=>{this.handlePlaceSelected(e)}))}R.addMapClickListener((async e=>{await this.handleMapClick(e)}));this.isLoadingMap=false}catch(e){console.error("Error initializing map:",e);this.mapError="Error al cargar Google Maps";this.isLoadingMap=false}}handleAddressChange=e=>{this.address=e.target.value};handleKeyPress=e=>{if(e.key==="Enter"||e.code==="Enter"||e.code==="NumpadEnter"){e.preventDefault();this.handleValidate()}};handleMapClick=async e=>{R.clear();const t=await R.reverseGeocode(e);if(t){this.geocodeResult=t;this.address=t.formattedAddress||t.address;this.currentCoordinates=t.coordinates;R.setMarker(t.coordinates)}else{this.currentCoordinates=e;R.setMarker(e)}await this.handleValidate()};handlePlaceSelected=e=>{this.geocodeResult=e;this.address=e.formattedAddress||e.address;this.currentCoordinates=e.coordinates;R.setMarker(e.coordinates);R.centerMap(e.coordinates)};handleValidate=async()=>{if(!this.currentCoordinates&&!this.address.trim()){return}this.isValidating=true;try{let e=this.currentCoordinates;let t=this.geocodeResult?.city||"";let a=this.geocodeResult?.zipCode||"";if(!e&&this.address.trim()){const r=await R.geocodeAddress(this.address);if(r){e=r.coordinates;t=r.city;a=r.zipCode;this.currentCoordinates=e;this.geocodeResult=r;R.setMarker(e);R.centerMap(e)}else{this.errorMessage="No se pudo encontrar la dirección. Por favor, intenta con otra dirección.";this.showErrorModal=true;this.isValidating=false;return}}if(!e){this.errorMessage="Por favor, ingresa una dirección válida.";this.showErrorModal=true;this.isValidating=false;return}const r=await E.checkCoverage(e.lat,e.lng,this.address||this.geocodeResult?.address||"",t,a);this.locationData=r;if(r.isValid){this.showCoverageInfoWindow(r.serviceMessage,true)}else{this.showCoverageInfoWindow(O.NO_COVERAGE,false)}}catch(e){console.error("Coverage validation error:",e);this.errorMessage=O.COVERAGE_ERROR;this.showErrorModal=true}finally{this.isValidating=false}};showCoverageInfoWindow(e,t){const a=`\n      <div class="general-container" style="font-family: 'Open Sans', Arial, sans-serif; width: 100%; box-sizing: border-box;">\n        <div class="info ${t?"infoOn":"infoOff"}" style="\n          padding: ${t?"20px":"15px 20px"};\n          width: 100%;\n          height: auto;\n          box-sizing: border-box;\n          background: ${t?"#1F97AF":"#EE122C"};\n          color: #ffffff;\n          font-size: 14px;\n          line-height: 1.5;\n          white-space: normal;\n        ">\n          ${e}\n        </div>\n        <div class="continue-map" style="\n          width: 100%;\n          height: auto;\n          padding: 20px;\n          font-size: 16px;\n          text-align: center;\n          background: #ffffff;\n          color: #1F97AF;\n          cursor: pointer;\n          box-sizing: border-box;\n        ">\n          ${!t?`\n            <div style="color: #333; margin-bottom: 8px;">\n              Actualmente usted se encuentra fuera del rango de cobertura.\n            </div>\n          `:""}\n          <div\n            id="infowindow-continue-btn"\n            class="no-link continue-button"\n            onclick="if(window.__infoWindowContinueCallback) window.__infoWindowContinueCallback();"\n            style="\n              text-decoration: none;\n              color: #1F97AF;\n              font-size: 16px;\n              cursor: pointer;\n              font-weight: 600;\n            "\n          >\n            ${t?"Continuar":"Cerrar"}\n          </div>\n        </div>\n      </div>\n    `;R.showInfoWindow(a,(()=>{if(t&&this.locationData&&this.locationData.isValid){this.handleInfoWindowContinue()}else{R.closeInfoWindow()}}))}handleInfoWindowContinue=()=>{if(this.locationData&&this.locationData.isValid){R.closeInfoWindow();this.storeLocationInSession(this.locationData);_.setLocation(this.locationData);this.onNext?.()}};storeLocationInSession(e){try{sessionStorage.setItem("latitud",btoa(String(e.latitude)));sessionStorage.setItem("longitud",btoa(String(e.longitude)));if(e.serviceType.toUpperCase()==="CLARO HOGAR"){sessionStorage.removeItem("planCodeInternet");console.log("[StepLocation] CLARO HOGAR detected - planCodeInternet removed")}else{sessionStorage.setItem("planCodeInternet",btoa(e.serviceType));console.log("[StepLocation] Service type stored:",e.serviceType)}sessionStorage.setItem("plan",JSON.stringify({serviceType:e.serviceType,serviceMessage:e.serviceMessage,address:e.address,city:e.city,zipCode:e.zipCode}));console.log("[StepLocation] Location data stored in sessionStorage")}catch(e){console.error("[StepLocation] Error storing location in sessionStorage:",e)}}handleUseCurrentLocation=async()=>{this.isGettingLocation=true;try{const e=await R.getCurrentLocationWithAddress();if(e){this.geocodeResult=e;this.address=e.formattedAddress||e.address;this.currentCoordinates=e.coordinates;R.setMarker(e.coordinates);R.centerMap(e.coordinates);R.setZoom(17)}else{const e=await R.getCurrentLocation();this.currentCoordinates=e;R.setMarker(e);R.centerMap(e);R.setZoom(17)}}catch(e){console.error("Geolocation error:",e);if(e.message.includes("denied")){this.errorMessage=O.GEOLOCATION_DENIED}else if(e.message.includes("unavailable")){this.errorMessage=O.GEOLOCATION_UNAVAILABLE}else{this.errorMessage=O.GEOLOCATION_TIMEOUT}this.showErrorModal=true}finally{this.isGettingLocation=false}};render(){return o(i,{key:"2c8f6a961a85b824e9a85de70ead29a534d4a897"},o("div",{key:"ac1ec34f9bfdb2a7ab540d2cae3e4b67160b4bb3",class:"step-location"},this.isValidating&&o("div",{key:"44197f1334c1616bf16ebea6aaa4ee62d2df829e",class:"step-location__validating-overlay"},o("div",{key:"bedfaea659d06328993affdebef2ca37ace38be4",class:"step-location__validating-content"},o("div",{key:"a25b48d4a9f0794b4e85454265fe1bc6f8508964",class:"step-location__validating-spinner"}),o("p",{key:"1a709e4f309c48a56768884881f38d1288d890ca",class:"step-location__validating-text"},"Validando cobertura..."))),o("header",{key:"2a947717ce26017638f68116480513fecf2c5951",class:"step-location__header"},o("h1",{key:"8a5140fae64e91dfb144fe1404743c45816692c7",class:"step-location__title"},o("span",{key:"8c16e083469cdef3723c9e6c78898da2dfaba1a9",class:"step-location__title--highlight"},"Servicio fijo empresarial")," ","en tu área")),o("div",{key:"472964ddd2d2c172f0548fb063304816f42677e6",class:"step-location__map-container"},o("div",{key:"111c1efc7a8a95135b66af71625cbae8bb564e3d",class:"step-location__controls"},o("div",{key:"f18da275ca833e889c2d91f9cd28f8823d67a746",class:"step-location__input-group"},o("span",{key:"8cd1fb816216a1879b9d9b06835378fac83617ad",class:"step-location__input-icon"},o("svg",{key:"38e3f02c3d1d29c00725f528f9301fcfc990b5c5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{key:"a82af2add5969cd72bf4b3760ce84c2e6f50ae37",d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),o("circle",{key:"9c80df77d6d577d00f0b24a0e43916c5e653e378",cx:"12",cy:"10",r:"3"}))),o("input",{key:"a446b9596a4c3ae4e9f29d88ce9a4bea1b2529c0",type:"text",class:"step-location__input",placeholder:"Ingrese su dirección",value:this.address,onInput:this.handleAddressChange,onKeyPress:this.handleKeyPress,ref:e=>this.addressInput=e}),o("button",{key:"df44398539d6a09f1397c0e01131afa022fb3451",class:{"step-location__btn-validate":true,"step-location__btn-validate--loading":this.isValidating},onClick:this.handleValidate,disabled:this.isValidating||!this.address.trim()&&!this.currentCoordinates},this.isValidating?o("span",{class:"step-location__btn-validate-content"},o("span",{class:"step-location__btn-spinner"}),"Validando..."):"Validar")),o("button",{key:"9be446cda265a74c4be684f77096d769df4e3dcd",class:"step-location__btn-location",onClick:this.handleUseCurrentLocation,disabled:this.isGettingLocation||this.isLoadingMap},o("svg",{key:"d26386c0e5968088b4ce26ee43e6e344edecc159",class:"step-location__btn-location-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("circle",{key:"305ed4421540682debf2166c69a51fd2204139c9",cx:"12",cy:"12",r:"10"}),o("circle",{key:"2098fb87a1c5a7ebd09fff005d281dd368b07415",cx:"12",cy:"12",r:"3"}),o("line",{key:"6e705969a5e5cf5275d757bf459e9fd2647514ac",x1:"12",y1:"2",x2:"12",y2:"6"}),o("line",{key:"0f864276a49d685158eeb462c9068e7aabd69ab3",x1:"12",y1:"18",x2:"12",y2:"22"}),o("line",{key:"d65b42ba47f577d24130316a0b3014e69187fd7b",x1:"2",y1:"12",x2:"6",y2:"12"}),o("line",{key:"dcd3fad6259de3c80eddc8e32ef30dbcff16a615",x1:"18",y1:"12",x2:"22",y2:"12"})),this.isGettingLocation?"Obteniendo ubicación...":"Utilizar Ubicación Actual")),o("div",{key:"95c0fa349a5b7119cae4c0bca80ad966b4bf9c82",class:"step-location__map"},this.isLoadingMap&&!this.mapError&&o("div",{key:"f8821e1c39018185236c98552adc592d49b17365",class:"step-location__map-loading"},o("div",{key:"61d546024598f25914d61d24c4e639e9ff844e16",class:"step-location__spinner"}),o("p",{key:"1e9e8b9f9383cc88deb506d4e714f98600c9b314"},"Cargando mapa...")),this.mapError&&o("div",{key:"933fe3aedd72d139717fab3978df9a4f777d5203",class:"step-location__map-error"},o("p",{key:"863824c972c6ff52c31b9b6c49ac8c7aaf7a893f"},this.mapError),!this.googleMapsKey&&o("small",{key:"c811bd149f780af33606609edcc99fc7c91341a6"},"Configura la prop google-maps-key en el componente")),o("div",{key:"9728b428e75641db9d16b9c450b55edd92b74c6e",class:"step-location__map-canvas",ref:e=>this.mapContainer=e,style:{display:this.mapError?"none":"block"}}))),this.showErrorModal&&o("div",{key:"39957723559961bfdb693886c16e2e2610d7d1d3",class:"step-location__modal-backdrop"},o("div",{key:"8860113883786c78b4d45e9006fca9bb8499e47f",class:"step-location__modal step-location__modal--error"},o("button",{key:"cbf18a9ea4117b97a3e50b26a95f9b0727b272a7",class:"step-location__modal-close",onClick:()=>this.showErrorModal=false},"×"),o("div",{key:"a1cf84a852d23fe278fc1e114311dafac42fb915",class:"step-location__modal-error-bar"},"Error"),o("p",{key:"8cf60d6e9cc5bec9900314838bf660a12927461f",class:"step-location__modal-message"},this.errorMessage),o("button",{key:"1f8588f361058ae98f36d048babc8b16f82bfa5d",class:"step-location__modal-btn",onClick:()=>this.showErrorModal=false},"Cerrar")))))}};Me.style=Oe();const Le=()=>`:host{display:block;width:100%;min-height:100%;background-color:#FAFAFA}.step-order-summary{width:100%;max-width:1200px;margin:0 auto;padding:1.5rem}.header{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.header .btn-back{display:flex;align-items:center;gap:0.25rem;background:none;border:none;color:#0097A9;font-size:0.875rem;cursor:pointer;padding:0.25rem;transition:color 0.2s}.header .btn-back svg{width:20px;height:20px}.header .btn-back:hover{color:rgb(0, 105.4319526627, 118);text-decoration:underline}.header__title-group{display:flex;align-items:center;gap:1rem;flex:1}.header .title{font-size:1.75rem;font-weight:700;color:#1A1A1A;margin:0}.header .item-count{font-size:0.875rem;color:#666666;background:#E5E5E5;padding:0.25rem 0.5rem;border-radius:9999px;font-weight:500}.state-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center;background:white;border-radius:0.75rem;padding:2rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05)}.state-container .state-icon{width:80px;height:80px;color:#999999;margin-bottom:1rem}.state-container h3{font-size:1.5rem;color:#4D4D4D;margin:0 0 0.5rem 0}.state-container p{color:#808080;margin:0 0 1.5rem 0}.state-container--error .state-icon{color:#DA291C}.state-container--error p{color:#DA291C}.state-container--empty .state-icon{color:#CCCCCC}.spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#DA291C;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem}.spinner-small{display:inline-block;width:16px;height:16px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:currentColor;border-radius:50%;animation:spin 0.8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.btn-retry,.btn-back-catalog{background:#DA291C;color:white;border:none;padding:0.5rem 1.5rem;border-radius:9999px;cursor:pointer;font-weight:600;transition:background 0.2s}.btn-retry:hover,.btn-back-catalog:hover{background:rgb(172.8048780488, 32.5, 22.1951219512)}.btn-back-catalog{background:#0097A9}.btn-back-catalog:hover{background:rgb(0, 105.4319526627, 118)}.content-layout{display:grid;grid-template-columns:1fr 380px;gap:1.5rem}@media (max-width: 992px){.content-layout{grid-template-columns:1fr}}.products-column{display:flex;flex-direction:column;gap:1rem}.summary-column{display:flex;flex-direction:column;gap:1rem}@media (max-width: 992px){.summary-column{order:-1}}.product-card{background:white;border-radius:0.75rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05);overflow:hidden}.product-card__badge{display:flex;gap:0.25rem;padding:0.5rem 1rem;background:#FAFAFA;border-bottom:1px solid #F5F5F5}.product-card__main{display:grid;grid-template-columns:100px 1fr auto auto;gap:1rem;padding:1rem;align-items:center}@media (max-width: 768px){.product-card__main{grid-template-columns:80px 1fr auto;grid-template-rows:auto auto}}.product-card__main--plan{grid-template-columns:60px 1fr auto auto}@media (max-width: 768px){.product-card__main--plan{grid-template-columns:60px 1fr auto}}.product-card__image{width:100px;height:100px;background:#FAFAFA;border-radius:0.5rem;display:flex;align-items:center;justify-content:center;overflow:hidden}@media (max-width: 768px){.product-card__image{width:80px;height:80px}}.product-card__image img{max-width:90%;max-height:90%;object-fit:contain}.product-card__image--plan{width:60px;height:60px;background:linear-gradient(135deg, #DA291C 0%, rgb(150.2073170732, 28.25, 19.2926829268) 100%);border-radius:0.5rem}.product-card__image--plan img{filter:brightness(0) invert(1);width:40px;height:40px}.product-card__details{display:flex;flex-direction:column;gap:0.25rem}.product-card__pricing{display:flex;flex-direction:column;align-items:flex-end;gap:0.25rem}@media (max-width: 768px){.product-card__pricing{grid-column:2/-1;flex-direction:row;justify-content:space-between;align-items:center;width:100%}}.product-card__actions{display:flex;align-items:center}.product-card--plan .product-card__main{grid-template-columns:60px 1fr auto auto}.section-header{display:flex;align-items:center;gap:0.5rem;padding:1rem 1.5rem;border-bottom:1px solid #F5F5F5}.section-header__icon{width:36px;height:36px;border-radius:0.5rem;display:flex;align-items:center;justify-content:center}.section-header__icon svg{width:20px;height:20px}.section-header__text{display:flex;align-items:center;gap:0.5rem;flex:1}.section-header__label{font-size:0.875rem;font-weight:700;letter-spacing:0.5px}.section-header__badge{font-size:0.75rem;font-weight:600;padding:2px 0.5rem;border-radius:9999px;text-transform:uppercase;letter-spacing:0.5px}.section-header--equipment{background:linear-gradient(135deg, rgba(0, 151, 169, 0.08) 0%, rgba(0, 151, 169, 0.02) 100%);border-left:4px solid #0097A9}.section-header--equipment .section-header__icon{background:#0097A9;color:white}.section-header--equipment .section-header__label{color:#0097A9}.section-header--equipment .section-header__badge{background:rgba(218, 41, 28, 0.15);color:#DA291C}.section-header--plan{background:linear-gradient(135deg, rgba(218, 41, 28, 0.08) 0%, rgba(218, 41, 28, 0.02) 100%);border-left:4px solid #DA291C}.section-header--plan .section-header__icon{background:#DA291C;color:white}.section-header--plan .section-header__label{color:#DA291C}.badge{display:inline-flex;align-items:center;padding:2px 0.5rem;border-radius:9999px;font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}.badge--equipment{background:rgba(0, 151, 169, 0.15);color:#0097A9}.badge--main{background:rgba(218, 41, 28, 0.15);color:#DA291C}.badge--plan{background:rgba(68, 175, 105, 0.15);color:#44AF69}.product-name{font-size:1rem;font-weight:600;color:#1A1A1A;margin:0;line-height:1.3}.product-specs{display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center}.spec-item{display:flex;align-items:center;gap:4px}.spec-label{font-size:0.875rem;color:#666666}.plan-type{font-size:0.875rem;color:#808080}.financing-info{display:flex;flex-direction:column;gap:2px;margin-top:0.25rem;padding-top:0.25rem;border-top:1px dashed #E5E5E5}.financing-label{font-size:0.75rem;font-weight:600;color:#4D4D4D}.financing-detail{font-size:0.75rem;color:#808080}.color-circle{display:inline-block;width:16px;height:16px;border-radius:50%;border:2px solid #E5E5E5;box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1)}.storage-badge{display:inline-flex;align-items:center;padding:2px 0.25rem;background:#F5F5F5;border-radius:0.25rem;font-size:0.75rem;font-weight:600;color:#4D4D4D}.qty-label{font-size:0.875rem;color:#808080}.price-financing,.price-single{text-align:right}@media (max-width: 768px){.price-financing,.price-single{text-align:left}}.price-monthly{font-size:1.25rem;font-weight:700;color:#DA291C}.price-period{font-size:0.875rem;color:#808080}.price-installments{display:block;font-size:0.75rem;color:#808080;margin-top:2px}.price-total{font-size:1.25rem;font-weight:700;color:#1A1A1A}.price-full{display:flex;gap:0.25rem;font-size:0.875rem}.price-full .label{color:#808080}.price-full .value{font-weight:600;color:#4D4D4D}.btn-action{background:none;border:none;cursor:pointer;padding:0.25rem;transition:all 0.2s;display:flex;align-items:center;justify-content:center}.btn-action svg{width:20px;height:20px}.btn-action--delete{color:#999999;border-radius:0.5rem}.btn-action--delete:hover:not(:disabled){color:#DA291C;background:rgba(218, 41, 28, 0.1)}.btn-action--delete:disabled{opacity:0.5;cursor:not-allowed}.btn-action--delete-small{color:#999999}.btn-action--delete-small svg{width:16px;height:16px}.btn-action--delete-small:hover:not(:disabled){color:#DA291C}.btn-action--delete-small:disabled{opacity:0.5;cursor:not-allowed}.plan-section{border-top:none}.plan-section .section-header--plan{margin:0;border-radius:0;border-left-width:0;padding-left:calc(1.5rem + 4px);border-top:1px dashed #E5E5E5}.plan-section__content{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;background:linear-gradient(to right, rgba(218, 41, 28, 0.03), white)}.plan-section .plan-label{font-size:0.75rem;color:#808080;text-transform:uppercase;letter-spacing:0.5px;font-weight:600}.plan-section .plan-info{flex:1;display:flex;flex-direction:column;gap:2px}.plan-section .plan-name{font-size:0.875rem;font-weight:600;color:#333333}.plan-section .plan-type{font-size:0.75rem;color:#808080}.plan-section .plan-price{display:flex;align-items:baseline;gap:2px}.plan-section .plan-price .price{font-size:1.25rem;font-weight:700;color:#DA291C}.plan-section .plan-price .period{font-size:0.875rem;color:#808080}.summary-card{background:white;border-radius:0.75rem;padding:1.5rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05)}.summary-card__title{display:flex;align-items:center;gap:0.5rem;font-size:0.875rem;font-weight:600;color:#4D4D4D;margin:0 0 1rem 0;text-transform:uppercase;letter-spacing:0.5px}.summary-card__title svg{width:18px;height:18px;color:#999999}.promo-section .promo-input-group{display:flex;gap:0.5rem}.promo-section .promo-input{flex:1;height:44px;border:1px solid #CCCCCC;border-radius:0.5rem;padding:0 1rem;font-size:0.875rem;transition:border-color 0.2s}.promo-section .promo-input:focus{outline:none;border-color:#0097A9}.promo-section .promo-input.error{border-color:#DA291C}.promo-section .promo-input.success{border-color:#44AF69}.promo-section .promo-input:disabled{background:#F5F5F5;cursor:not-allowed}.promo-section .promo-button{height:44px;padding:0 1.5rem;background:#E5E5E5;color:#4D4D4D;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap;min-width:90px;display:flex;align-items:center;justify-content:center}.promo-section .promo-button:hover:not(:disabled){background:#CCCCCC}.promo-section .promo-button:disabled{opacity:0.5;cursor:not-allowed}.promo-section .promo-message{display:flex;align-items:center;gap:0.25rem;font-size:0.875rem;margin-top:0.5rem}.promo-section .promo-message svg{width:14px;height:14px;flex-shrink:0}.promo-section .promo-message.error{color:#DA291C}.promo-section .promo-message.success{color:#44AF69}.payment-summary{padding:0;overflow:hidden}.rent-section{background:linear-gradient(135deg, #DA291C 0%, rgb(172.8048780488, 32.5, 22.1951219512) 100%);padding:1.5rem;color:white}.rent-section .rent-row{display:flex;justify-content:space-between;align-items:center}.rent-section .rent-label{font-size:1rem;font-weight:500}.rent-section .rent-value{font-size:1.75rem;font-weight:700}.rent-section .rent-note{font-size:0.75rem;opacity:0.8;margin:0.25rem 0 0 0}.payment-breakdown{padding:1.5rem}.payment-breakdown .detail-rows{margin-bottom:1rem}.detail-row{display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0;border-bottom:1px solid #F5F5F5}.detail-row:last-child{border-bottom:none}.detail-row .label{font-size:0.875rem;color:#666666}.detail-row .value{font-size:0.875rem;font-weight:500;color:#1A1A1A}.detail-row .value--free{color:#44AF69;font-weight:700;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.5px}.detail-row--discount .label{color:#44AF69}.detail-row--discount .value{color:#44AF69;font-weight:600}.detail-row--shipping{background:rgba(68, 175, 105, 0.05);margin:0 -1.5rem;padding:0.5rem 1.5rem;border-bottom:none}.total-section{background:#FAFAFA;margin:0 -1.5rem -1.5rem;padding:1.5rem;border-top:2px solid #E5E5E5}.total-row{display:flex;justify-content:space-between;align-items:center}.total-label{font-size:1rem;font-weight:600;color:#1A1A1A}.total-value{font-size:1.75rem;font-weight:700;color:#DA291C}.terms-section{background:white;border-radius:0.75rem;padding:1rem 1.5rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05)}.terms-checkbox{display:flex;align-items:flex-start;gap:0.5rem;cursor:pointer}.terms-checkbox input[type=checkbox]{display:none}.terms-checkbox .checkmark{width:22px;height:22px;border:2px solid #CCCCCC;border-radius:0.25rem;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all 0.2s;background:white}.terms-checkbox .checkmark svg{width:14px;height:14px;stroke:white;opacity:0;transition:opacity 0.2s}.terms-checkbox input[type=checkbox]:checked+.checkmark{background:#0097A9;border-color:#0097A9}.terms-checkbox input[type=checkbox]:checked+.checkmark svg{opacity:1}.terms-checkbox .terms-text{font-size:0.875rem;color:#666666;line-height:1.5}.terms-checkbox .terms-text a{color:#0097A9;text-decoration:none;font-weight:500}.terms-checkbox .terms-text a:hover{text-decoration:underline}.btn-proceed{display:flex;align-items:center;justify-content:center;gap:0.5rem;width:100%;height:56px;background:#DA291C;color:white;border:none;border-radius:9999px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s;box-shadow:0 4px 12px rgba(218, 41, 28, 0.3)}.btn-proceed svg{width:20px;height:20px;transition:transform 0.2s}.btn-proceed:hover:not(:disabled){background:rgb(172.8048780488, 32.5, 22.1951219512);box-shadow:0 6px 16px rgba(218, 41, 28, 0.4)}.btn-proceed:hover:not(:disabled) svg{transform:translateX(4px)}.btn-proceed:disabled,.btn-proceed.disabled{background:#CCCCCC;box-shadow:none;cursor:not-allowed}.btn-proceed:disabled svg,.btn-proceed.disabled svg{transform:none}`;const Re=class{constructor(e){a(this,e)}onNext;onBack;cart=null;isLoading=true;error=null;promoCode="";isApplyingPromo=false;promoError=null;promoSuccess=false;termsAccepted=false;deletingItemId=null;componentWillLoad(){this.loadCart()}async loadCart(){this.isLoading=true;this.error=null;try{const e=await G.getCart();if(e.hasError){this.error=e.message||"Error al cargar el carrito";return}this.cart=e;console.log("[StepOrderSummary] Cart loaded:",this.cart);console.log("[StepOrderSummary] Products:",this.cart.products?.map((e=>({cartId:e.cartId,name:e.productName,equipment:e.equipment,home:e.home,plan:e.plan,parentCartId:e.parentCartId,installments:e.installments,price:e.decPrice}))))}catch(e){console.error("[StepOrderSummary] Error:",e);this.error="Error de conexión al cargar el carrito"}finally{this.isLoading=false}}handlePromoCodeChange=e=>{this.promoCode=e.target.value.toUpperCase();this.promoError=null;this.promoSuccess=false};handleApplyPromo=async()=>{if(!this.promoCode.trim()){this.promoError="Ingresa un código promocional";return}this.isApplyingPromo=true;this.promoError=null;this.promoSuccess=false;try{G.storeDiscountCoupon(this.promoCode);const e=await G.getCart(this.promoCode);if(e.hasError){this.promoError="Código promocional inválido";G.clearDiscountCoupon();return}this.cart=e;this.promoSuccess=true;console.log("[StepOrderSummary] Promo applied successfully")}catch(e){console.error("[StepOrderSummary] Promo error:",e);this.promoError="Error al aplicar el código";G.clearDiscountCoupon()}finally{this.isApplyingPromo=false}};handleRemoveItem=async e=>{this.deletingItemId=e.cartId;try{const t=await G.deleteItem(e.cartId,e.productId);if(t.hasError){console.error("[StepOrderSummary] Delete error:",t.message);return}await this.loadCart()}catch(e){console.error("[StepOrderSummary] Error removing item:",e)}finally{this.deletingItemId=null}};handleTermsChange=e=>{this.termsAccepted=e.target.checked};handleProceed=()=>{if(!this.termsAccepted){return}this.onNext?.()};formatPrice(e){return`$${(e||0).toFixed(2)}`}getItemCount(){return this.cart?.products?.reduce(((e,t)=>e+t.qty),0)||0}getEquipmentItems(){if(!this.cart?.products)return[];console.log("[StepOrderSummary] Classifying products...");return this.cart.products.filter((e=>{console.log("[StepOrderSummary] Item:",e.productName,{catalogName:e.catalogName,equipment:e.equipment,home:e.home,plan:e.plan,parentCartId:e.parentCartId,installments:e.installments});if(e.catalogName==="Catalogo de Planes Fijos"){console.log("[StepOrderSummary] -> PLAN (catalogName: Catalogo de Planes Fijos)");return false}if(e.plan){console.log("[StepOrderSummary] -> PLAN (explicit plan flag)");return false}if(e.parentCartId&&e.parentCartId>0){console.log("[StepOrderSummary] -> PLAN (has parentCartId)");return false}if(e.home&&e.internet){console.log("[StepOrderSummary] -> PLAN (home + internet flags)");return false}if(e.home&&e.installments>0){console.log("[StepOrderSummary] -> EQUIPMENT (home with installments)");return true}if(e.home&&(!e.installments||e.installments===0)){console.log("[StepOrderSummary] -> PLAN (home without installments = monthly plan)");return false}if(e.equipment||e.accesory){console.log("[StepOrderSummary] -> EQUIPMENT");return true}console.log("[StepOrderSummary] -> UNKNOWN (not classified)");return false}))}getPlanItems(){if(!this.cart?.products)return[];return this.cart.products.filter((e=>{if(e.catalogName==="Catalogo de Planes Fijos")return true;if(e.plan)return true;if(e.parentCartId&&e.parentCartId>0)return true;if(e.home&&e.internet)return true;if(e.home&&(!e.installments||e.installments===0))return true;return false}))}renderEquipmentItem(e,t){const a=this.deletingItemId===e.cartId;const r=this.getPlanItems().find((t=>t.parentCartId===e.cartId));return o("div",{class:"product-card",key:`equip-${e.cartId}`},o("div",{class:"section-header section-header--equipment"},o("div",{class:"section-header__icon"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),o("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"}))),o("div",{class:"section-header__text"},o("span",{class:"section-header__label"},"EQUIPO"),t===0&&o("span",{class:"section-header__badge"},"Principal"))),o("div",{class:"product-card__main"},o("div",{class:"product-card__image"},o("img",{src:e.imgUrl||e.detailImage||"/assets/placeholder.png",alt:e.productName,onError:e=>e.target.src="/assets/placeholder.png"})),o("div",{class:"product-card__details"},o("h3",{class:"product-name"},e.productName),o("div",{class:"product-specs"},e.colorName&&o("div",{class:"spec-item"},o("span",{class:"color-circle",style:{backgroundColor:e.webColor||"#ccc"}}),o("span",{class:"spec-label"},e.colorName)),e.storageName&&e.storage&&o("div",{class:"spec-item"},o("span",{class:"storage-badge"},e.storage,"GB")),o("div",{class:"spec-item"},o("span",{class:"qty-label"},"Cant: ",e.qty))),e.installments>1&&o("div",{class:"financing-info"},o("span",{class:"financing-label"},"Financiamiento de Equipo:"),o("span",{class:"financing-detail"},"Término de pago (",e.installments," meses)"))),o("div",{class:"product-card__pricing"},e.installments>1?o("div",{class:"price-financing"},o("span",{class:"price-monthly"},this.formatPrice(e.decTotalPerMonth||e.decPrice)),o("span",{class:"price-period"},"/mes")):o("div",{class:"price-single"},o("span",{class:"price-total"},this.formatPrice(e.decTotalPrice||e.decPrice)))),o("div",{class:"product-card__actions"},o("button",{class:"btn-action btn-action--delete",onClick:()=>this.handleRemoveItem(e),disabled:a,title:"Eliminar"},a?o("span",{class:"spinner-small"}):o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),o("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),o("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))))),r&&this.renderAssociatedPlan(r))}renderAssociatedPlan(e){const t=this.deletingItemId===e.cartId;return o("div",{class:"plan-section"},o("div",{class:"section-header section-header--plan"},o("div",{class:"section-header__icon"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}))),o("div",{class:"section-header__text"},o("span",{class:"section-header__label"},"TU PLAN"))),o("div",{class:"plan-section__content"},o("div",{class:"plan-info"},o("span",{class:"plan-name"},e.productName),o("span",{class:"plan-type"},"Plan de Internet")),o("div",{class:"plan-price"},o("span",{class:"price"},this.formatPrice(e.decPrice||e.decTotalPerMonth)),o("span",{class:"period"},"/mes")),o("button",{class:"btn-action btn-action--delete-small",onClick:()=>this.handleRemoveItem(e),disabled:t,title:"Eliminar plan"},t?o("span",{class:"spinner-small"}):o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})))))}renderStandalonePlan(e){const t=this.deletingItemId===e.cartId;return o("div",{class:"product-card product-card--plan",key:`plan-${e.cartId}`},o("div",{class:"section-header section-header--plan"},o("div",{class:"section-header__icon"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}))),o("div",{class:"section-header__text"},o("span",{class:"section-header__label"},"PLAN DE INTERNET"))),o("div",{class:"product-card__main product-card__main--plan"},o("div",{class:"product-card__image product-card__image--plan"},o("img",{src:e.imgUrl||e.detailImage||"/assets/placeholder.png",alt:e.productName,onError:e=>e.target.src="/assets/placeholder.png"})),o("div",{class:"product-card__details"},o("h3",{class:"product-name"},e.productName),o("span",{class:"plan-type"},"Renta mensual")),o("div",{class:"product-card__pricing"},o("div",{class:"price-financing"},o("span",{class:"price-monthly"},this.formatPrice(e.decPrice||e.decTotalPerMonth)),o("span",{class:"price-period"},"/mes"))),o("div",{class:"product-card__actions"},o("button",{class:"btn-action btn-action--delete",onClick:()=>this.handleRemoveItem(e),disabled:t,title:"Eliminar"},t?o("span",{class:"spinner-small"}):o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}))))))}renderPromoCode(){return o("div",{class:"summary-card promo-section"},o("h4",{class:"summary-card__title"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),o("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})),"Cupón de descuento"),o("div",{class:"promo-input-group"},o("input",{type:"text",class:{"promo-input":true,error:!!this.promoError,success:this.promoSuccess},placeholder:"Ingresa tu código",value:this.promoCode,onInput:this.handlePromoCodeChange,disabled:this.isApplyingPromo}),o("button",{class:"promo-button",onClick:this.handleApplyPromo,disabled:this.isApplyingPromo||!this.promoCode.trim()},this.isApplyingPromo?o("span",{class:"spinner-small"}):"Aplicar")),this.promoError&&o("span",{class:"promo-message error"},o("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14"},o("circle",{cx:"12",cy:"12",r:"10"}),o("line",{x1:"12",y1:"8",x2:"12",y2:"12",stroke:"white","stroke-width":"2"}),o("line",{x1:"12",y1:"16",x2:"12.01",y2:"16",stroke:"white","stroke-width":"2"})),this.promoError),this.promoSuccess&&o("span",{class:"promo-message success"},o("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14"},o("circle",{cx:"12",cy:"12",r:"10"}),o("polyline",{points:"9 12 11 14 15 10",fill:"none",stroke:"white","stroke-width":"2"})),"¡Cupón aplicado!"))}renderPaymentSummary(){if(!this.cart)return null;const e=this.cart.subTotalPerMonth||0;const t=this.cart.subTotalPrice||0;const a=this.cart.totalTax||0;const r=this.cart.totalPrice||0;const i=this.cart.totalDownPayment||0;const n=0;return o("div",{class:"summary-card payment-summary"},e>0&&o("div",{class:"rent-section"},o("div",{class:"rent-row"},o("span",{class:"rent-label"},"Renta mensual"),o("span",{class:"rent-value"},this.formatPrice(e))),o("p",{class:"rent-note"},"*No incluye cargos estatales y federales")),o("div",{class:"payment-breakdown"},o("h4",{class:"summary-card__title"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),o("line",{x1:"1",y1:"10",x2:"23",y2:"10"})),"Detalle del pago"),o("div",{class:"detail-rows"},t>0&&o("div",{class:"detail-row"},o("span",{class:"label"},"Subtotal equipos"),o("span",{class:"value"},this.formatPrice(t))),i>0&&o("div",{class:"detail-row"},o("span",{class:"label"},"Pago inicial"),o("span",{class:"value"},this.formatPrice(i))),n>0,o("div",{class:"detail-row"},o("span",{class:"label"},"Cargos estatales y federales"),o("span",{class:"value"},this.formatPrice(a))),o("div",{class:"detail-row detail-row--shipping"},o("span",{class:"label"},"Costo de envío"),o("span",{class:"value value--free"},"GRATIS"))),o("div",{class:"total-section"},o("div",{class:"total-row"},o("span",{class:"total-label"},"Paga hoy"),o("span",{class:"total-value"},this.formatPrice(r))))))}renderTermsCheckbox(){return o("div",{class:"terms-section"},o("label",{class:"terms-checkbox"},o("input",{type:"checkbox",checked:this.termsAccepted,onChange:this.handleTermsChange}),o("span",{class:"checkmark"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},o("polyline",{points:"20 6 9 17 4 12"}))),o("span",{class:"terms-text"},"Acepto los ",o("a",{href:"#",onClick:e=>e.preventDefault()},"términos y condiciones")," de Claro Puerto Rico")))}render(){const e=this.getItemCount();const t=e>0;const a=t&&this.termsAccepted;const r=this.getEquipmentItems();const n=this.getPlanItems().filter((e=>!e.parentCartId));return o(i,{key:"a90ce12970a97524223087434a6b77d85ce634c8"},o("div",{key:"b727124f7f3252d24575970bf911b1c9e637effe",class:"step-order-summary"},o("header",{key:"602f59b8270ceb018e0a400c6986a65a88865e4a",class:"header"},o("button",{key:"1c83f3ba699283a86334c3ed149539c13807ded4",class:"btn-back",onClick:this.onBack},o("svg",{key:"9bf02da90358f3e3d68cc01225ab400602a2eb1e",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{key:"b0dcba4a227a811ac8e69b3e90d467b25a9ebc82",d:"M19 12H5M12 19l-7-7 7-7"})),o("span",{key:"438a01d513f5c8415083ec432f61b8b8d2e8a743"},"Regresar")),o("div",{key:"04355f7b5b9d42dde8e7f19d2c5a5ea108d3e009",class:"header__title-group"},o("h1",{key:"f8ec57bf3420be3e30064dc4be1e50a7c7360b91",class:"title"},"Resumen de tu orden"),t&&o("span",{key:"29872cb74bbc89d6846de91ebdb118d8d0a061ce",class:"item-count"},e," ",e===1?"artículo":"artículos"))),this.isLoading&&o("div",{key:"40566bb773821ee0d3e3682ac9029de8e05c37ad",class:"state-container"},o("div",{key:"975992d517381260b50022f05d4075ee20677bff",class:"spinner"}),o("p",{key:"84e7dbb0f25a1772554e9d4312bef5112ebe110f"},"Cargando tu carrito...")),this.error&&!this.isLoading&&o("div",{key:"79e8bc44213cbca07a6faae8b3e7260e9018775e",class:"state-container state-container--error"},o("svg",{key:"6c8cc2fc074098a61691b467a45000fae3ab1993",class:"state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},o("circle",{key:"2284e1c63dc9ccb41899e5d4989c229f95d87575",cx:"12",cy:"12",r:"10"}),o("line",{key:"90ecdc71a197f7fd479f2c6993fbf5ff5b725472",x1:"12",y1:"8",x2:"12",y2:"12"}),o("line",{key:"efb1f329a57bc1ee273de85b2648e9e8f0457a21",x1:"12",y1:"16",x2:"12.01",y2:"16"})),o("p",{key:"1b4cb065642cac4b33730c900536f81a4ffd0e81"},this.error),o("button",{key:"1959a6acd158821b58fca0dfacc3df3415188df2",class:"btn-retry",onClick:()=>this.loadCart()},"Reintentar")),!this.isLoading&&!this.error&&!t&&o("div",{key:"b3cf27058be42bbf42e5d266e095d10412363de1",class:"state-container state-container--empty"},o("svg",{key:"d68a2a215f90a5544922281f9ecd348f062dd114",class:"state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},o("circle",{key:"2e77b8310660f7785f5fb1b8a78ec73157396121",cx:"9",cy:"21",r:"1"}),o("circle",{key:"2e3cbed8df1799c9610611a8e4adabdaabace295",cx:"20",cy:"21",r:"1"}),o("path",{key:"62dff73663a07aa5f867eda99835ae9ead1431e4",d:"M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"})),o("h3",{key:"1b728e21a6ecb2191cba302373d9c38820b4ec3f"},"Tu carrito está vacío"),o("p",{key:"4eb1d9492e9bd775e852784efe203a059e521dc8"},"Agrega productos para continuar con tu compra"),o("button",{key:"f6cbdf76e1db89141c2c711df1d102d38343319f",class:"btn-back-catalog",onClick:this.onBack},"Ir al catálogo")),!this.isLoading&&!this.error&&t&&o("div",{key:"0d28ec3b275b76e938079602243f18bddc7e99ba",class:"content-layout"},o("div",{key:"71b346dc3a421614691702e2b4155d4ce5fb0817",class:"products-column"},r.map(((e,t)=>this.renderEquipmentItem(e,t))),n.map((e=>this.renderStandalonePlan(e)))),o("div",{key:"ed74aaf2ae1667a9de77c39cb59c862fa50bf74f",class:"summary-column"},this.renderPromoCode(),this.renderPaymentSummary(),this.renderTermsCheckbox(),o("button",{key:"34e19e459da25d0e23506f9ee797c7638bbc7fe6",class:{"btn-proceed":true,disabled:!a},onClick:this.handleProceed,disabled:!a},o("span",{key:"afb6046899d156a13607a613c460ae6426acd49b"},"Procesar orden"),o("svg",{key:"120807274eb2f466743270e6dd2099f32c140e5d",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{key:"6a784ebb04afa593f1ab8b5825c1d4421cb1face",d:"M5 12h14M12 5l7 7-7 7"})))))))}};Re.style=Le();const Be=()=>`:host{display:block;width:100%;min-height:100%;background-color:#FAFAFA}.step-payment{width:100%;max-width:800px;margin:0 auto;padding:1.5rem;min-height:100vh}.header{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.header .btn-back-nav{display:flex;align-items:center;gap:0.25rem;background:none;border:none;color:#0097A9;font-size:0.875rem;cursor:pointer;padding:0.25rem}.header .btn-back-nav svg{width:20px;height:20px}.header .btn-back-nav:hover{text-decoration:underline}.header .title{font-size:1.75rem;font-weight:700;color:#1A1A1A;margin:0;flex:1}.content{background:white;border-radius:0.75rem;padding:1.5rem;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);min-height:400px}.loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;text-align:center;padding:2rem}.loading-container h3{font-size:1.5rem;color:#1A1A1A;margin:1rem 0 0.5rem 0}.loading-container p{color:#666666;margin:0 0 0.5rem 0}.loading-container .warning{color:#DA291C;font-weight:500;font-size:0.875rem}.spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#DA291C;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.payment-container{display:flex;flex-direction:column;gap:1.5rem}.payment-summary{background:#FAFAFA;border-radius:0.5rem;padding:1rem}.payment-summary h3{font-size:1rem;font-weight:600;color:#1A1A1A;margin:0 0 1rem 0}.amount-display{display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0;border-bottom:1px solid #E5E5E5}.amount-display .label{font-size:1rem;color:#666666}.amount-display .value{font-size:1.5rem;font-weight:700;color:#DA291C}.payment-items{margin-top:1rem}.payment-items .payment-item{display:flex;justify-content:space-between;align-items:center;padding:0.25rem 0;font-size:0.875rem}.payment-items .payment-item .item-type{color:#666666}.payment-items .payment-item .item-amount{color:#1A1A1A;font-weight:500}.iframe-container{border:1px solid #E5E5E5;border-radius:0.5rem;overflow:hidden;min-height:400px}.iframe-container iframe{display:block;border:none;width:100%}.iframe-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;background:#FAFAFA}.iframe-placeholder p{color:#666666;margin-top:1rem}.success-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;text-align:center;padding:2rem}.success-container .success-icon{width:80px;height:80px;background:rgb(209.6296296296, 237.3703703704, 219.2222222222);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.success-container .success-icon svg{width:48px;height:48px;color:#44AF69}.success-container h3{font-size:1.5rem;color:#44AF69;margin:0 0 0.5rem 0}.success-container p{color:#666666;margin:0 0 0.5rem 0}.success-container .redirect-note{font-size:0.875rem;color:#808080}.error-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;text-align:center;padding:2rem}.error-container .error-icon{width:80px;height:80px;background:rgb(245.2682926829, 183.75, 179.2317073171);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.error-container .error-icon svg{width:48px;height:48px;color:#DA291C}.error-container h3{font-size:1.5rem;color:#DA291C;margin:0 0 0.5rem 0}.error-container p{color:#666666;margin:0 0 1.5rem 0;max-width:400px}.error-actions{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center}.btn-retry{height:44px;padding:0 1.5rem;background:#DA291C;color:white;border:none;border-radius:9999px;font-size:1rem;font-weight:600;cursor:pointer;transition:background 0.2s}.btn-retry:hover{background:rgb(172.8048780488, 32.5, 22.1951219512)}.btn-back{height:44px;padding:0 1.5rem;background:white;color:#4D4D4D;border:1px solid #CCCCCC;border-radius:9999px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s}.btn-back:hover{background:#FAFAFA;border-color:#999999}.btn-cancel{align-self:center;height:44px;padding:0 1.5rem;background:white;color:#666666;border:1px solid #CCCCCC;border-radius:9999px;font-size:0.875rem;cursor:pointer;transition:all 0.2s}.btn-cancel:hover{background:#FAFAFA;border-color:#999999}`;const je=class{constructor(e){a(this,e)}get el(){return n(this)}onNext;onBack;paymentIframeUrl;screen="loading";error=null;cart=null;orderBan="";totalAmount=0;paymentItems=[];iframeUrl="";iframeHeight="500px";paymentResult=null;userName="";userLastName="";userEmail="";componentWillLoad(){this.loadCartAndPreparePayment()}componentDidLoad(){window.addEventListener("message",this.handleIframeMessage)}disconnectedCallback(){window.removeEventListener("message",this.handleIframeMessage)}async loadCartAndPreparePayment(){this.screen="loading";this.error=null;try{const e=await G.getCart();if(e.hasError){this.error=e.message||"Error al cargar el carrito";this.screen="error";return}if(!e.products||e.products.length===0){this.error="El carrito está vacío";this.screen="error";return}this.cart=e;this.paymentItems=oe.buildPaymentItems({depositAmount:e.depositAmount,totalDownPayment:e.totalDownPayment,totalTax:e.totalTax,totalPrice:e.totalPrice,installmentAmount:e.installmentAmount,cartUpdateResponse:e.cartUpdateResponse});this.totalAmount=this.paymentItems.length>0?oe.calculateTotalAmount(this.paymentItems):e.totalPrice||0;const t=te.getStoredShippingAddress();if(t){const e=t.name.split(" ");this.userName=e[0]||"";this.userLastName=e.slice(1).join(" ")||"";this.userEmail=t.email}await this.createOrder()}catch(e){console.error("[StepPayment] Error:",e);this.error="Error de conexión";this.screen="error"}}async createOrder(){this.screen="creating-order";try{const e=te.getZipCode();const t=await oe.createOrder({flowId:"5",frontFlowId:"1",frontFlowName:"CLARO HOGAR Purchase",amount:this.totalAmount.toString(),email:this.userEmail,zipCode:e,deposit:(this.cart?.totalDownPayment||0).toString()});if(t.hasError){this.error=t.errorDisplay||t.message||"Error al crear la orden";this.screen="error";return}this.orderBan=t.ban||"";await this.initializePaymentIframe()}catch(e){console.error("[StepPayment] Create order error:",e);this.error="Error al crear la orden";this.screen="error"}}async initializePaymentIframe(){if(this.totalAmount<=0){await this.handleFreePayment();return}try{const e={firstName:this.userName,lastName:this.userLastName,email:this.userEmail,amount:this.totalAmount,transactionType:this.paymentItems.length>0?"MULTIPLE":"payment",selectBan:this.orderBan,permissions:{provision:true,displayConfirmation:true,emailNotification:true,showInstrument:true,stroeInstrument:true,useBanZipCode:true},paymentItems:this.paymentItems.length>0?this.paymentItems:undefined};const t=await oe.getPaymentIframe(e);if(t.errorInfo?.hasError||!t.url){this.error=t.errorInfo?.errorDisplay||"Error al inicializar el pago";this.screen="error";return}this.iframeUrl=t.url;this.screen="payment"}catch(e){console.error("[StepPayment] Init iframe error:",e);this.error="Error al inicializar el formulario de pago";this.screen="error"}}handleIframeMessage=e=>{if(typeof e.data!=="string")return;try{const t=JSON.parse(atob(e.data));if(t.state==="dimensions"){this.iframeHeight=t.data.height}if(t.state==="canceled"){this.handlePaymentCancel()}if(t.state==="paymentResult"){if(t.data){const e=t.data;const a=JSON.parse(e).paymentResult;const r=JSON.parse(atob(a));if(r.success){this.handlePaymentSuccess(r)}else{this.handlePaymentError(r)}}}}catch{}};async handlePaymentSuccess(e){this.screen="processing";this.paymentResult=e;try{const t=await oe.recordPayment({ban:this.orderBan,cardNumber:e.paymentCard||"",cardType:e.paymentMethod||"",authorizationNumber:e.authorizationNumber||"",referenceNumber:e.provisioning?.referenceNumber||"",description:e.description||"",operationId:e.operationId||"",amount:this.totalAmount.toString(),deposit:(this.cart?.totalDownPayment||0).toString()});if(t.hasError){this.error=t.errorDisplay||"Error al registrar el pago";this.screen="error";return}oe.storePaymentResult(e);this.screen="success";setTimeout((()=>{this.onNext?.()}),2e3)}catch(e){console.error("[StepPayment] Record payment error:",e);this.error="Error al registrar el pago";this.screen="error"}}async handlePaymentError(e){await oe.recordPaymentError(this.orderBan,"",e.description||"Payment failed",e.operationId||"",(this.cart?.totalDownPayment||0).toString(),e.paymentMethod||"",e.paymentCard||"",this.totalAmount.toString());this.error=e.description||"El pago no pudo ser procesado";this.screen="error"}handlePaymentCancel(){this.onBack?.()}async handleFreePayment(){this.screen="processing";try{const e=Math.floor(Math.random()*9e5+1e5).toString();const t=await oe.recordPayment({ban:this.orderBan,cardNumber:"1111",cardType:"V",authorizationNumber:"FREEPR",referenceNumber:"FREEPROMO",description:"Free promotion",operationId:e,amount:"0",deposit:"0"});if(t.hasError){this.error=t.errorDisplay||"Error al procesar";this.screen="error";return}this.screen="success";setTimeout((()=>{this.onNext?.()}),2e3)}catch(e){console.error("[StepPayment] Free payment error:",e);this.error="Error al procesar";this.screen="error"}}handleRetry=()=>{this.loadCartAndPreparePayment()};formatPrice(e){return`$${(e||0).toFixed(2)}`}renderLoading(){return o("div",{class:"loading-container"},o("div",{class:"spinner"}),o("p",null,"Cargando información del pago..."))}renderCreatingOrder(){return o("div",{class:"loading-container"},o("div",{class:"spinner"}),o("h3",null,"Preparando tu orden"),o("p",null,"Por favor espera mientras procesamos tu solicitud..."),o("p",{class:"warning"},"No cierres esta ventana ni navegues a otra página."))}renderPaymentForm(){return o("div",{class:"payment-container"},o("div",{class:"payment-summary"},o("h3",null,"Resumen del pago"),o("div",{class:"amount-display"},o("span",{class:"label"},"Total a pagar:"),o("span",{class:"value"},this.formatPrice(this.totalAmount))),this.paymentItems.length>0&&o("div",{class:"payment-items"},this.paymentItems.map((e=>o("div",{class:"payment-item"},o("span",{class:"item-type"},this.getPaymentTypeLabel(e.paymentType)),o("span",{class:"item-amount"},this.formatPrice(e.amount))))))),o("div",{class:"iframe-container"},this.iframeUrl?o("iframe",{src:this.iframeUrl,width:"100%",height:this.iframeHeight,frameBorder:"0",title:"Payment Form"}):o("div",{class:"iframe-placeholder"},o("div",{class:"spinner"}),o("p",null,"Cargando formulario de pago..."))),o("button",{class:"btn-cancel",onClick:()=>this.handlePaymentCancel()},"Cancelar"))}renderProcessing(){return o("div",{class:"loading-container"},o("div",{class:"spinner"}),o("h3",null,"Procesando pago"),o("p",null,"Por favor espera mientras confirmamos tu pago..."))}renderSuccess(){return o("div",{class:"success-container"},o("div",{class:"success-icon"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o("polyline",{points:"22 4 12 14.01 9 11.01"}))),o("h3",null,"Pago exitoso"),o("p",null,"Tu pago ha sido procesado correctamente."),o("p",{class:"redirect-note"},"Redirigiendo a la confirmación..."))}renderError(){return o("div",{class:"error-container"},o("div",{class:"error-icon"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("circle",{cx:"12",cy:"12",r:"10"}),o("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),o("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))),o("h3",null,"Error en el pago"),o("p",null,this.error),o("div",{class:"error-actions"},o("button",{class:"btn-retry",onClick:this.handleRetry},"Intentar nuevamente"),o("button",{class:"btn-back",onClick:()=>this.onBack?.()},"Volver")))}getPaymentTypeLabel(e){const t={DEPOSIT:"Depósito",DOWNPAYMENT:"Pago inicial",TAXES:"Impuestos",INSTALLMENT:"Cuotas",PASTDUEONLY:"Balance pendiente"};return t[e]||e}render(){return o(i,{key:"74ccd06f102429de79883621c555d5a056feda61"},o("div",{key:"d8c04ad1eae1fdc56ee8a600c01cc1c20a946d85",class:"step-payment"},o("div",{key:"47d79f3225761ab9479f10e9cfe387928d1a6c98",class:"header"},this.screen!=="processing"&&this.screen!=="success"&&o("button",{key:"adf923db5bef8388e923f5838be48de5994d4b37",class:"btn-back-nav",onClick:()=>this.onBack?.()},o("svg",{key:"f8d58bfbe12680e97751dcd14faf9b2f31c6d2f1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{key:"da87ca559951c74c0c7cb783560de50e146ce5e8",d:"M19 12H5M12 19l-7-7 7-7"})),"Regresar"),o("h1",{key:"5575483ecc2e67ce4d267ff1a0a62349c9b2bb46",class:"title"},"Pago")),o("div",{key:"749c3334f95e76b9b0733cb07426c8f0fddd2618",class:"content"},this.screen==="loading"&&this.renderLoading(),this.screen==="creating-order"&&this.renderCreatingOrder(),this.screen==="payment"&&this.renderPaymentForm(),this.screen==="processing"&&this.renderProcessing(),this.screen==="success"&&this.renderSuccess(),this.screen==="error"&&this.renderError())))}};je.style=Be();const Ue=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block}.step-plans{width:100%;min-height:100vh;padding:1.5rem;padding-bottom:180px}@media (min-width: 768px){.step-plans{padding:2rem;padding-bottom:140px}}.step-plans__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}.step-plans__title{font-size:1.5rem;font-weight:700;color:#333333;margin:0}@media (min-width: 768px){.step-plans__title{font-size:1.75rem}}.step-plans__btn-back{background:#FFFFFF;border:2px solid #0097A9;color:#0097A9;padding:0.5rem 1.5rem;border-radius:9999px;font-size:0.875rem;font-weight:600;cursor:pointer;transition:all 0.2s ease}.step-plans__btn-back:hover{background:#0097A9;color:#FFFFFF}.step-plans__loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666666}.step-plans__spinner{width:40px;height:40px;border:3px solid #E5E5E5;border-top-color:#0097A9;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem}.step-plans__error{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;text-align:center;color:#DA291C}.step-plans__error button{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-plans__error button:disabled{opacity:0.5;cursor:not-allowed}.step-plans__error button{height:48px;background-color:transparent;color:#0097A9;border:2px solid #0097A9}.step-plans__error button:hover:not(:disabled){background-color:rgba(0, 151, 169, 0.1)}.step-plans__error button:active:not(:disabled){background-color:rgba(0, 151, 169, 0.2)}.step-plans__error button{margin-top:1rem}.step-plans__carousel-container{padding:1rem 0 3rem}.step-plans__empty{display:flex;align-items:center;justify-content:center;padding:3rem;color:#666666}.step-plans__footer{position:fixed;bottom:0;left:0;right:0;background:#FFFFFF;border-top:1px solid #E5E5E5;padding:0.75rem 1.5rem;z-index:200;box-shadow:0 -4px 12px rgba(0, 0, 0, 0.1);display:flex;align-items:center;justify-content:space-between}@media (max-width: 767px){.step-plans__footer{flex-direction:column;gap:0.75rem;padding:1rem}}.step-plans__footer-left{display:flex;flex-direction:column}@media (max-width: 767px){.step-plans__footer-left{width:100%}}.step-plans__footer-info{display:flex;gap:1.5rem}.step-plans__footer-item{display:flex;flex-direction:column}.step-plans__footer-item--separator{padding-left:1.5rem;border-left:1px solid #E5E5E5}.step-plans__footer-label{font-size:0.75rem;color:#666666}.step-plans__footer-value{font-size:1.25rem;font-weight:700;color:#333333}.step-plans__footer-value--highlight{color:#DA291C}.step-plans__footer-note{font-size:0.75rem;color:#808080;margin:0.25rem 0 0}.step-plans__footer-btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0 1.5rem;font-family:"AMX", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;border:none;border-radius:9999px;cursor:pointer;transition:all 150ms ease}.step-plans__footer-btn:disabled{opacity:0.5;cursor:not-allowed}.step-plans__footer-btn{height:48px;background-color:#DA291C;color:#FFFFFF}.step-plans__footer-btn:hover:not(:disabled){background-color:rgb(181.843902439, 34.2, 23.356097561)}.step-plans__footer-btn:active:not(:disabled){background-color:rgb(163.7658536585, 30.8, 21.0341463415)}.step-plans__footer-btn{min-width:160px}@media (max-width: 767px){.step-plans__footer-btn{width:100%}}.plan-card{background:#FFFFFF;border-radius:16px;border:2px solid #0097A9;box-shadow:0 2px 12px rgba(0, 0, 0, 0.1);overflow:hidden;cursor:pointer;transition:all 0.2s ease;display:flex;flex-direction:column;height:100%;min-height:340px}.plan-card:hover{box-shadow:0 6px 20px rgba(0, 151, 169, 0.25);transform:translateY(-2px)}.plan-card--selected{border-color:#0097A9;box-shadow:0 6px 24px rgba(0, 151, 169, 0.3)}.plan-card--processing{pointer-events:none;opacity:0.8}.plan-card__header{display:flex;justify-content:center;padding-top:0}.plan-card__name{background:#1a1a1a;color:#FFFFFF;font-size:0.875rem;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;line-height:1.3;padding:0.75rem 1rem;width:70%;text-align:center;border-radius:0 0 12px 12px}.plan-card__body{flex:1;padding:1.25rem 1rem;text-align:center;display:flex;flex-direction:column}.plan-card__includes-label{font-size:1rem;color:#666666;margin:0 0 0.75rem;font-weight:500}.plan-card__features{list-style:none;padding:0;margin:0 0 1rem;text-align:center;flex:1}.plan-card__feature{margin-bottom:0.5rem;font-size:0.875rem;color:#333333;font-weight:600}.plan-card__feature:last-child{margin-bottom:0}.plan-card__price{font-size:1.75rem;font-weight:700;color:#0097A9;margin:1rem 0 0}.plan-card__footer{padding:1rem}.plan-card__btn{width:100%;padding:0.75rem 1rem;border-radius:25px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;background:#0097A9;color:#FFFFFF;border:2px solid #0097A9}.plan-card__btn:hover{background:rgb(0, 114.5455621302, 128.2)}.plan-card__btn--selected{background:#0097A9;color:#FFFFFF;border-color:#0097A9}.plan-card__btn--selected:hover{background:rgb(0, 114.5455621302, 128.2)}.plan-card__btn--loading{cursor:wait;opacity:0.8}.plan-card__btn:disabled{cursor:not-allowed;opacity:0.6}.plan-card__btn-loading{display:inline-flex;align-items:center;gap:0.5rem}.plan-card__btn-spinner{width:14px;height:14px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:#FFFFFF;border-radius:50%;animation:spin 0.8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}`;const $e=class{constructor(e){a(this,e)}onNext;onBack;plans=[];selectedPlan=null;isLoading=true;error=null;isAddingToCart=false;async componentWillLoad(){await this.loadPlans();const e=D.getStoredPlanId();if(e>0){const t=this.plans.find((t=>t.planId===e));if(t){this.selectedPlan=t;_.selectPlan(t)}}}async loadPlans(){this.isLoading=true;this.error=null;try{const e=g.location?.serviceType||"GPON";let t=0;if(e==="CLARO HOGAR"){t=W.getSubcatalogId();console.log("[StepPlans] CLARO HOGAR - using subcatalogId:",t)}this.plans=await D.getPlans(e,t);this.plans=D.sortByPrice(this.plans)}catch(e){this.error="Error al cargar los planes";console.error(e)}finally{this.isLoading=false}}handleSelectPlan=async e=>{if(this.selectedPlan?.planId===e.planId){return}this.isAddingToCart=true;this.error=null;try{const t=D.getStoredPlanId();const a=D.getCartId();if(t>0&&t!==e.planId&&a>0){console.log("[StepPlans] Removing previous plan from cart:",t);await D.deleteFromCart(a)}console.log("[StepPlans] Adding plan to cart:",e.planId,e.planName);await D.addToCart(e);this.selectedPlan=e;_.selectPlan(e);console.log("[StepPlans] Plan added successfully")}catch(t){console.error("[StepPlans] Error adding plan to cart:",t);this.error="Error al agregar el plan. Por favor intente de nuevo.";this.selectedPlan=e;_.selectPlan(e)}finally{this.isAddingToCart=false}};handleContinue=()=>{if(this.selectedPlan&&!this.isAddingToCart){this.onNext?.()}};renderPlanCard(e){const t=this.selectedPlan?.planId===e.planId;const a=this.isAddingToCart&&t;const r=D.parsePlanFeatures(e.planDesc||"");const i=r.length>0?r:["Internet fibra 1","Internet 2","Internet 3"];return o("div",{class:{"plan-card":true,"plan-card--selected":t,"plan-card--processing":a},onClick:()=>!this.isAddingToCart&&this.handleSelectPlan(e)},o("div",{class:"plan-card__header"},o("span",{class:"plan-card__name"},e.planName)),o("div",{class:"plan-card__body"},o("p",{class:"plan-card__includes-label"},"Plan incluye"),o("ul",{class:"plan-card__features"},i.slice(0,4).map((e=>o("li",{class:"plan-card__feature"},e)))),o("p",{class:"plan-card__price"},me(e.decPrice))),o("div",{class:"plan-card__footer"},o("button",{class:{"plan-card__btn":true,"plan-card__btn--selected":t,"plan-card__btn--loading":a},disabled:this.isAddingToCart},a?o("span",{class:"plan-card__btn-loading"},o("span",{class:"plan-card__btn-spinner"}),"Agregando..."):t?"Plan seleccionado":"Solicitar plan")))}render(){const e=this.selectedPlan?this.selectedPlan.decPrice:0;const t=0;return o(i,{key:"34415fdf7adb297e19ec23088ff3a18c0dad752d"},o("div",{key:"01a17e6dfdf182be2e91948dd41cc7e8cdebdbed",class:"step-plans"},o("header",{key:"1b2878eced9e68c6e4bdfe41b62f23d18af32ed6",class:"step-plans__header"},o("h1",{key:"43fcc4ec973e63948086d8df50bc0e4375d942d0",class:"step-plans__title"},"Elige tu plan"),o("button",{key:"cdf623d6c3fa87308e953a11633ff824c17787d6",class:"step-plans__btn-back",onClick:this.onBack},"Regresar")),this.isLoading&&o("div",{key:"1063f032dace3e9a201c924026e58a0721fa3bff",class:"step-plans__loading"},o("div",{key:"8ec36dd95782b585185d6aab76a0aea0a3d395b4",class:"step-plans__spinner"}),o("p",{key:"b69b09cd82b4b1553b2f53e7b1e4dcfdb0425dab"},"Cargando planes...")),this.error&&o("div",{key:"5c9f07f02dd42c73db057def4696fc5e7094f892",class:"step-plans__error"},o("p",{key:"297ce470626c998458513731f8e7f886e7b4c07b"},this.error),o("button",{key:"8eeb4f9e22d9cccde344af09444c3e60c81161d8",onClick:()=>this.loadPlans()},"Reintentar")),!this.isLoading&&!this.error&&this.plans.length>0&&o("div",{key:"eb7511e871ba573950643455f98d98537383018a",class:"step-plans__carousel-container"},o("ui-carousel",{key:"d0125b09b6926ac69eda3bbb2891b4aee5634bc2",totalItems:this.plans.length,gap:24,showNavigation:true,showPagination:true,breakpoints:[{minWidth:0,slidesPerView:1},{minWidth:500,slidesPerView:2},{minWidth:800,slidesPerView:3},{minWidth:1100,slidesPerView:4}]},this.plans.map((e=>this.renderPlanCard(e))))),!this.isLoading&&!this.error&&this.plans.length===0&&o("div",{key:"8964acaed4e35d38baed0e8e7382221278086493",class:"step-plans__empty"},o("p",{key:"efaadbf685e9dfb551848bc6ddcd8110fb451740"},"No hay planes disponibles para tu área.")),o("footer",{key:"f9148a21e40798c573876ca0a1eb4277d837bc53",class:"step-plans__footer"},o("div",{key:"df04a8b4b6e39c1e960fc972d05961c62a7391e4",class:"step-plans__footer-left"},o("div",{key:"e83bdfd77bd8c242d903d29009962c2fd9db2cb7",class:"step-plans__footer-info"},o("div",{key:"d7d9dc8fab38bba5b3012157df8cb2382744e6bf",class:"step-plans__footer-item"},o("span",{key:"6a254189a1ff389fe15110480bf7d0eae6745a99",class:"step-plans__footer-label"},"Pago mensual"),o("span",{key:"625152a0ad5524c43e8e4822de708d3f78a2261b",class:"step-plans__footer-value"},me(e))),o("div",{key:"4581b080ffffb7a263b5c9c09b35c71d8f210030",class:"step-plans__footer-item step-plans__footer-item--separator"},o("span",{key:"66081e71fd0eb8682645a6df58010b3ebd194c53",class:"step-plans__footer-label"},"Paga hoy"),o("span",{key:"471b0051747f3e1955441684c3e4cd6b14ddf175",class:"step-plans__footer-value step-plans__footer-value--highlight"},me(t)))),o("p",{key:"f33f49cd46ae1a496212c1ea03454d84d3d0e82e",class:"step-plans__footer-note"},"Renta mensual aproximada no incluye cargos estatales, federales, ni otros impuestos.")),o("button",{key:"1d165145af48d1646d397e837171ca6196d3344e",class:"step-plans__footer-btn",onClick:this.handleContinue,disabled:!this.selectedPlan||this.isAddingToCart},this.isAddingToCart?"Procesando...":"Continuar"))))}};$e.style=Ue();const qe=()=>`:host{display:block;width:100%;min-height:100%;background-color:#FAFAFA}.step-product-detail{width:100%;max-width:1200px;margin:0 auto;padding:1.5rem}.loading-container,.error-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center;padding:2rem}.spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#DA291C;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem}.spinner-small{display:inline-block;width:16px;height:16px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:white;border-radius:50%;animation:spin 0.8s linear infinite;margin-right:0.25rem;vertical-align:middle}@keyframes spin{to{transform:rotate(360deg)}}.error-container p{color:#DA291C;margin-bottom:1rem;font-size:1.25rem}.error-container button{margin:0.25rem}.btn-retry{background:#DA291C;color:white;border:none;padding:0.5rem 1.5rem;border-radius:9999px;cursor:pointer;font-weight:600}.btn-retry:hover{background:rgb(172.8048780488, 32.5, 22.1951219512)}.breadcrumb{display:flex;align-items:center;gap:0.5rem;margin-bottom:1.5rem;font-size:0.875rem;color:#666666}.breadcrumb-item{cursor:pointer;transition:color 0.2s}.breadcrumb-item:hover{color:#0097A9}.breadcrumb-item.active{color:#1A1A1A;font-weight:500;cursor:default}.breadcrumb-item.active:hover{color:#1A1A1A}.breadcrumb-separator{color:#999999}.product-container{background:white;border-radius:0.75rem;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:2rem}.product-grid{display:grid;grid-template-columns:1fr 1fr;gap:2rem}@media (max-width: 768px){.product-grid{grid-template-columns:1fr}}.product-image-section{display:flex;align-items:flex-start;justify-content:center;width:100%;max-width:450px;margin:0 auto}.product-image-section ui-image-carousel{width:100%}.image-container{width:100%;max-width:400px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;background:#FAFAFA;border-radius:0.5rem;padding:1rem}.product-image{max-width:100%;max-height:100%;object-fit:contain}.product-details-section{display:flex;flex-direction:column;gap:1rem}.brand-name{font-size:0.875rem;color:#808080;text-transform:uppercase;letter-spacing:0.5px}.product-name{font-size:1.75rem;font-weight:700;color:#1A1A1A;margin:0;line-height:1.2}.product-description{font-size:1rem;color:#666666;line-height:1.6;margin:0}.selector-section{padding:1rem 0;border-top:1px solid #F5F5F5}.selector-section:first-of-type{border-top:none}.selector-title{font-size:0.875rem;font-weight:600;color:#4D4D4D;margin:0 0 0.5rem 0;text-transform:uppercase;letter-spacing:0.5px}.color-options{display:flex;gap:0.5rem;flex-wrap:wrap;margin-bottom:0.25rem}.color-circle{width:40px;height:40px;border-radius:50%;border:2px solid transparent;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;padding:0}.color-circle:hover{transform:scale(1.1)}.color-circle.selected{border-color:#0097A9;box-shadow:0 0 0 2px white, 0 0 0 4px #0097A9}.color-circle .check-icon{width:18px;height:18px}.selected-label{font-size:0.875rem;color:#666666}.storage-options{display:flex;gap:0.5rem;flex-wrap:wrap}.storage-button{padding:0.5rem 1rem;border:2px solid #E5E5E5;border-radius:0.5rem;background:white;cursor:pointer;font-size:0.875rem;font-weight:500;color:#4D4D4D;transition:all 0.2s}.storage-button:hover{border-color:#0097A9;color:#0097A9}.storage-button.selected{border-color:#0097A9;background:rgba(0, 151, 169, 0.1);color:#0097A9}.installment-options{display:flex;gap:0.5rem;flex-wrap:wrap}.installment-button{display:flex;flex-direction:column;align-items:center;padding:0.5rem 1rem;border:2px solid #E5E5E5;border-radius:0.5rem;background:white;cursor:pointer;transition:all 0.2s;min-width:100px}.installment-button:hover{border-color:#0097A9}.installment-button.selected{border-color:#0097A9;background:rgba(0, 151, 169, 0.1)}.installment-button.selected .months,.installment-button.selected .price{color:#0097A9}.installment-button .months{font-size:0.875rem;font-weight:600;color:#4D4D4D}.installment-button .price{font-size:0.75rem;color:#808080;margin-top:2px}.quantity-selector{display:flex;align-items:center;gap:1rem}.qty-button{width:36px;height:36px;border:2px solid #CCCCCC;border-radius:0.5rem;background:white;cursor:pointer;font-size:1.25rem;font-weight:600;color:#4D4D4D;display:flex;align-items:center;justify-content:center;transition:all 0.2s}.qty-button:hover:not(:disabled){border-color:#0097A9;color:#0097A9}.qty-button:disabled{opacity:0.4;cursor:not-allowed}.qty-value{font-size:1.25rem;font-weight:600;color:#1A1A1A;min-width:30px;text-align:center}.price-section{background:#FAFAFA;border-radius:0.5rem;padding:1rem;margin-top:0.5rem}.price-row{display:flex;justify-content:space-between;align-items:center;padding:0.25rem 0}.price-row.monthly .value{font-size:1.5rem;font-weight:700;color:#DA291C}.price-row.total{border-top:1px solid #E5E5E5;padding-top:0.5rem;margin-top:0.25rem}.price-row.total .value{font-weight:600}.price-row .label{font-size:0.875rem;color:#666666}.price-row .value{font-size:1rem;color:#1A1A1A}.btn-add-to-cart{width:100%;padding:1rem;background:#DA291C;color:white;border:none;border-radius:9999px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s;margin-top:1rem}.btn-add-to-cart:hover:not(:disabled){background:rgb(172.8048780488, 32.5, 22.1951219512)}.btn-add-to-cart:disabled{opacity:0.7;cursor:not-allowed}.btn-add-to-cart.loading{background:#808080}.btn-add-to-cart .loading-text{display:flex;align-items:center;justify-content:center}.btn-back-link{background:none;border:none;color:#0097A9;font-size:0.875rem;cursor:pointer;padding:0.5rem;margin-top:0.25rem;transition:color 0.2s}.btn-back-link:hover{color:rgb(0, 105.4319526627, 118);text-decoration:underline}.btn-back{background:#E5E5E5;color:#4D4D4D;border:none;padding:0.5rem 1.5rem;border-radius:9999px;cursor:pointer;font-weight:500}.btn-back:hover{background:#CCCCCC}.features-section{margin-top:2rem;padding-top:2rem;border-top:1px solid #E5E5E5}.features-title,.specs-title{font-size:1.25rem;font-weight:600;color:#1A1A1A;margin:0 0 1rem 0}.features-list{margin:0;padding:0 0 0 1.5rem}.features-list .feature-item{padding:0.25rem 0;color:#4D4D4D;line-height:1.5}.specs-section{margin-top:2rem;padding-top:2rem;border-top:1px solid #E5E5E5}.specs-grid{display:grid;grid-template-columns:repeat(2, 1fr);gap:0.5rem}@media (max-width: 576px){.specs-grid{grid-template-columns:1fr}}.spec-item{display:flex;justify-content:space-between;padding:0.5rem;background:#FAFAFA;border-radius:0.25rem}.spec-item .spec-label{font-size:0.875rem;color:#666666}.spec-item .spec-value{font-size:0.875rem;font-weight:500;color:#1A1A1A}.availability-status{display:flex;align-items:center;gap:0.25rem;padding:0.5rem 0}.availability-status--available{display:flex;align-items:center;gap:0.25rem;color:#44AF69;font-weight:500;font-size:0.875rem}.availability-status--unavailable{display:flex;align-items:center;gap:0.25rem;color:#DA291C;font-weight:500;font-size:0.875rem}.availability-icon{width:18px;height:18px}.unavailable-alert-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.6);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.unavailable-alert{background:white;border-radius:0.75rem;padding:2rem;max-width:400px;width:100%;text-align:center;box-shadow:0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);animation:alertSlideIn 0.3s ease-out}.unavailable-alert__icon{width:64px;height:64px;margin:0 auto 1rem;background:rgba(218, 41, 28, 0.1);border-radius:50%;display:flex;align-items:center;justify-content:center}.unavailable-alert__icon svg{width:32px;height:32px;color:#DA291C}.unavailable-alert__title{font-size:1.5rem;font-weight:700;color:#1A1A1A;margin:0 0 0.5rem 0}.unavailable-alert__message{font-size:1rem;color:#666666;line-height:1.6;margin:0 0 1.5rem 0}.unavailable-alert__btn{width:100%;padding:1rem;background:#DA291C;color:white;border:none;border-radius:9999px;font-size:1rem;font-weight:600;cursor:pointer;transition:background 0.2s}.unavailable-alert__btn:hover{background:rgb(172.8048780488, 32.5, 22.1951219512)}@keyframes alertSlideIn{from{opacity:0;transform:translateY(-20px) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}.btn-add-to-cart.disabled{background:#999999;cursor:not-allowed}.btn-add-to-cart.disabled:hover{background:#999999}`;const Je=class{constructor(e){a(this,e)}onNext;onBack;product=null;catalogueProduct=null;isLoading=true;error=null;isAddingToCart=false;selectedColorIndex=0;selectedStorageIndex=0;selectedInstallments=36;quantity=1;isAvailable=true;showUnavailableAlert=false;colorOptions=[];storageOptions=[];installmentOptions=[];productImages=[];ENTRY_BARRIER=1;componentWillLoad(){this.loadProductDetail()}async loadProductDetail(){this.isLoading=true;this.error=null;try{const e=j.getStoredProduct();if(!e){this.error="No se encontró el producto seleccionado";this.isLoading=false;return}this.catalogueProduct=e;const t=await W.getEquipmentDetail(e.productId);if(t.hasError||!t.product){console.warn("[StepProductDetail] API failed, using catalogue data");this.product=this.mapCatalogueToDetail(e)}else{this.product=t.product}this.parseColorOptions();this.parseStorageOptions();this.parseInstallmentOptions();this.buildProductImages();this.checkAvailability();W.storeSelectedProduct(this.product);W.storeDeviceType("home")}catch(e){console.error("[StepProductDetail] Error:",e);this.error="Error al cargar el detalle del producto"}finally{this.isLoading=false}}mapCatalogueToDetail(e){return{productId:e.productId,productName:e.productName,imgUrl:e.imgUrl,regular_price:e.regular_price,update_price:e.update_price,installments:e.installments,shortDescription:e.shortDescription,colors:e.colors?.map(((e,t)=>({colorId:t,colorName:`Color ${t+1}`,webColor:e.webColor}))),home:true,catalogId:6}}parseColorOptions(){if(!this.product?.colors||this.product.colors.length===0){this.colorOptions=[{colorId:0,colorName:"Default",webColor:"#333333"}];return}this.colorOptions=this.product.colors.map(((e,t)=>({colorId:e.colorId||t,colorName:e.colorName||`Color ${t+1}`,webColor:e.webColor||"#333333",productId:e.productId,imgUrl:e.imgUrl})))}parseStorageOptions(){if(!this.product?.storages||this.product.storages.length===0){this.storageOptions=[];return}this.storageOptions=this.product.storages.map(((e,t)=>({storageId:e.storageId||t,storageName:e.storageName||e.name||`${e.size}GB`,productId:e.productId,price:e.price})))}parseInstallmentOptions(){const e=this.product?.regular_price||0;const t=this.product?.installments||36;const a=[12,24,36];this.installmentOptions=a.map((t=>({months:t,monthlyPrice:Number((e/t).toFixed(2)),totalPrice:e})));this.selectedInstallments=t}buildProductImages(){if(!this.product){this.productImages=[];return}const e=[];if(this.product.images?.length){e.push(...this.product.images)}else if(this.product.imgUrl){e.push(this.product.imgUrl)}if(this.colorOptions?.length>0){this.colorOptions.forEach((t=>{if(t.imgUrl&&!e.includes(t.imgUrl)){e.push(t.imgUrl)}}))}this.productImages=e;console.log("[StepProductDetail] Product images:",this.productImages.length)}checkAvailability(){if(!this.product){this.isAvailable=false;this.showUnavailableAlert=true;return}if(this.product.stock===undefined||this.product.stock===null){this.isAvailable=true;console.log("[StepProductDetail] Availability check - stock undefined (no colors structure), assuming available")}else{this.isAvailable=this.product.stock>this.ENTRY_BARRIER;console.log("[StepProductDetail] Availability check (TEL pattern) - stock:",this.product.stock,"> entryBarrier:",this.ENTRY_BARRIER,"=",this.isAvailable);if(!this.isAvailable){this.showUnavailableAlert=true}}}handleGoBackFromAlert=()=>{this.showUnavailableAlert=false;this.onBack?.()};handleColorSelect=e=>{this.selectedColorIndex=e;const t=this.colorOptions[e];W.storeSelectedColor(t.colorId,t.colorName,t.webColor);if(t.imgUrl&&this.product){this.product={...this.product,imgUrl:t.imgUrl}}};handleStorageSelect=e=>{this.selectedStorageIndex=e;const t=this.storageOptions[e];W.storeSelectedStorage(t.storageId,t.storageName);if(t.productId){W.storeChildrenId(t.productId)}};handleInstallmentSelect=e=>{this.selectedInstallments=e};handleAddToCart=async()=>{if(!this.product||this.isAddingToCart)return;this.isAddingToCart=true;try{const e=await G.addToCart(this.product,this.selectedInstallments,this.quantity);if(e.hasError){console.error("[StepProductDetail] Add to cart failed:",e.message);this.error=e.message||"Error al agregar al carrito";return}if(e.code){G.storeMainId(e.code);W.storeMainId(e.code)}console.log("[StepProductDetail] Added to cart, proceeding to plans");this.onNext?.()}catch(e){console.error("[StepProductDetail] Error:",e);this.error="Error al agregar el producto al carrito"}finally{this.isAddingToCart=false}};getCurrentMonthlyPrice(){const e=this.installmentOptions.find((e=>e.months===this.selectedInstallments));return e?.monthlyPrice||this.product?.update_price||0}formatPrice(e){return`$${e.toFixed(2)}`}renderBreadcrumb(){return o("div",{class:"breadcrumb"},o("span",{class:"breadcrumb-item",onClick:this.onBack},"Catálogo"),o("span",{class:"breadcrumb-separator"},">"),o("span",{class:"breadcrumb-item active"},this.product?.productName||"Detalle"))}renderColorSelector(){if(this.colorOptions.length<=1)return null;return o("div",{class:"selector-section"},o("h4",{class:"selector-title"},"Color"),o("div",{class:"color-options"},this.colorOptions.map(((e,t)=>o("button",{class:{"color-circle":true,selected:this.selectedColorIndex===t},style:{backgroundColor:e.webColor},onClick:()=>this.handleColorSelect(t),title:e.colorName},this.selectedColorIndex===t&&o("svg",{class:"check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"3"},o("polyline",{points:"20 6 9 17 4 12"})))))),o("span",{class:"selected-label"},this.colorOptions[this.selectedColorIndex]?.colorName))}renderStorageSelector(){if(this.storageOptions.length===0)return null;return o("div",{class:"selector-section"},o("h4",{class:"selector-title"},"Almacenamiento"),o("div",{class:"storage-options"},this.storageOptions.map(((e,t)=>o("button",{class:{"storage-button":true,selected:this.selectedStorageIndex===t},onClick:()=>this.handleStorageSelect(t)},e.storageName)))))}renderInstallmentSelector(){return o("div",{class:"selector-section"},o("h4",{class:"selector-title"},"Plazos de pago"),o("div",{class:"installment-options"},this.installmentOptions.map((e=>o("button",{class:{"installment-button":true,selected:this.selectedInstallments===e.months},onClick:()=>this.handleInstallmentSelect(e.months)},o("span",{class:"months"},e.months," meses"),o("span",{class:"price"},this.formatPrice(e.monthlyPrice),"/mes"))))))}renderQuantitySelector(){return o("div",{class:"selector-section"})}renderPriceSection(){const e=this.getCurrentMonthlyPrice();const t=this.product?.regular_price||0;return o("div",{class:"price-section"},o("div",{class:"price-row monthly"},o("span",{class:"label"},"Pago mensual"),o("span",{class:"value"},this.formatPrice(e))),o("div",{class:"price-row total"},o("span",{class:"label"},"Precio total"),o("span",{class:"value"},this.formatPrice(t))),o("div",{class:"price-row installments"},o("span",{class:"label"},"Financiado a"),o("span",{class:"value"},this.selectedInstallments," meses")))}renderAvailabilityStatus(){return o("div",{class:"availability-status"},this.isAvailable?o("div",{class:"availability-status--available"},o("svg",{class:"availability-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o("polyline",{points:"22 4 12 14.01 9 11.01"})),o("span",null,"Disponible")):o("div",{class:"availability-status--unavailable"},o("svg",{class:"availability-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),o("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})),o("span",null,"No disponible")))}renderUnavailableAlert(){if(!this.showUnavailableAlert)return null;return o("div",{class:"unavailable-alert-overlay"},o("div",{class:"unavailable-alert"},o("div",{class:"unavailable-alert__icon"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),o("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))),o("h3",{class:"unavailable-alert__title"},"Producto no disponible"),o("p",{class:"unavailable-alert__message"},"Lo sentimos, este equipo no está disponible actualmente. Por favor seleccione otro equipo del catálogo."),o("button",{class:"unavailable-alert__btn",onClick:this.handleGoBackFromAlert},"Volver al catálogo")))}render(){return o(i,{key:"af187d60d6c4cee216e9993c8a02b86c903bd1ea"},o("div",{key:"3a619111d42da7044010e8243f3844c69d80227f",class:"step-product-detail"},this.renderUnavailableAlert(),this.isLoading&&o("div",{key:"5a1bdf8f07f4320e8eda25ea92dedde11d382c66",class:"loading-container"},o("div",{key:"435f31c32e0dae1726ce5d18ff4c7a4a9781efb3",class:"spinner"}),o("p",{key:"3719de9dae95c3999f910a1e2755eaed815f9e57"},"Cargando producto...")),this.error&&!this.isLoading&&o("div",{key:"f6eb3ebc3cb46822ec9f26306e973c2091368457",class:"error-container"},o("p",{key:"bb77b8c765c79f51a39e5fb553344150b9e820af"},this.error),o("button",{key:"85574f4cd2f925b3eceee56860d09f74d287ebf6",class:"btn-retry",onClick:()=>this.loadProductDetail()},"Reintentar"),o("button",{key:"3b811a94a1876a48be25f95857f1723fecaad538",class:"btn-back",onClick:this.onBack},"Volver al catálogo")),!this.isLoading&&!this.error&&this.product&&o("div",{key:"a909b2e7baa56e0900956c624fd3108e6924559f",class:"product-container"},this.renderBreadcrumb(),o("div",{key:"dbd2e612fa6c37b276e2f13d8b52b6f92bd2f03f",class:"product-grid"},o("div",{key:"6a0d55b1bdd3645b588095abc114532965ac8a3e",class:"product-image-section"},o("ui-image-carousel",{key:"b956a928f422f82da0fdbfbff1ca3e92425a9681",images:this.productImages,loop:true,showNavigation:this.productImages.length>1,showIndicators:this.productImages.length>1,autoplayInterval:0})),o("div",{key:"78cfddd2a432b8772b827e1bbf2117672e00339a",class:"product-details-section"},this.product.brandName&&o("span",{key:"53cc708e01bf36693c650dbd09fa826e889c3a06",class:"brand-name"},this.product.brandName),o("h1",{key:"b311030defc58424fca609da87452288c9691f4b",class:"product-name"},this.product.productName),this.product.shortDescription&&o("p",{key:"8a3084855d07a17cb1b54aec9f74459334b34a4e",class:"product-description"},W.cleanDescription(this.product.shortDescription)),this.renderAvailabilityStatus(),this.renderColorSelector(),this.renderStorageSelector(),this.renderInstallmentSelector(),this.renderQuantitySelector(),this.renderPriceSection(),o("button",{key:"8d8fa0387b3e71394e59563c1b5305fbd3c439a8",class:{"btn-add-to-cart":true,loading:this.isAddingToCart,disabled:!this.isAvailable},onClick:this.handleAddToCart,disabled:this.isAddingToCart||!this.isAvailable},this.isAddingToCart?o("span",{class:"loading-text"},o("span",{class:"spinner-small"}),"Agregando..."):!this.isAvailable?"No disponible":"Continuar"),o("button",{key:"961aabd7b04c48e9dc80a6e0b30838bcbec77a45",class:"btn-back-link",onClick:this.onBack},"← Volver al catálogo"))),this.product.features&&this.product.features.length>0&&o("div",{key:"3cdecc1e0edb59a8ce2a2e9b5f19f2e2c20deaf8",class:"features-section"},o("h3",{key:"718e3635682061f79462614889b7b5cb78ed12bd",class:"features-title"},"Características"),o("ul",{key:"e0ecd30e6f5f208d25b7c0f3e49986af672db36c",class:"features-list"},this.product.features.map((e=>o("li",{class:"feature-item"},e))))),this.product.specifications&&this.product.specifications.length>0&&o("div",{key:"648bf2a0297e7a410d91faabe7dc80e135e684bc",class:"specs-section"},o("h3",{key:"12e80ac827eefb9d03ab61c7b2ec7541532dc083",class:"specs-title"},"Especificaciones"),o("div",{key:"216b9c886b144c65b51547b7a7176222e59fc746",class:"specs-grid"},this.product.specifications.map((e=>o("div",{class:"spec-item"},o("span",{class:"spec-label"},e.name),o("span",{class:"spec-value"},e.value)))))))))}};Je.style=qe();const Ge=()=>`:host{display:block;width:100%;min-height:100%;background-color:white}.step-shipping{width:100%;max-width:900px;margin:0 auto;padding:1.5rem 1rem}.info-message{font-size:0.875rem;color:#666666;margin:0 0 1.5rem 0;padding:0 !important;background:transparent !important;background-color:transparent !important;line-height:1.5;border:none !important;border-radius:0 !important}.error-alert{display:flex;align-items:center;gap:0.5rem;background:rgb(248.1707317073, 205, 201.8292682927);color:rgb(172.8048780488, 32.5, 22.1951219512);padding:1rem;border-radius:0.5rem;margin-bottom:1.5rem;font-size:0.875rem}.error-alert svg{width:20px;height:20px;flex-shrink:0}.form-container{width:100%}.form-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem 1.5rem;margin-bottom:0.25rem}@media (max-width: 700px){.form-row{grid-template-columns:1fr}}.form-group{margin-bottom:1rem}.form-group.existing-customer{margin-top:0.5rem}.form-label{display:block;font-size:0.875rem;font-weight:500;color:#4D4D4D;margin-bottom:0.25rem}.form-label .required{color:#4D4D4D;margin-right:2px}.form-input{width:100%;padding:10px 12px;border:1px solid #CCCCCC;border-radius:0.25rem;font-size:0.875rem;color:#1A1A1A;background:white;transition:border-color 0.2s, box-shadow 0.2s;box-sizing:border-box}.form-input::placeholder{color:#999999}.form-input:focus{outline:none;border-color:#0097A9;box-shadow:0 0 0 2px rgba(0, 151, 169, 0.1)}.form-input:disabled{background:#F5F5F5;color:#808080;cursor:not-allowed}.form-input.error{border-color:#DA291C}.form-input.error:focus{box-shadow:0 0 0 2px rgba(218, 41, 28, 0.1)}input[type=date]::-webkit-calendar-picker-indicator{cursor:pointer;opacity:0.6}.date-input-wrapper{position:relative}.error-message{display:block;font-size:0.75rem;color:#DA291C;margin-top:0.25rem}.id-field{display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap}.id-field .radio-group{display:flex;flex-direction:row;align-items:center;gap:1rem;flex-shrink:0}.id-field .id-input{flex:1;min-width:150px}.radio-group{display:flex;flex-direction:row;align-items:center;gap:1rem}.radio-group.horizontal{flex-direction:row}.radio-label{display:flex;align-items:center;gap:6px;cursor:pointer;font-size:0.875rem}.radio-label input[type=radio]{display:none}.radio-label .radio-custom{width:16px;height:16px;border:2px solid #999999;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all 0.2s;flex-shrink:0}.radio-label .radio-custom::after{content:"";width:8px;height:8px;border-radius:50%;background:transparent;transition:background 0.2s}.radio-label input[type=radio]:checked+.radio-custom{border-color:#666666}.radio-label input[type=radio]:checked+.radio-custom::after{background:#666666}.radio-label .radio-text{color:#4D4D4D;font-size:0.75rem;white-space:nowrap}.btn-container{display:flex;justify-content:center;margin-top:1.5rem;padding-top:1rem}.btn-submit{min-width:200px;height:44px;background:#666666;color:white;border:none;border-radius:9999px;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;padding:0 2rem}.btn-submit:hover:not(:disabled){background:#4D4D4D}.btn-submit:disabled{background:#CCCCCC;cursor:not-allowed}.btn-submit.loading{background:#999999}.btn-loading{display:flex;align-items:center;gap:0.5rem}.spinner{width:18px;height:18px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:white;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}@media (max-width: 500px){.step-shipping{padding:1rem}.id-field{flex-direction:column;align-items:flex-start}.id-field .radio-group{margin-bottom:0.25rem}.id-field .id-input{width:100%}}`;const Ve=class{constructor(e){a(this,e)}onNext;onBack;isLoading=false;error=null;name="";secondName="";lastname="";secondLastname="";idType="";idNumber="";expirationDate="";phone="";phone2="";businessName="";position="";address="";city="";zipcode="";email="";existingCustomer="";formErrors={};touched={};componentWillLoad(){this.loadStoredData()}loadStoredData(){const e=te.getStoredShippingAddress();if(e){const t=e.name.split(" ");this.name=t[0]||"";this.lastname=t.slice(1).join(" ")||"";this.email=e.email;this.phone=this.formatPhoneDisplay(e.phone);this.phone2=e.phone2?this.formatPhoneDisplay(e.phone2):"";this.address=e.address1;this.zipcode=e.zip;this.city=e.city}}formatPhoneDisplay(e){const t=e.replace(/\D/g,"");if(t.length===10){return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`}return e}handleInputChange=e=>t=>{const a=t.target;let r=a.value;if(e==="phone"||e==="phone2"){r=this.formatPhoneInput(r)}if(e==="zipcode"){r=r.replace(/\D/g,"").slice(0,5);const e=te.getMunicipalityByZip(r);if(e){this.city=e}else if(r.length===5){this.city=""}}this[e]=r;this.touched[e]=true;this.validateField(e)};formatPhoneInput(e){const t=e.replace(/\D/g,"").slice(0,10);if(t.length===0)return"";if(t.length<=3)return`(${t}`;if(t.length<=6)return`(${t.slice(0,3)}) ${t.slice(3)}`;return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`}handleRadioChange=(e,t)=>()=>{this[e]=t;this.touched[e]=true;this.validateField(e)};validateField(e){const t={...this.formErrors};switch(e){case"name":if(!this.name.trim()){t.name="El nombre es requerido"}else{delete t.name}break;case"lastname":if(!this.lastname.trim()){t.lastname="El apellido es requerido"}else{delete t.lastname}break;case"secondLastname":if(!this.secondLastname.trim()){t.secondLastname="El segundo apellido es requerido"}else{delete t.secondLastname}break;case"idType":if(!this.idType){t.idType="Seleccione un tipo de identificación"}else{delete t.idType}break;case"idNumber":if(!this.idNumber.trim()){t.idNumber="El número de identificación es requerido"}else{delete t.idNumber}break;case"expirationDate":if(!this.expirationDate){t.expirationDate="La fecha de vencimiento es requerida"}else{delete t.expirationDate}break;case"phone":if(!this.phone.trim()){t.phone="El teléfono es requerido"}else if(!te.isValidPhone(this.phone)){t.phone="Ingresa un teléfono válido (10 dígitos)"}else{delete t.phone}break;case"businessName":if(!this.businessName.trim()){t.businessName="El nombre del negocio es requerido"}else{delete t.businessName}break;case"position":if(!this.position.trim()){t.position="La posición es requerida"}else{delete t.position}break;case"address":if(!this.address.trim()){t.address="La dirección es requerida"}else{delete t.address}break;case"city":if(!this.city.trim()){t.city="La ciudad es requerida"}else{delete t.city}break;case"zipcode":if(!this.zipcode.trim()){t.zipcode="El código postal es requerido"}else if(!te.validateZipCode(this.zipcode)){t.zipcode="Código postal no válido para Puerto Rico"}else{delete t.zipcode}break;case"email":if(!this.email.trim()){t.email="El correo es requerido"}else if(!te.isValidEmail(this.email)){t.email="Ingresa un correo válido"}else{delete t.email}break;case"existingCustomer":if(!this.existingCustomer){t.existingCustomer="Seleccione una opción"}else{delete t.existingCustomer}break}this.formErrors=t;return Object.keys(t).length===0}validateForm(){this.touched={name:true,lastname:true,secondLastname:true,idType:true,idNumber:true,expirationDate:true,phone:true,businessName:true,position:true,address:true,city:true,zipcode:true,email:true,existingCustomer:true};const e=["name","lastname","secondLastname","idType","idNumber","expirationDate","phone","businessName","position","address","city","zipcode","email","existingCustomer"];e.forEach((e=>this.validateField(e)));return Object.keys(this.formErrors).length===0}handleSubmit=async()=>{if(!this.validateForm()){return}this.isLoading=true;this.error=null;try{const e={name:`${this.name} ${this.secondName} ${this.lastname} ${this.secondLastname}`.replace(/\s+/g," ").trim(),email:this.email,phone:te.cleanPhoneNumber(this.phone),phone2:this.phone2?te.cleanPhoneNumber(this.phone2):undefined,address1:this.address,city:this.city,state:"PR",zip:this.zipcode};const t=await te.createAddress(e);if(t.hasError){this.error=t.message||t.errorDesc||"Error al guardar la dirección";return}console.log("[StepShipping] Address created, shipmentId:",t.response);this.onNext?.()}catch(e){console.error("[StepShipping] Error:",e);this.error="Error de conexión. Intenta nuevamente."}finally{this.isLoading=false}};render(){return o(i,{key:"c07553bdbaa3372ca94591fb13dd23ca919fd7cd"},o("div",{key:"4ed5a61e3b9453c946c1ee251c7af433632b1a47",class:"step-shipping"},o("p",{key:"56af6226a93d1b721250595712dc9ae388fe6352",class:"info-message"},"Por favor, ingresa la información personal solicitada. Su nombre y apellido deben ser iguales a su identificación de gobierno."),this.error&&o("div",{key:"ade2b1dde278061611862e1935b593d74aa18a08",class:"error-alert"},o("svg",{key:"36b884150ff4815eaae6f5b8e8b8d9cde3febcbe",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("circle",{key:"2c90b3776ae3c35643ee0384436e174f198fa84a",cx:"12",cy:"12",r:"10"}),o("line",{key:"a13513e527287809096b473428adc9eb620306a1",x1:"12",y1:"8",x2:"12",y2:"12"}),o("line",{key:"f1ead6eed9d8e258952321364ee504f3ea8a90b6",x1:"12",y1:"16",x2:"12.01",y2:"16"})),o("span",{key:"edc327fe90f09aea6b449ea1d85e4212921826e6"},this.error)),o("div",{key:"8ca4e304db4fe381fcb3908f3cde5fb4b74141ac",class:"form-container"},o("div",{key:"76cb518d3b890f3a122bf78a9d90e46781bf41b7",class:"form-row"},o("div",{key:"7ae1d427963f6387bda0696f5eab053fe40722d5",class:"form-group"},o("label",{key:"d6a23ccea5367a19035116b16c7bda1e9de09fe5",class:"form-label"},o("span",{key:"99de19d5c3dde6c267a513c55d582dd0f7bf5410",class:"required"},"*"),"Nombre:"),o("input",{key:"ac5dfa6dff61b5e4b3e8abd308b94d2a0fd46144",type:"text",class:{"form-input":true,error:this.touched.name&&!!this.formErrors.name},value:this.name,onInput:this.handleInputChange("name"),placeholder:"Ingresar nombre"}),this.touched.name&&this.formErrors.name&&o("span",{key:"f7a28376fc546336a36f5d12d80c094dd60d9e2c",class:"error-message"},this.formErrors.name)),o("div",{key:"8deff41d097263f18f578d84c6b40b1c69982bf4",class:"form-group"},o("label",{key:"41400f13d2bdaa85480b155d07e193eb980001a2",class:"form-label"},"Segundo nombre:"),o("input",{key:"67573cc53af5d658c7b705c8f2ea47f387e9ea83",type:"text",class:"form-input",value:this.secondName,onInput:this.handleInputChange("secondName"),placeholder:"Ingresar segundo nombre (Opcional)"}))),o("div",{key:"7edcd4d93e14526ba432d9b4d21846b04f140596",class:"form-row"},o("div",{key:"16520203d44a9f23a04bd93fd1445dedd8e24978",class:"form-group"},o("label",{key:"3dfae7e516e9798cdb460c580fc7442f46fdfc75",class:"form-label"},o("span",{key:"da03d5edba574af10137aa40fdd40214e7426ec2",class:"required"},"*"),"Apellido:"),o("input",{key:"68fbc627ed84ab9695b135ade5ab0335009d1bf7",type:"text",class:{"form-input":true,error:this.touched.lastname&&!!this.formErrors.lastname},value:this.lastname,onInput:this.handleInputChange("lastname"),placeholder:"Ingresar apellido"}),this.touched.lastname&&this.formErrors.lastname&&o("span",{key:"c63dda9d8efb56c73b0fb294c8882363b45453e3",class:"error-message"},this.formErrors.lastname)),o("div",{key:"20b2308f610fe8f7ffac7c83b467fbf9830bd29c",class:"form-group"},o("label",{key:"32c03703d5089dfbaea81bc13b10f99f30cb505c",class:"form-label"},o("span",{key:"5b26734a7289e0f7bdbd7f12c0a58f2454c6b90a",class:"required"},"*"),"Segundo apellido:"),o("input",{key:"16118423cb334b85379553359d25e44324cbf02d",type:"text",class:{"form-input":true,error:this.touched.secondLastname&&!!this.formErrors.secondLastname},value:this.secondLastname,onInput:this.handleInputChange("secondLastname"),placeholder:"Ingresar segundo apellido"}),this.touched.secondLastname&&this.formErrors.secondLastname&&o("span",{key:"aa062fa68bc1b44be0ed56e8450dc09c7ccb940c",class:"error-message"},this.formErrors.secondLastname))),o("div",{key:"f32bda48060872b868097b663299e218f8db2344",class:"form-row"},o("div",{key:"91e11d90e279c45d57716ad7e57a8ff101f7f5eb",class:"form-group"},o("label",{key:"90ce229b347974b7d5f5e7f834b78c899fe2d3f2",class:"form-label"},o("span",{key:"3ab365d6756c952d10f70a3e31d4a692b042c32a",class:"required"},"*"),"Identificación:"),o("div",{key:"b2bcd6c4a185f30664e9a46c5c4068d2a0bf601a",class:"id-field"},o("div",{key:"1851ff3305e49e344208e49e99a7276f7c779b91",class:"radio-group"},o("label",{key:"5a7954738f7ea0f896e4a38afd431f1beb14b176",class:"radio-label"},o("input",{key:"ef932dd61bcc37c75519c3d1e0505bfa1fed4f38",type:"radio",name:"idType",checked:this.idType==="license",onChange:this.handleRadioChange("idType","license")}),o("span",{key:"3a7b8f96a9b321d135d54f8e35a108f22c3d6c55",class:"radio-custom"}),o("span",{key:"d890af48f323ab67b6b254a48a92f9b099a1d930",class:"radio-text"},"Licencia de conducir")),o("label",{key:"01670f605ec76a8386116b88048db54973be8d47",class:"radio-label"},o("input",{key:"573798d590a46ee6c83178a71fdbe68c4baac8cf",type:"radio",name:"idType",checked:this.idType==="passport",onChange:this.handleRadioChange("idType","passport")}),o("span",{key:"bcb4e2dc3fdb8bacfe86f04a508c10a42ff9903d",class:"radio-custom"}),o("span",{key:"aee5b52e256597d9414f08ad49977be65ac07d3c",class:"radio-text"},"Pasaporte"))),o("input",{key:"1c388b898cfa13659b04abd6892faee39b0df6d1",type:"text",class:{"form-input":true,"id-input":true,error:this.touched.idNumber&&!!this.formErrors.idNumber},value:this.idNumber,onInput:this.handleInputChange("idNumber"),placeholder:"Ingresar nro de identificación"})),this.touched.idType&&this.formErrors.idType&&o("span",{key:"b2427fffb3a111384d5c946b6f6e2aeec279129f",class:"error-message"},this.formErrors.idType),this.touched.idNumber&&this.formErrors.idNumber&&o("span",{key:"05d4b92beacd9b41c9f9de3b047c92633a9d8b3a",class:"error-message"},this.formErrors.idNumber)),o("div",{key:"3821bcea062c63dcddf5626071d3690238192c6f",class:"form-group"},o("label",{key:"52be2efd130820f13f057229923732e31d7050b7",class:"form-label"},o("span",{key:"28e1d4c8c838235d3ab7b58feefc339570106081",class:"required"},"*"),"Fecha de vencimiento:"),o("div",{key:"103969c96a32758608896967caff011b148fdf5f",class:"date-input-wrapper"},o("input",{key:"bf9e5b53ee5cfb8df18ff8dbd9b60572f9b764bb",type:"date",class:{"form-input":true,error:this.touched.expirationDate&&!!this.formErrors.expirationDate},value:this.expirationDate,onInput:this.handleInputChange("expirationDate"),placeholder:"Seleccionar"})),this.touched.expirationDate&&this.formErrors.expirationDate&&o("span",{key:"311fb163a8c986be979d998e17b3870b512901e9",class:"error-message"},this.formErrors.expirationDate))),o("div",{key:"111588d4c1726e20a2b9783b4d08d52e97147ec2",class:"form-row"},o("div",{key:"986224ced53c65a7144b1da6c0c3be98ca295156",class:"form-group"},o("label",{key:"2d9fd90d956b0c5e2f0bf2395bbbd423c6a4aac7",class:"form-label"},o("span",{key:"d840a52b6d6cdd7e3133672b2e692e2cbdc7cccb",class:"required"},"*"),"Teléfono de contacto 1:"),o("input",{key:"693860bdf028bef79ea5c09c03466a0f3b47159f",type:"tel",class:{"form-input":true,error:this.touched.phone&&!!this.formErrors.phone},value:this.phone,onInput:this.handleInputChange("phone"),placeholder:"Ingresar nro de teléfono"}),this.touched.phone&&this.formErrors.phone&&o("span",{key:"ff7b3ea2c2ca470c122e923f9b91c8c6e4c0fec5",class:"error-message"},this.formErrors.phone)),o("div",{key:"2155e49b260846cfb8327b8461f2718b7b49674a",class:"form-group"},o("label",{key:"bc1854ca36aa98dc5292eafea366350b0ecdc80f",class:"form-label"},"Teléfono de contacto 2:"),o("input",{key:"ba461ffe0cf3a2048f44ff2428f0537361fc098c",type:"tel",class:"form-input",value:this.phone2,onInput:this.handleInputChange("phone2"),placeholder:"Ingresar nro de teléfono"}))),o("div",{key:"2e2f49470951085e9bf8c4ed38e8460dae7b9156",class:"form-row"},o("div",{key:"f60814966ea372a28cbabbbbc4b41ba3af10a21e",class:"form-group"},o("label",{key:"c71e46f2f78573c923a25960789910f370c27ce1",class:"form-label"},o("span",{key:"11bb1896bb6915efc677b3ce754049468c8f7cdf",class:"required"},"*"),"Nombre del Negocio:"),o("input",{key:"969838eae6fc87103469153f0e5f2c5083271179",type:"text",class:{"form-input":true,error:this.touched.businessName&&!!this.formErrors.businessName},value:this.businessName,onInput:this.handleInputChange("businessName"),placeholder:"Ingresar nombre del negocio"}),this.touched.businessName&&this.formErrors.businessName&&o("span",{key:"9646b721d08f29cde95cf78dbc1001abb934836d",class:"error-message"},this.formErrors.businessName)),o("div",{key:"d45bd7f5cca0a2ad58df815d756d60cb4b38e7f9",class:"form-group"},o("label",{key:"71734e73b70775a0c7d22b699ff4a5e3056da0b6",class:"form-label"},o("span",{key:"efe7dee11cf6da58edef0e55fd819bfef1df73e4",class:"required"},"*"),"Posición en la Empresa:"),o("input",{key:"13aacdcbe0fba647b8089bf9501b6876d8c07d62",type:"text",class:{"form-input":true,error:this.touched.position&&!!this.formErrors.position},value:this.position,onInput:this.handleInputChange("position"),placeholder:"Ingresar posición actual"}),this.touched.position&&this.formErrors.position&&o("span",{key:"a76d5d2ecc698e2d5c2213825a57d8f97f1a450f",class:"error-message"},this.formErrors.position))),o("div",{key:"6532f090127fa795374ca8de3d5e0d13f2207289",class:"form-row"},o("div",{key:"1c61342e3a30ca3b2c6e11e207a041d4d99ee031",class:"form-group"},o("label",{key:"8a9ad21933e56287f96c2ae34452852eeb578aa4",class:"form-label"},o("span",{key:"c55ed9cbacc909c8f7381d152407ad090ca8289d",class:"required"},"*"),"Dirección:"),o("input",{key:"7de7c7e9a8e765dedb2ed471dbfc172b98825d03",type:"text",class:{"form-input":true,error:this.touched.address&&!!this.formErrors.address},value:this.address,onInput:this.handleInputChange("address"),placeholder:"Ingresar dirección"}),this.touched.address&&this.formErrors.address&&o("span",{key:"79b209b7c6af74362fc467965feafd62a0a3120e",class:"error-message"},this.formErrors.address)),o("div",{key:"4dda998d4b27d4917ba9863bae3d07515f1b0f53",class:"form-group"},o("label",{key:"4f8a2929520eeeebd71c908b86e0f95693214a9d",class:"form-label"},o("span",{key:"bd125c14674af3b003fad1433883380a88117d9b",class:"required"},"*"),"Ciudad:"),o("input",{key:"29fcaf0d0009f9cd02c179f74ec23e0d8f7a6047",type:"text",class:{"form-input":true,error:this.touched.city&&!!this.formErrors.city},value:this.city,onInput:this.handleInputChange("city"),placeholder:"Ingresar ciudad"}),this.touched.city&&this.formErrors.city&&o("span",{key:"87d40db52764bbd0cadfe3442d831979f3f91a13",class:"error-message"},this.formErrors.city))),o("div",{key:"43cd8a11b5aaccd906dcce39336bf82e5404d41d",class:"form-row"},o("div",{key:"0264f0507d4e424e20ab50334ba4ab7b47b09a21",class:"form-group"},o("label",{key:"9edd52e8be58ce08fbcc2a41131eedb873118ed6",class:"form-label"},o("span",{key:"3cf11c65ee0b5dd7c8292198643d560a07cd0dae",class:"required"},"*"),"Código postal"),o("input",{key:"27d4e2778d959edbf41b929af2b9d42768d7970b",type:"text",class:{"form-input":true,error:this.touched.zipcode&&!!this.formErrors.zipcode},value:this.zipcode,onInput:this.handleInputChange("zipcode"),placeholder:"Ingresar código postal",maxLength:5}),this.touched.zipcode&&this.formErrors.zipcode&&o("span",{key:"4aa0b6d39a97406dfe46fd9552aba92f01b75575",class:"error-message"},this.formErrors.zipcode)),o("div",{key:"f8f23653a2702f1907bce04cf300f6c384e25606",class:"form-group"},o("label",{key:"539fcbb8c4272ade2545e6d3e0f192cf3f2807a4",class:"form-label"},o("span",{key:"0d343d4f6c0a8c3dd4ba8b00e2d1af87d732e969",class:"required"},"*"),"Correo electrónico:"),o("input",{key:"cc13283c527c53f54808aed96ada16f3b9daf6a7",type:"email",class:{"form-input":true,error:this.touched.email&&!!this.formErrors.email},value:this.email,onInput:this.handleInputChange("email"),placeholder:"Ingresar Correo electrónico"}),this.touched.email&&this.formErrors.email&&o("span",{key:"1b1bd7846f05f11d894550d0a0fa22d8fc8c6ba4",class:"error-message"},this.formErrors.email))),o("div",{key:"236feb774283965aaf4038e8c34b79c20467b64d",class:"form-group existing-customer"},o("label",{key:"da698ad0d7fc2c10318c061763f4523546eae390",class:"form-label"},o("span",{key:"7e05e2afc564ae6d9f0685aa959b73e4b08c6ebf",class:"required"},"*"),"Cliente existente de Claro PR:"),o("div",{key:"36d6dc1fa3276487c90c4f7dc0e57dcb2be0ac0d",class:"radio-group horizontal"},o("label",{key:"b4f5b27abf98cd81c33b8cdbcb1c9b001ed66bbe",class:"radio-label"},o("input",{key:"95b4bd907ce7c6e711fb29a6c9f564d490b53447",type:"radio",name:"existingCustomer",checked:this.existingCustomer==="yes",onChange:this.handleRadioChange("existingCustomer","yes")}),o("span",{key:"4658a0a02dad4910abcb1558418ac43005e7cbea",class:"radio-custom"}),o("span",{key:"99c0626890d48aff3e5d3c2c64bad27d774b0dcb",class:"radio-text"},"Sí")),o("label",{key:"6ac7653c1263c60adb2e11310a76bb16fff697db",class:"radio-label"},o("input",{key:"ecc6b2c0c2b293407fea5197aa999dd12527b181",type:"radio",name:"existingCustomer",checked:this.existingCustomer==="no",onChange:this.handleRadioChange("existingCustomer","no")}),o("span",{key:"2337987d047019faa419de4db247dcaadd892710",class:"radio-custom"}),o("span",{key:"59e68d9372cb5b1a8b3639cef1d6d6d73cee0c52",class:"radio-text"},"No"))),this.touched.existingCustomer&&this.formErrors.existingCustomer&&o("span",{key:"a0bd452e77948bae5aef81715346b910889ea5fa",class:"error-message"},this.formErrors.existingCustomer)),o("div",{key:"276b369032ecf9d25836be9fbe91ac806fc65c1a",class:"btn-container"},o("button",{key:"f03d5bbe83a5d16741cd63fd77234db38c340197",class:{"btn-submit":true,loading:this.isLoading},onClick:this.handleSubmit,disabled:this.isLoading},this.isLoading?o("span",{class:"btn-loading"},o("span",{class:"spinner"}),"Procesando..."):"Continuar")))))}};Ve.style=Ge();const He=()=>`@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}:host{display:block;width:100%}.ui-carousel{position:relative;width:100%;display:flex;align-items:center}.ui-carousel__viewport{flex:1;overflow:hidden;margin:0 0.5rem}@media (min-width: 768px){.ui-carousel__viewport{margin:0 1rem}}.ui-carousel__track{display:flex;transition:transform 0.3s ease-out;will-change:transform}.ui-carousel__track--dragging{transition:none;cursor:grabbing}.ui-carousel__nav{flex-shrink:0;width:40px;height:40px;border-radius:50%;background:#FFFFFF;border:2px solid #DA291C;color:#DA291C;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;z-index:2;box-shadow:0 2px 8px rgba(0, 0, 0, 0.1)}.ui-carousel__nav svg{width:20px;height:20px}.ui-carousel__nav:hover:not(:disabled){background:#DA291C;color:#FFFFFF}.ui-carousel__nav:active:not(:disabled){transform:scale(0.95)}.ui-carousel__nav--disabled{opacity:0.3;cursor:not-allowed;pointer-events:none}@media (max-width: 599px){.ui-carousel__nav{width:32px;height:32px}.ui-carousel__nav svg{width:16px;height:16px}}.ui-carousel__pagination{position:absolute;bottom:-2rem;left:50%;transform:translateX(-50%);display:flex;gap:0.5rem;z-index:2}.ui-carousel__dot{width:10px;height:10px;border-radius:50%;border:none;background:#CCCCCC;cursor:pointer;padding:0;transition:all 0.2s ease}.ui-carousel__dot:hover{background:#999999}.ui-carousel__dot--active{background:#DA291C;transform:scale(1.2)}::slotted(*){box-sizing:border-box}`;const Ye=class{constructor(e){a(this,e)}get el(){return n(this)}totalItems=0;slidesPerView=1;gap=16;showNavigation=true;showPagination=true;loop=false;autoplay=0;breakpoints=[{minWidth:0,slidesPerView:1},{minWidth:600,slidesPerView:2},{minWidth:900,slidesPerView:3},{minWidth:1200,slidesPerView:4}];currentIndex=0;currentSlidesPerView=1;isDragging=false;startX=0;translateX=0;trackEl;autoplayInterval;resizeObserver;handleTotalItemsChange(){this.currentIndex=0;this.updateTranslate()}componentDidLoad(){this.updateSlidesPerView();this.setupResizeObserver();this.startAutoplay()}disconnectedCallback(){this.stopAutoplay();if(this.resizeObserver){this.resizeObserver.disconnect()}}setupResizeObserver(){this.resizeObserver=new ResizeObserver((()=>{this.updateSlidesPerView()}));this.resizeObserver.observe(this.el)}updateSlidesPerView(){const e=this.el.offsetWidth;let t=this.slidesPerView;for(const a of this.breakpoints){if(e>=a.minWidth){t=a.slidesPerView}}this.currentSlidesPerView=t;const a=this.getMaxIndex();if(this.currentIndex>a){this.currentIndex=a}this.updateTranslate()}getMaxIndex(){return Math.max(0,this.totalItems-this.currentSlidesPerView)}goToSlide(e){const t=this.getMaxIndex();if(this.loop){if(e<0){e=t}else if(e>t){e=0}}else{e=Math.max(0,Math.min(e,t))}this.currentIndex=e;this.updateTranslate()}goToPrev=()=>{this.goToSlide(this.currentIndex-1)};goToNext=()=>{this.goToSlide(this.currentIndex+1)};updateTranslate(){if(!this.trackEl)return;const e=100/this.currentSlidesPerView;this.translateX=-(this.currentIndex*e)}startAutoplay(){if(this.autoplay>0){this.autoplayInterval=setInterval((()=>{this.goToNext()}),this.autoplay)}}stopAutoplay(){if(this.autoplayInterval){clearInterval(this.autoplayInterval)}}handleTouchStart=e=>{this.isDragging=true;this.startX=e.touches[0].clientX;this.stopAutoplay()};handleTouchMove=e=>{if(!this.isDragging)return;const t=e.touches[0].clientX;const a=t-this.startX;const r=this.el.offsetWidth/this.currentSlidesPerView;const o=a/r*(100/this.currentSlidesPerView);const i=-(this.currentIndex*(100/this.currentSlidesPerView));this.translateX=i+o};handleTouchEnd=e=>{if(!this.isDragging)return;this.isDragging=false;const t=e.changedTouches[0].clientX;const a=t-this.startX;if(Math.abs(a)>50){if(a>0){this.goToPrev()}else{this.goToNext()}}else{this.updateTranslate()}this.startAutoplay()};getPaginationDots(){const e=Math.ceil(this.totalItems/this.currentSlidesPerView);return Array.from({length:e},((e,t)=>t))}handleDotClick=e=>{this.goToSlide(e*this.currentSlidesPerView)};getCurrentDot(){return Math.floor(this.currentIndex/this.currentSlidesPerView)}render(){const e=this.loop||this.currentIndex>0;const t=this.loop||this.currentIndex<this.getMaxIndex();const a=100/this.currentSlidesPerView;return o(i,{key:"1d71ded8170a2004929ada8d1401d18fbe5dcc0c"},o("div",{key:"01d088bfc7590419709aa83850462f6b1fa6374c",class:"ui-carousel"},this.showNavigation&&o("button",{key:"a820df5e62634206f0d9f46092f84f84a724eb23",class:{"ui-carousel__nav":true,"ui-carousel__nav--prev":true,"ui-carousel__nav--disabled":!e},onClick:this.goToPrev,disabled:!e,"aria-label":"Anterior"},o("svg",{key:"7ee40aa5fa9fd0c8ac38583ebeaf0c15b8b4c49e",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("polyline",{key:"882e3d293306f869bd4d8db82a1c0a8720d83d69",points:"15 18 9 12 15 6"}))),o("div",{key:"0bc0eef0e943585d9877ae832a33bac4813c33c1",class:"ui-carousel__viewport"},o("div",{key:"8ce97b79d901f63c3e6da2e750926857d2dddbc9",class:{"ui-carousel__track":true,"ui-carousel__track--dragging":this.isDragging},ref:e=>this.trackEl=e,style:{transform:`translateX(${this.translateX}%)`,gap:`${this.gap}px`},onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},o("slot",{key:"bab876ce6a274ce53c476444694cef4e94bf39ad"}))),this.showNavigation&&o("button",{key:"286f8e40d9092b5d837566977e252c36e9fee843",class:{"ui-carousel__nav":true,"ui-carousel__nav--next":true,"ui-carousel__nav--disabled":!t},onClick:this.goToNext,disabled:!t,"aria-label":"Siguiente"},o("svg",{key:"28eabda805720b3bb8c540b4126c000db8ff7433",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("polyline",{key:"ad5d5d53067b22fe760c4e6499f027ac61105154",points:"9 18 15 12 9 6"}))),this.showPagination&&this.totalItems>this.currentSlidesPerView&&o("div",{key:"aab818d63c57cea9cfe25a91bb768f8be490cef5",class:"ui-carousel__pagination"},this.getPaginationDots().map((e=>o("button",{class:{"ui-carousel__dot":true,"ui-carousel__dot--active":e===this.getCurrentDot()},onClick:()=>this.handleDotClick(e),"aria-label":`Ir a página ${e+1}`}))))),o("style",{key:"927be72b1c508b1add09174d6402b4dfc5f1aece"},`\n            ::slotted(*) {\n              flex: 0 0 calc(${a}% - ${this.gap*(this.currentSlidesPerView-1)/this.currentSlidesPerView}px);\n              max-width: calc(${a}% - ${this.gap*(this.currentSlidesPerView-1)/this.currentSlidesPerView}px);\n            }\n          `))}static get watchers(){return{totalItems:["handleTotalItemsChange"]}}};Ye.style=He();const We=()=>`:host{display:block;width:100%}.ui-image-carousel{position:relative;width:100%}.ui-image-carousel__main{position:relative;width:100%;aspect-ratio:1;background:#F5F5F5;border-radius:0.75rem;overflow:hidden;display:flex;align-items:center;justify-content:center}.ui-image-carousel__track{display:flex;width:100%;height:100%;transition:transform 0.4s ease-out;will-change:transform}.ui-image-carousel__slide{flex:0 0 100%;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:1rem;box-sizing:border-box}.ui-image-carousel__image{max-width:100%;max-height:100%;object-fit:contain;opacity:0;transition:opacity 0.3s ease}.ui-image-carousel__image--loaded{opacity:1}.ui-image-carousel__nav{position:absolute;top:50%;transform:translateY(-50%);z-index:10;width:40px;height:40px;border-radius:50%;background:rgba(255, 255, 255, 0.95);border:1px solid #E5E5E5;color:#808080;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0, 0, 0, 0.1)}.ui-image-carousel__nav svg{width:20px;height:20px}.ui-image-carousel__nav:hover:not(:disabled){background:#DA291C;border-color:#DA291C;color:white;box-shadow:0 4px 12px rgba(218, 41, 28, 0.3)}.ui-image-carousel__nav:active:not(:disabled){transform:translateY(-50%) scale(0.95)}.ui-image-carousel__nav--prev{left:0.5rem}.ui-image-carousel__nav--next{right:0.5rem}.ui-image-carousel__nav--disabled{opacity:0.3;cursor:not-allowed;pointer-events:none}@media (max-width: 599px){.ui-image-carousel__nav{width:32px;height:32px}.ui-image-carousel__nav svg{width:16px;height:16px}}.ui-image-carousel__indicators{display:flex;justify-content:center;gap:0.5rem;margin-top:0.75rem}.ui-image-carousel__dot{width:8px;height:8px;border-radius:50%;border:none;background:#CCCCCC;cursor:pointer;padding:0;transition:all 0.2s ease}.ui-image-carousel__dot:hover{background:#999999}.ui-image-carousel__dot--active{background:#DA291C;width:24px;border-radius:4px}.ui-image-carousel__thumbnails{display:flex;justify-content:center;gap:0.5rem;margin-top:0.75rem;padding:0 0.5rem;overflow-x:auto}.ui-image-carousel__thumbnails::-webkit-scrollbar{display:none}.ui-image-carousel__thumbnails{-ms-overflow-style:none;scrollbar-width:none}.ui-image-carousel__thumbnail{flex-shrink:0;width:60px;height:60px;border-radius:0.5rem;border:2px solid #E5E5E5;background:#F5F5F5;cursor:pointer;padding:4px;overflow:hidden;transition:all 0.2s ease}.ui-image-carousel__thumbnail img{width:100%;height:100%;object-fit:contain}.ui-image-carousel__thumbnail:hover{border-color:#0097A9}.ui-image-carousel__thumbnail--active{border-color:#DA291C;box-shadow:0 0 0 2px rgba(218, 41, 28, 0.2)}@media (max-width: 599px){.ui-image-carousel__thumbnail{width:48px;height:48px}}.ui-image-carousel__placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;aspect-ratio:1;background:#F5F5F5;border-radius:0.75rem;color:#999999}.ui-image-carousel__placeholder svg{width:64px;height:64px;margin-bottom:0.5rem}.ui-image-carousel__placeholder span{font-size:0.875rem}`;const Xe=class{constructor(e){a(this,e)}images=[];loop=true;showNavigation=true;showIndicators=true;autoplayInterval=0;fallbackImage="";currentIndex=0;loadedImages=new Set;failedImages=new Set;autoplayTimer;touchStartX=0;touchEndX=0;onImagesChange(){this.currentIndex=0;this.loadedImages=new Set;this.failedImages=new Set;this.restartAutoplay()}componentDidLoad(){this.startAutoplay()}disconnectedCallback(){this.stopAutoplay()}startAutoplay(){if(this.autoplayInterval>0&&this.images.length>1){this.autoplayTimer=setInterval((()=>{this.goToNext()}),this.autoplayInterval)}}stopAutoplay(){if(this.autoplayTimer){clearInterval(this.autoplayTimer);this.autoplayTimer=null}}restartAutoplay(){this.stopAutoplay();this.startAutoplay()}goToSlide=e=>{const t=this.images.length;if(t===0)return;if(this.loop){if(e<0){e=t-1}else if(e>=t){e=0}}else{e=Math.max(0,Math.min(e,t-1))}this.currentIndex=e;this.restartAutoplay()};goToPrev=()=>{this.goToSlide(this.currentIndex-1)};goToNext=()=>{this.goToSlide(this.currentIndex+1)};handleTouchStart=e=>{this.touchStartX=e.touches[0].clientX;this.stopAutoplay()};handleTouchEnd=e=>{this.touchEndX=e.changedTouches[0].clientX;this.handleSwipe();this.startAutoplay()};handleSwipe(){const e=this.touchStartX-this.touchEndX;const t=50;if(Math.abs(e)>t){if(e>0){this.goToNext()}else{this.goToPrev()}}}handleImageLoad=e=>{this.loadedImages=new Set([...this.loadedImages,e])};handleImageError=(e,t)=>{this.failedImages=new Set([...this.failedImages,e]);if(this.fallbackImage){const e=t.target;e.src=this.fallbackImage}};getImageSrc(e){const t=this.images[e];if(!t&&this.fallbackImage){return this.fallbackImage}return t||""}render(){const e=this.images.length;const t=e>1;const a=this.loop||this.currentIndex>0;const r=this.loop||this.currentIndex<e-1;if(e===0){return o(i,null,o("div",{class:"ui-image-carousel"},o("div",{class:"ui-image-carousel__placeholder"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},o("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),o("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o("polyline",{points:"21 15 16 10 5 21"})),o("span",null,"Sin imagen"))))}return o(i,null,o("div",{class:"ui-image-carousel"},o("div",{class:"ui-image-carousel__main",onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},this.showNavigation&&t&&o("button",{class:{"ui-image-carousel__nav":true,"ui-image-carousel__nav--prev":true,"ui-image-carousel__nav--disabled":!a},onClick:this.goToPrev,disabled:!a,"aria-label":"Imagen anterior"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("polyline",{points:"15 18 9 12 15 6"}))),o("div",{class:"ui-image-carousel__track",style:{transform:`translateX(-${this.currentIndex*100}%)`}},this.images.map(((e,t)=>o("div",{class:"ui-image-carousel__slide"},o("img",{src:this.getImageSrc(t),alt:`Imagen ${t+1}`,class:{"ui-image-carousel__image":true,"ui-image-carousel__image--loaded":this.loadedImages.has(t)},onLoad:()=>this.handleImageLoad(t),onError:e=>this.handleImageError(t,e),loading:t===0?"eager":"lazy"}))))),this.showNavigation&&t&&o("button",{class:{"ui-image-carousel__nav":true,"ui-image-carousel__nav--next":true,"ui-image-carousel__nav--disabled":!r},onClick:this.goToNext,disabled:!r,"aria-label":"Imagen siguiente"},o("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},o("polyline",{points:"9 18 15 12 9 6"})))),this.showIndicators&&t&&o("div",{class:"ui-image-carousel__indicators"},this.images.map(((e,t)=>o("button",{class:{"ui-image-carousel__dot":true,"ui-image-carousel__dot--active":t===this.currentIndex},onClick:()=>this.goToSlide(t),"aria-label":`Ir a imagen ${t+1}`})))),t&&o("div",{class:"ui-image-carousel__thumbnails"},this.images.map(((e,t)=>o("button",{class:{"ui-image-carousel__thumbnail":true,"ui-image-carousel__thumbnail--active":t===this.currentIndex},onClick:()=>this.goToSlide(t)},o("img",{src:e||this.fallbackImage,alt:`Miniatura ${t+1}`,loading:"lazy"})))))))}static get watchers(){return{images:["onImagesChange"]}}};Xe.style=We();export{le as fixed_service_flow,pe as step_catalogue,fe as step_confirmation,xe as step_contract,Te as step_form,Me as step_location,Re as step_order_summary,je as step_payment,$e as step_plans,Je as step_product_detail,Ve as step_shipping,Ye as ui_carousel,Xe as ui_image_carousel};
//# sourceMappingURL=p-7f5ee9bf.entry.js.map