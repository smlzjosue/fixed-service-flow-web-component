import{r as e,h as r,H as t}from"./p-CYQeQM-n.js";import{c as a}from"./p-Cu1hlKnH.js";import"./p-CNBAjIjF.js";const o=()=>`:host{display:block;width:100%;min-height:100%;background-color:#FAFAFA}.step-order-summary{width:100%;max-width:1200px;margin:0 auto;padding:1.5rem}.header{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.header .btn-back{display:flex;align-items:center;gap:0.25rem;background:none;border:none;color:#0097A9;font-size:0.875rem;cursor:pointer;padding:0.25rem;transition:color 0.2s}.header .btn-back svg{width:20px;height:20px}.header .btn-back:hover{color:rgb(0, 105.4319526627, 118);text-decoration:underline}.header__title-group{display:flex;align-items:center;gap:1rem;flex:1}.header .title{font-size:1.75rem;font-weight:700;color:#1A1A1A;margin:0}.header .item-count{font-size:0.875rem;color:#666666;background:#E5E5E5;padding:0.25rem 0.5rem;border-radius:9999px;font-weight:500}.state-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center;background:white;border-radius:0.75rem;padding:2rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05)}.state-container .state-icon{width:80px;height:80px;color:#999999;margin-bottom:1rem}.state-container h3{font-size:1.5rem;color:#4D4D4D;margin:0 0 0.5rem 0}.state-container p{color:#808080;margin:0 0 1.5rem 0}.state-container--error .state-icon{color:#DA291C}.state-container--error p{color:#DA291C}.state-container--empty .state-icon{color:#CCCCCC}.spinner{width:48px;height:48px;border:4px solid #E5E5E5;border-top-color:#DA291C;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem}.spinner-small{display:inline-block;width:16px;height:16px;border:2px solid rgba(255, 255, 255, 0.3);border-top-color:currentColor;border-radius:50%;animation:spin 0.8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.btn-retry,.btn-back-catalog{background:#DA291C;color:white;border:none;padding:0.5rem 1.5rem;border-radius:9999px;cursor:pointer;font-weight:600;transition:background 0.2s}.btn-retry:hover,.btn-back-catalog:hover{background:rgb(172.8048780488, 32.5, 22.1951219512)}.btn-back-catalog{background:#0097A9}.btn-back-catalog:hover{background:rgb(0, 105.4319526627, 118)}.content-layout{display:grid;grid-template-columns:1fr 380px;gap:1.5rem}@media (max-width: 992px){.content-layout{grid-template-columns:1fr}}.products-column{display:flex;flex-direction:column;gap:1rem}.summary-column{display:flex;flex-direction:column;gap:1rem}@media (max-width: 992px){.summary-column{order:-1}}.product-card{background:white;border-radius:0.75rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05);overflow:hidden}.product-card__badge{display:flex;gap:0.25rem;padding:0.5rem 1rem;background:#FAFAFA;border-bottom:1px solid #F5F5F5}.product-card__main{display:grid;grid-template-columns:100px 1fr auto auto;gap:1rem;padding:1rem;align-items:center}@media (max-width: 768px){.product-card__main{grid-template-columns:80px 1fr auto;grid-template-rows:auto auto}}.product-card__main--plan{grid-template-columns:60px 1fr auto auto}@media (max-width: 768px){.product-card__main--plan{grid-template-columns:60px 1fr auto}}.product-card__image{width:100px;height:100px;background:#FAFAFA;border-radius:0.5rem;display:flex;align-items:center;justify-content:center;overflow:hidden}@media (max-width: 768px){.product-card__image{width:80px;height:80px}}.product-card__image img{max-width:90%;max-height:90%;object-fit:contain}.product-card__image--plan{width:60px;height:60px;background:linear-gradient(135deg, #DA291C 0%, rgb(150.2073170732, 28.25, 19.2926829268) 100%);border-radius:0.5rem}.product-card__image--plan img{filter:brightness(0) invert(1);width:40px;height:40px}.product-card__details{display:flex;flex-direction:column;gap:0.25rem}.product-card__pricing{display:flex;flex-direction:column;align-items:flex-end;gap:0.25rem}@media (max-width: 768px){.product-card__pricing{grid-column:2/-1;flex-direction:row;justify-content:space-between;align-items:center;width:100%}}.product-card__actions{display:flex;align-items:center}.product-card--plan .product-card__main{grid-template-columns:60px 1fr auto auto}.section-header{display:flex;align-items:center;gap:0.5rem;padding:1rem 1.5rem;border-bottom:1px solid #F5F5F5}.section-header__icon{width:36px;height:36px;border-radius:0.5rem;display:flex;align-items:center;justify-content:center}.section-header__icon svg{width:20px;height:20px}.section-header__text{display:flex;align-items:center;gap:0.5rem;flex:1}.section-header__label{font-size:0.875rem;font-weight:700;letter-spacing:0.5px}.section-header__badge{font-size:0.75rem;font-weight:600;padding:2px 0.5rem;border-radius:9999px;text-transform:uppercase;letter-spacing:0.5px}.section-header--equipment{background:linear-gradient(135deg, rgba(0, 151, 169, 0.08) 0%, rgba(0, 151, 169, 0.02) 100%);border-left:4px solid #0097A9}.section-header--equipment .section-header__icon{background:#0097A9;color:white}.section-header--equipment .section-header__label{color:#0097A9}.section-header--equipment .section-header__badge{background:rgba(218, 41, 28, 0.15);color:#DA291C}.section-header--plan{background:linear-gradient(135deg, rgba(218, 41, 28, 0.08) 0%, rgba(218, 41, 28, 0.02) 100%);border-left:4px solid #DA291C}.section-header--plan .section-header__icon{background:#DA291C;color:white}.section-header--plan .section-header__label{color:#DA291C}.badge{display:inline-flex;align-items:center;padding:2px 0.5rem;border-radius:9999px;font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}.badge--equipment{background:rgba(0, 151, 169, 0.15);color:#0097A9}.badge--main{background:rgba(218, 41, 28, 0.15);color:#DA291C}.badge--plan{background:rgba(68, 175, 105, 0.15);color:#44AF69}.product-name{font-size:1rem;font-weight:600;color:#1A1A1A;margin:0;line-height:1.3}.product-specs{display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center}.spec-item{display:flex;align-items:center;gap:4px}.spec-label{font-size:0.875rem;color:#666666}.plan-type{font-size:0.875rem;color:#808080}.financing-info{display:flex;flex-direction:column;gap:2px;margin-top:0.25rem;padding-top:0.25rem;border-top:1px dashed #E5E5E5}.financing-label{font-size:0.75rem;font-weight:600;color:#4D4D4D}.financing-detail{font-size:0.75rem;color:#808080}.color-circle{display:inline-block;width:16px;height:16px;border-radius:50%;border:2px solid #E5E5E5;box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1)}.storage-badge{display:inline-flex;align-items:center;padding:2px 0.25rem;background:#F5F5F5;border-radius:0.25rem;font-size:0.75rem;font-weight:600;color:#4D4D4D}.qty-label{font-size:0.875rem;color:#808080}.price-financing,.price-single{text-align:right}@media (max-width: 768px){.price-financing,.price-single{text-align:left}}.price-monthly{font-size:1.25rem;font-weight:700;color:#DA291C}.price-period{font-size:0.875rem;color:#808080}.price-installments{display:block;font-size:0.75rem;color:#808080;margin-top:2px}.price-total{font-size:1.25rem;font-weight:700;color:#1A1A1A}.price-full{display:flex;gap:0.25rem;font-size:0.875rem}.price-full .label{color:#808080}.price-full .value{font-weight:600;color:#4D4D4D}.btn-action{background:none;border:none;cursor:pointer;padding:0.25rem;transition:all 0.2s;display:flex;align-items:center;justify-content:center}.btn-action svg{width:20px;height:20px}.btn-action--delete{color:#999999;border-radius:0.5rem}.btn-action--delete:hover:not(:disabled){color:#DA291C;background:rgba(218, 41, 28, 0.1)}.btn-action--delete:disabled{opacity:0.5;cursor:not-allowed}.btn-action--delete-small{color:#999999}.btn-action--delete-small svg{width:16px;height:16px}.btn-action--delete-small:hover:not(:disabled){color:#DA291C}.btn-action--delete-small:disabled{opacity:0.5;cursor:not-allowed}.plan-section{border-top:none}.plan-section .section-header--plan{margin:0;border-radius:0;border-left-width:0;padding-left:calc(1.5rem + 4px);border-top:1px dashed #E5E5E5}.plan-section__content{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;background:linear-gradient(to right, rgba(218, 41, 28, 0.03), white)}.plan-section .plan-label{font-size:0.75rem;color:#808080;text-transform:uppercase;letter-spacing:0.5px;font-weight:600}.plan-section .plan-info{flex:1;display:flex;flex-direction:column;gap:2px}.plan-section .plan-name{font-size:0.875rem;font-weight:600;color:#333333}.plan-section .plan-type{font-size:0.75rem;color:#808080}.plan-section .plan-price{display:flex;align-items:baseline;gap:2px}.plan-section .plan-price .price{font-size:1.25rem;font-weight:700;color:#DA291C}.plan-section .plan-price .period{font-size:0.875rem;color:#808080}.summary-card{background:white;border-radius:0.75rem;padding:1.5rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05)}.summary-card__title{display:flex;align-items:center;gap:0.5rem;font-size:0.875rem;font-weight:600;color:#4D4D4D;margin:0 0 1rem 0;text-transform:uppercase;letter-spacing:0.5px}.summary-card__title svg{width:18px;height:18px;color:#999999}.promo-section .promo-input-group{display:flex;gap:0.5rem}.promo-section .promo-input{flex:1;height:44px;border:1px solid #CCCCCC;border-radius:0.5rem;padding:0 1rem;font-size:0.875rem;transition:border-color 0.2s}.promo-section .promo-input:focus{outline:none;border-color:#0097A9}.promo-section .promo-input.error{border-color:#DA291C}.promo-section .promo-input.success{border-color:#44AF69}.promo-section .promo-input:disabled{background:#F5F5F5;cursor:not-allowed}.promo-section .promo-button{height:44px;padding:0 1.5rem;background:#E5E5E5;color:#4D4D4D;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap;min-width:90px;display:flex;align-items:center;justify-content:center}.promo-section .promo-button:hover:not(:disabled){background:#CCCCCC}.promo-section .promo-button:disabled{opacity:0.5;cursor:not-allowed}.promo-section .promo-message{display:flex;align-items:center;gap:0.25rem;font-size:0.875rem;margin-top:0.5rem}.promo-section .promo-message svg{width:14px;height:14px;flex-shrink:0}.promo-section .promo-message.error{color:#DA291C}.promo-section .promo-message.success{color:#44AF69}.payment-summary{padding:0;overflow:hidden}.rent-section{background:linear-gradient(135deg, #DA291C 0%, rgb(172.8048780488, 32.5, 22.1951219512) 100%);padding:1.5rem;color:white}.rent-section .rent-row{display:flex;justify-content:space-between;align-items:center}.rent-section .rent-label{font-size:1rem;font-weight:500}.rent-section .rent-value{font-size:1.75rem;font-weight:700}.rent-section .rent-note{font-size:0.75rem;opacity:0.8;margin:0.25rem 0 0 0}.payment-breakdown{padding:1.5rem}.payment-breakdown .detail-rows{margin-bottom:1rem}.detail-row{display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0;border-bottom:1px solid #F5F5F5}.detail-row:last-child{border-bottom:none}.detail-row .label{font-size:0.875rem;color:#666666}.detail-row .value{font-size:0.875rem;font-weight:500;color:#1A1A1A}.detail-row .value--free{color:#44AF69;font-weight:700;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.5px}.detail-row--discount .label{color:#44AF69}.detail-row--discount .value{color:#44AF69;font-weight:600}.detail-row--shipping{background:rgba(68, 175, 105, 0.05);margin:0 -1.5rem;padding:0.5rem 1.5rem;border-bottom:none}.total-section{background:#FAFAFA;margin:0 -1.5rem -1.5rem;padding:1.5rem;border-top:2px solid #E5E5E5}.total-row{display:flex;justify-content:space-between;align-items:center}.total-label{font-size:1rem;font-weight:600;color:#1A1A1A}.total-value{font-size:1.75rem;font-weight:700;color:#DA291C}.terms-section{background:white;border-radius:0.75rem;padding:1rem 1.5rem;box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05)}.terms-checkbox{display:flex;align-items:flex-start;gap:0.5rem;cursor:pointer}.terms-checkbox input[type=checkbox]{display:none}.terms-checkbox .checkmark{width:22px;height:22px;border:2px solid #CCCCCC;border-radius:0.25rem;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all 0.2s;background:white}.terms-checkbox .checkmark svg{width:14px;height:14px;stroke:white;opacity:0;transition:opacity 0.2s}.terms-checkbox input[type=checkbox]:checked+.checkmark{background:#0097A9;border-color:#0097A9}.terms-checkbox input[type=checkbox]:checked+.checkmark svg{opacity:1}.terms-checkbox .terms-text{font-size:0.875rem;color:#666666;line-height:1.5}.terms-checkbox .terms-text a{color:#0097A9;text-decoration:none;font-weight:500}.terms-checkbox .terms-text a:hover{text-decoration:underline}.btn-proceed{display:flex;align-items:center;justify-content:center;gap:0.5rem;width:100%;height:56px;background:#DA291C;color:white;border:none;border-radius:9999px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s;box-shadow:0 4px 12px rgba(218, 41, 28, 0.3)}.btn-proceed svg{width:20px;height:20px;transition:transform 0.2s}.btn-proceed:hover:not(:disabled){background:rgb(172.8048780488, 32.5, 22.1951219512);box-shadow:0 6px 16px rgba(218, 41, 28, 0.4)}.btn-proceed:hover:not(:disabled) svg{transform:translateX(4px)}.btn-proceed:disabled,.btn-proceed.disabled{background:#CCCCCC;box-shadow:none;cursor:not-allowed}.btn-proceed:disabled svg,.btn-proceed.disabled svg{transform:none}`;const i=class{constructor(r){e(this,r)}onNext;onBack;cart=null;isLoading=true;error=null;promoCode="";isApplyingPromo=false;promoError=null;promoSuccess=false;termsAccepted=false;deletingItemId=null;componentWillLoad(){this.loadCart()}async loadCart(){this.isLoading=true;this.error=null;try{const e=await a.getCart();if(e.hasError){this.error=e.message||"Error al cargar el carrito";return}this.cart=e;console.log("[StepOrderSummary] Cart loaded:",this.cart);console.log("[StepOrderSummary] Products:",this.cart.products?.map((e=>({cartId:e.cartId,name:e.productName,equipment:e.equipment,home:e.home,plan:e.plan,parentCartId:e.parentCartId,installments:e.installments,price:e.decPrice}))))}catch(e){console.error("[StepOrderSummary] Error:",e);this.error="Error de conexión al cargar el carrito"}finally{this.isLoading=false}}handlePromoCodeChange=e=>{this.promoCode=e.target.value.toUpperCase();this.promoError=null;this.promoSuccess=false};handleApplyPromo=async()=>{if(!this.promoCode.trim()){this.promoError="Ingresa un código promocional";return}this.isApplyingPromo=true;this.promoError=null;this.promoSuccess=false;try{a.storeDiscountCoupon(this.promoCode);const e=await a.getCart(this.promoCode);if(e.hasError){this.promoError="Código promocional inválido";a.clearDiscountCoupon();return}this.cart=e;this.promoSuccess=true;console.log("[StepOrderSummary] Promo applied successfully")}catch(e){console.error("[StepOrderSummary] Promo error:",e);this.promoError="Error al aplicar el código";a.clearDiscountCoupon()}finally{this.isApplyingPromo=false}};handleRemoveItem=async e=>{this.deletingItemId=e.cartId;try{const r=await a.deleteItem(e.cartId,e.productId);if(r.hasError){console.error("[StepOrderSummary] Delete error:",r.message);return}await this.loadCart()}catch(e){console.error("[StepOrderSummary] Error removing item:",e)}finally{this.deletingItemId=null}};handleTermsChange=e=>{this.termsAccepted=e.target.checked};handleProceed=()=>{if(!this.termsAccepted){return}this.onNext?.()};formatPrice(e){return`$${(e||0).toFixed(2)}`}getItemCount(){return this.cart?.products?.reduce(((e,r)=>e+r.qty),0)||0}getEquipmentItems(){if(!this.cart?.products)return[];console.log("[StepOrderSummary] Classifying products...");return this.cart.products.filter((e=>{console.log("[StepOrderSummary] Item:",e.productName,{catalogName:e.catalogName,equipment:e.equipment,home:e.home,plan:e.plan,parentCartId:e.parentCartId,installments:e.installments});if(e.catalogName==="Catalogo de Planes Fijos"){console.log("[StepOrderSummary] -> PLAN (catalogName: Catalogo de Planes Fijos)");return false}if(e.plan){console.log("[StepOrderSummary] -> PLAN (explicit plan flag)");return false}if(e.parentCartId&&e.parentCartId>0){console.log("[StepOrderSummary] -> PLAN (has parentCartId)");return false}if(e.home&&e.internet){console.log("[StepOrderSummary] -> PLAN (home + internet flags)");return false}if(e.home&&e.installments>0){console.log("[StepOrderSummary] -> EQUIPMENT (home with installments)");return true}if(e.home&&(!e.installments||e.installments===0)){console.log("[StepOrderSummary] -> PLAN (home without installments = monthly plan)");return false}if(e.equipment||e.accesory){console.log("[StepOrderSummary] -> EQUIPMENT");return true}console.log("[StepOrderSummary] -> UNKNOWN (not classified)");return false}))}getPlanItems(){if(!this.cart?.products)return[];return this.cart.products.filter((e=>{if(e.catalogName==="Catalogo de Planes Fijos")return true;if(e.plan)return true;if(e.parentCartId&&e.parentCartId>0)return true;if(e.home&&e.internet)return true;if(e.home&&(!e.installments||e.installments===0))return true;return false}))}renderEquipmentItem(e,t){const a=this.deletingItemId===e.cartId;const o=this.getPlanItems().find((r=>r.parentCartId===e.cartId));return r("div",{class:"product-card",key:`equip-${e.cartId}`},r("div",{class:"section-header section-header--equipment"},r("div",{class:"section-header__icon"},r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),r("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"}))),r("div",{class:"section-header__text"},r("span",{class:"section-header__label"},"EQUIPO"),t===0&&r("span",{class:"section-header__badge"},"Principal"))),r("div",{class:"product-card__main"},r("div",{class:"product-card__image"},r("img",{src:e.imgUrl||e.detailImage||"/assets/placeholder.png",alt:e.productName,onError:e=>e.target.src="/assets/placeholder.png"})),r("div",{class:"product-card__details"},r("h3",{class:"product-name"},e.productName),r("div",{class:"product-specs"},e.colorName&&r("div",{class:"spec-item"},r("span",{class:"color-circle",style:{backgroundColor:e.webColor||"#ccc"}}),r("span",{class:"spec-label"},e.colorName)),e.storageName&&e.storage&&r("div",{class:"spec-item"},r("span",{class:"storage-badge"},e.storage,"GB")),r("div",{class:"spec-item"},r("span",{class:"qty-label"},"Cant: ",e.qty))),e.installments>1&&r("div",{class:"financing-info"},r("span",{class:"financing-label"},"Financiamiento de Equipo:"),r("span",{class:"financing-detail"},"Término de pago (",e.installments," meses)"))),r("div",{class:"product-card__pricing"},e.installments>1?r("div",{class:"price-financing"},r("span",{class:"price-monthly"},this.formatPrice(e.decTotalPerMonth||e.decPrice)),r("span",{class:"price-period"},"/mes")):r("div",{class:"price-single"},r("span",{class:"price-total"},this.formatPrice(e.decTotalPrice||e.decPrice)))),r("div",{class:"product-card__actions"},r("button",{class:"btn-action btn-action--delete",onClick:()=>this.handleRemoveItem(e),disabled:a,title:"Eliminar"},a?r("span",{class:"spinner-small"}):r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),r("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),r("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))))),o&&this.renderAssociatedPlan(o))}renderAssociatedPlan(e){const t=this.deletingItemId===e.cartId;return r("div",{class:"plan-section"},r("div",{class:"section-header section-header--plan"},r("div",{class:"section-header__icon"},r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}))),r("div",{class:"section-header__text"},r("span",{class:"section-header__label"},"TU PLAN"))),r("div",{class:"plan-section__content"},r("div",{class:"plan-info"},r("span",{class:"plan-name"},e.productName),r("span",{class:"plan-type"},"Plan de Internet")),r("div",{class:"plan-price"},r("span",{class:"price"},this.formatPrice(e.decPrice||e.decTotalPerMonth)),r("span",{class:"period"},"/mes")),r("button",{class:"btn-action btn-action--delete-small",onClick:()=>this.handleRemoveItem(e),disabled:t,title:"Eliminar plan"},t?r("span",{class:"spinner-small"}):r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})))))}renderStandalonePlan(e){const t=this.deletingItemId===e.cartId;return r("div",{class:"product-card product-card--plan",key:`plan-${e.cartId}`},r("div",{class:"section-header section-header--plan"},r("div",{class:"section-header__icon"},r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}))),r("div",{class:"section-header__text"},r("span",{class:"section-header__label"},"PLAN DE INTERNET"))),r("div",{class:"product-card__main product-card__main--plan"},r("div",{class:"product-card__image product-card__image--plan"},r("img",{src:e.imgUrl||e.detailImage||"/assets/placeholder.png",alt:e.productName,onError:e=>e.target.src="/assets/placeholder.png"})),r("div",{class:"product-card__details"},r("h3",{class:"product-name"},e.productName),r("span",{class:"plan-type"},"Renta mensual")),r("div",{class:"product-card__pricing"},r("div",{class:"price-financing"},r("span",{class:"price-monthly"},this.formatPrice(e.decPrice||e.decTotalPerMonth)),r("span",{class:"price-period"},"/mes"))),r("div",{class:"product-card__actions"},r("button",{class:"btn-action btn-action--delete",onClick:()=>this.handleRemoveItem(e),disabled:t,title:"Eliminar"},t?r("span",{class:"spinner-small"}):r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}))))))}renderPromoCode(){return r("div",{class:"summary-card promo-section"},r("h4",{class:"summary-card__title"},r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),r("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})),"Cupón de descuento"),r("div",{class:"promo-input-group"},r("input",{type:"text",class:{"promo-input":true,error:!!this.promoError,success:this.promoSuccess},placeholder:"Ingresa tu código",value:this.promoCode,onInput:this.handlePromoCodeChange,disabled:this.isApplyingPromo}),r("button",{class:"promo-button",onClick:this.handleApplyPromo,disabled:this.isApplyingPromo||!this.promoCode.trim()},this.isApplyingPromo?r("span",{class:"spinner-small"}):"Aplicar")),this.promoError&&r("span",{class:"promo-message error"},r("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14"},r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"12",y1:"8",x2:"12",y2:"12",stroke:"white","stroke-width":"2"}),r("line",{x1:"12",y1:"16",x2:"12.01",y2:"16",stroke:"white","stroke-width":"2"})),this.promoError),this.promoSuccess&&r("span",{class:"promo-message success"},r("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14"},r("circle",{cx:"12",cy:"12",r:"10"}),r("polyline",{points:"9 12 11 14 15 10",fill:"none",stroke:"white","stroke-width":"2"})),"¡Cupón aplicado!"))}renderPaymentSummary(){if(!this.cart)return null;const e=this.cart.subTotalPerMonth||0;const t=this.cart.subTotalPrice||0;const a=this.cart.totalTax||0;const o=this.cart.totalPrice||0;const i=this.cart.totalDownPayment||0;const n=0;return r("div",{class:"summary-card payment-summary"},e>0&&r("div",{class:"rent-section"},r("div",{class:"rent-row"},r("span",{class:"rent-label"},"Renta mensual"),r("span",{class:"rent-value"},this.formatPrice(e))),r("p",{class:"rent-note"},"*No incluye cargos estatales y federales")),r("div",{class:"payment-breakdown"},r("h4",{class:"summary-card__title"},r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),r("line",{x1:"1",y1:"10",x2:"23",y2:"10"})),"Detalle del pago"),r("div",{class:"detail-rows"},t>0&&r("div",{class:"detail-row"},r("span",{class:"label"},"Subtotal equipos"),r("span",{class:"value"},this.formatPrice(t))),i>0&&r("div",{class:"detail-row"},r("span",{class:"label"},"Pago inicial"),r("span",{class:"value"},this.formatPrice(i))),n>0,r("div",{class:"detail-row"},r("span",{class:"label"},"Cargos estatales y federales"),r("span",{class:"value"},this.formatPrice(a))),r("div",{class:"detail-row detail-row--shipping"},r("span",{class:"label"},"Costo de envío"),r("span",{class:"value value--free"},"GRATIS"))),r("div",{class:"total-section"},r("div",{class:"total-row"},r("span",{class:"total-label"},"Paga hoy"),r("span",{class:"total-value"},this.formatPrice(o))))))}renderTermsCheckbox(){return r("div",{class:"terms-section"},r("label",{class:"terms-checkbox"},r("input",{type:"checkbox",checked:this.termsAccepted,onChange:this.handleTermsChange}),r("span",{class:"checkmark"},r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},r("polyline",{points:"20 6 9 17 4 12"}))),r("span",{class:"terms-text"},"Acepto los ",r("a",{href:"#",onClick:e=>e.preventDefault()},"términos y condiciones")," de Claro Puerto Rico")))}render(){const e=this.getItemCount();const a=e>0;const o=a&&this.termsAccepted;const i=this.getEquipmentItems();const n=this.getPlanItems().filter((e=>!e.parentCartId));return r(t,{key:"3abe1887588a3e4f97cbf4c679e20f0a3ba44fff"},r("div",{key:"ca41bf751a7675eb7aba559857de4b7b4c3fbd93",class:"step-order-summary"},r("header",{key:"5a0853a4941d0f9ebd1de7c9610e983e8c2a3baa",class:"header"},r("button",{key:"81a16fd16c4f54778a402887eef0681a738516ae",class:"btn-back",onClick:this.onBack},r("svg",{key:"dd9de340f67043dbcf54d4645d28afd5b1bb1041",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{key:"52cf802777248dbd44beeb34ef5853cad602125c",d:"M19 12H5M12 19l-7-7 7-7"})),r("span",{key:"557cd0a660acabc115c5edf8e7361fb193fc1d80"},"Regresar")),r("div",{key:"b61a21c52a71c22ecb91fb9f3005d8e63f8d0c46",class:"header__title-group"},r("h1",{key:"693146eb5adf4f8972f3e69511a82197ec2e61fd",class:"title"},"Resumen de tu orden"),a&&r("span",{key:"bc071f4fd5450e83391767f8d82df06dd39410e5",class:"item-count"},e," ",e===1?"artículo":"artículos"))),this.isLoading&&r("div",{key:"5ca8dfe50c75bb9bc3c4472a9040b9b0265a3a1c",class:"state-container"},r("div",{key:"a30fdb1c5f5d55c03496f04f813b74551b72d900",class:"spinner"}),r("p",{key:"6dd891d6fbdc9ba956ea6651b58629fb2a9dae57"},"Cargando tu carrito...")),this.error&&!this.isLoading&&r("div",{key:"85367ba7a43237c4a6f8ad255d791887adde1d8b",class:"state-container state-container--error"},r("svg",{key:"ef6da962735ee70f4e347c750c82e16b4c0760c7",class:"state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},r("circle",{key:"66e48bf406df05c2bb86acc267b41fe1b62f8128",cx:"12",cy:"12",r:"10"}),r("line",{key:"3c843382840baf6ccec0447189b5649ed097d616",x1:"12",y1:"8",x2:"12",y2:"12"}),r("line",{key:"df6c205a4f02f1605a16163fa2942aeab5852157",x1:"12",y1:"16",x2:"12.01",y2:"16"})),r("p",{key:"666d65f1fe4ee6dccd230a9cdee4ed53dd45c7c7"},this.error),r("button",{key:"c1cd746f8df35bc1f4865bacb09bab35bd78941d",class:"btn-retry",onClick:()=>this.loadCart()},"Reintentar")),!this.isLoading&&!this.error&&!a&&r("div",{key:"97333ec4be4f45595d50ecd5a41f1959ab3bb1e5",class:"state-container state-container--empty"},r("svg",{key:"629da836e8993681141ea3ad4137ba3fd4d50a35",class:"state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},r("circle",{key:"d16b18a377122582a6a88af1954ca9f38d1fa897",cx:"9",cy:"21",r:"1"}),r("circle",{key:"7205ee49e236e262b93aff3a4c8b8b81b1e7b165",cx:"20",cy:"21",r:"1"}),r("path",{key:"ef61bd1b64220ea0dc90187638f7f312ef6864a7",d:"M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"})),r("h3",{key:"13f094957dedd6126c2eebb1ed3c0df5c77ba8b9"},"Tu carrito está vacío"),r("p",{key:"8020712484c96ff6cadb2e1b5fad083ee2bb3600"},"Agrega productos para continuar con tu compra"),r("button",{key:"9f8def2d955c46a177814e44512106ae62512f26",class:"btn-back-catalog",onClick:this.onBack},"Ir al catálogo")),!this.isLoading&&!this.error&&a&&r("div",{key:"4a19998535b9589b27be6efc33ea7c6d9c7d58cc",class:"content-layout"},r("div",{key:"0d7a55c43ba23de3378b8e3712948071b7837dbb",class:"products-column"},i.map(((e,r)=>this.renderEquipmentItem(e,r))),n.map((e=>this.renderStandalonePlan(e)))),r("div",{key:"29bd1e001a1dcd73426eecabc7473c733ef5ac6d",class:"summary-column"},this.renderPromoCode(),this.renderPaymentSummary(),this.renderTermsCheckbox(),r("button",{key:"f61ed09edb1efc58e0dc4cf528b4cb78578c781d",class:{"btn-proceed":true,disabled:!o},onClick:this.handleProceed,disabled:!o},r("span",{key:"f54947b1d65d3aef58d570b66b4792d5fa5db24c"},"Procesar orden"),r("svg",{key:"4fd90a8198d4906719b46b65190e459bb5530d59",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},r("path",{key:"188e38697b0522cc861acb4d3a8f25c7d7440805",d:"M5 12h14M12 5l7 7-7 7"})))))))}};i.style=o();export{i as step_order_summary};
//# sourceMappingURL=p-27b7f05b.entry.js.map