{"file":"p-CEShBykW.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement"],"sources":["src/services/coverage.service.ts","src/services/maps.service.ts","src/components/steps/step-location/step-location.scss?tag=step-location&encapsulation=shadow","src/components/steps/step-location/step-location.tsx"],"sourcesContent":["// ============================================\n// COVERAGE SERVICE - Location Coverage Validation\n// Fixed Service Flow Web Component\n// ============================================\n\nimport { httpService } from './http.service';\nimport { tokenService } from './token.service';\nimport { CoverageResponse, LocationData, SERVICE_MESSAGES } from '../store/interfaces';\n\n// ------------------------------------------\n// COVERAGE SERVICE CLASS\n// ------------------------------------------\n\nclass CoverageService {\n  // ------------------------------------------\n  // VALIDATE COVERAGE\n  // ------------------------------------------\n\n  /**\n   * Validates coverage for a given location\n   * Endpoint: POST api/Catalogue/getInternetPlans\n   */\n  async validateCoverage(latitude: number, longitude: number): Promise<CoverageResponse> {\n    // Ensure token exists before making the call\n    await tokenService.ensureToken();\n\n    const response = await httpService.post<CoverageResponse>('api/Catalogue/getInternetPlans', {\n      latitud: String(latitude),\n      longitud: String(longitude),\n    });\n\n    return response;\n  }\n\n  // ------------------------------------------\n  // CHECK COVERAGE AND BUILD LOCATION DATA\n  // ------------------------------------------\n\n  /**\n   * Checks coverage and returns structured location data\n   */\n  async checkCoverage(\n    latitude: number,\n    longitude: number,\n    address: string,\n    city: string,\n    zipCode: string,\n  ): Promise<LocationData> {\n    const response = await this.validateCoverage(latitude, longitude);\n\n    // Check for errors\n    if (response.hasError) {\n      return {\n        latitude,\n        longitude,\n        address,\n        city,\n        zipCode,\n        serviceType: '',\n        serviceMessage: SERVICE_MESSAGES.NO_COVERAGE,\n        isValid: false,\n      };\n    }\n\n    // Get the priority service\n    const serviceType = response.priorityService;\n\n    // Find the service message\n    let serviceMessage = SERVICE_MESSAGES.NO_COVERAGE;\n    if (response.attributes && response.attributes.length > 0) {\n      const priorityAttribute = response.attributes.find(\n        attr => attr.servicE_NAME === serviceType,\n      );\n      if (priorityAttribute) {\n        serviceMessage = priorityAttribute.servicE_MESSAGE;\n      }\n    }\n\n    // Check for PR LIMIT (out of coverage range)\n    if (serviceType === 'PR LIMIT') {\n      console.log('[CoverageService] PR LIMIT detected - out of coverage range');\n      return {\n        latitude,\n        longitude,\n        address,\n        city,\n        zipCode,\n        serviceType: 'PR LIMIT',\n        serviceMessage: SERVICE_MESSAGES.PR_LIMIT,\n        isValid: false,\n      };\n    }\n\n    // Check for CLARO HOGAR (wireless internet option)\n    if (serviceType.toUpperCase() === 'CLARO HOGAR') {\n      console.log('[CoverageService] CLARO HOGAR detected - wireless internet option');\n      return {\n        latitude,\n        longitude,\n        address,\n        city,\n        zipCode,\n        serviceType: 'CLARO HOGAR',\n        serviceMessage: serviceMessage || SERVICE_MESSAGES.CLARO_HOGAR,\n        isValid: true, // Valid but different flow (catalogue)\n      };\n    }\n\n    // Validate that we have a valid fiber/DSL service type\n    const validServiceTypes = ['GPON', 'VRAD'];\n    const isValid = validServiceTypes.includes(serviceType);\n\n    if (!isValid) {\n      return {\n        latitude,\n        longitude,\n        address,\n        city,\n        zipCode,\n        serviceType: '',\n        serviceMessage: SERVICE_MESSAGES.NO_COVERAGE,\n        isValid: false,\n      };\n    }\n\n    console.log('[CoverageService] Returning valid coverage:', serviceType);\n    return {\n      latitude,\n      longitude,\n      address,\n      city,\n      zipCode,\n      serviceType,\n      serviceMessage,\n      isValid: true,\n    };\n  }\n\n  // ------------------------------------------\n  // GET SERVICE TYPE DISPLAY NAME\n  // ------------------------------------------\n\n  /**\n   * Gets a user-friendly display name for the service type\n   */\n  getServiceDisplayName(serviceType: string): string {\n    const displayNames: Record<string, string> = {\n      GPON: 'Fibra Óptica',\n      VRAD: 'Internet DSL',\n      'CLARO HOGAR': 'Internet Inalámbrico',\n    };\n    return displayNames[serviceType] || serviceType;\n  }\n\n  // ------------------------------------------\n  // CHECK IF SERVICE TYPE REQUIRES SPECIAL HANDLING\n  // ------------------------------------------\n\n  /**\n   * Checks if the service type is CLARO HOGAR (requires different flow)\n   */\n  isClaroHogar(serviceType: string): boolean {\n    return serviceType.toLowerCase() === 'claro hogar';\n  }\n}\n\n// ------------------------------------------\n// SINGLETON EXPORT\n// ------------------------------------------\n\nexport const coverageService = new CoverageService();\nexport default coverageService;\n","// ============================================\n// MAPS SERVICE - Google Maps Integration\n// Fixed Service Flow Web Component\n// ============================================\n\nimport { GOOGLE_MAPS_CONFIG } from '../utils/constants';\n\n// ------------------------------------------\n// TYPES\n// ------------------------------------------\n\nexport interface Coordinates {\n  lat: number;\n  lng: number;\n}\n\nexport interface GeocodeResult {\n  address: string;\n  city: string;\n  zipCode: string;\n  coordinates: Coordinates;\n  formattedAddress: string;\n}\n\nexport interface PlaceResult {\n  placeId: string;\n  description: string;\n  mainText: string;\n  secondaryText: string;\n}\n\n// Extend Window interface for Google Maps\ndeclare global {\n  interface Window {\n    google?: typeof google;\n  }\n}\n\n// ------------------------------------------\n// MAPS SERVICE CLASS\n// ------------------------------------------\n\nclass MapsService {\n  private apiKey: string = '';\n  private isLoaded: boolean = false;\n  private loadPromise: Promise<void> | null = null;\n  private map: google.maps.Map | null = null;\n  private marker: google.maps.marker.AdvancedMarkerElement | null = null;\n  private autocomplete: google.maps.places.Autocomplete | null = null;\n  private infoWindow: google.maps.InfoWindow | null = null;\n\n  // ------------------------------------------\n  // INITIALIZATION\n  // ------------------------------------------\n\n  /**\n   * Sets the Google Maps API key\n   */\n  setApiKey(apiKey: string): void {\n    this.apiKey = apiKey;\n  }\n\n  /**\n   * Loads the Google Maps JavaScript API\n   */\n  async loadGoogleMaps(): Promise<void> {\n    if (this.isLoaded) {\n      return;\n    }\n\n    if (this.loadPromise) {\n      return this.loadPromise;\n    }\n\n    if (!this.apiKey) {\n      throw new Error('Google Maps API key is required');\n    }\n\n    this.loadPromise = new Promise((resolve, reject) => {\n      // Check if already loaded\n      if (window.google?.maps) {\n        this.isLoaded = true;\n        resolve();\n        return;\n      }\n\n      const script = document.createElement('script');\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${this.apiKey}&libraries=places,marker&v=weekly`;\n      script.async = true;\n      script.defer = true;\n\n      script.onload = () => {\n        this.isLoaded = true;\n        resolve();\n      };\n\n      script.onerror = () => {\n        reject(new Error('Failed to load Google Maps API'));\n      };\n\n      document.head.appendChild(script);\n    });\n\n    return this.loadPromise;\n  }\n\n  /**\n   * Checks if Google Maps is loaded\n   */\n  isGoogleMapsLoaded(): boolean {\n    return this.isLoaded && !!window.google?.maps;\n  }\n\n  // ------------------------------------------\n  // MAP MANAGEMENT\n  // ------------------------------------------\n\n  /**\n   * Initializes the map in a container element\n   */\n  async initMap(container: HTMLElement, options?: Partial<google.maps.MapOptions>): Promise<google.maps.Map> {\n    await this.loadGoogleMaps();\n\n    const defaultOptions: google.maps.MapOptions = {\n      center: GOOGLE_MAPS_CONFIG.DEFAULT_CENTER,\n      zoom: GOOGLE_MAPS_CONFIG.DEFAULT_ZOOM,\n      mapTypeId: GOOGLE_MAPS_CONFIG.DEFAULT_MAP_TYPE as google.maps.MapTypeId,\n      mapId: GOOGLE_MAPS_CONFIG.MAP_ID,\n      disableDefaultUI: false,\n      zoomControl: true,\n      mapTypeControl: true,\n      mapTypeControlOptions: {\n        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,\n        position: google.maps.ControlPosition.LEFT_TOP,\n        mapTypeIds: ['roadmap', 'satellite'],\n      },\n      streetViewControl: false,\n      fullscreenControl: false,\n    };\n\n    this.map = new google.maps.Map(container, {\n      ...defaultOptions,\n      ...options,\n    });\n\n    return this.map;\n  }\n\n  /**\n   * Gets the current map instance\n   */\n  getMap(): google.maps.Map | null {\n    return this.map;\n  }\n\n  /**\n   * Centers the map on given coordinates\n   */\n  centerMap(coordinates: Coordinates): void {\n    if (this.map) {\n      this.map.setCenter(coordinates);\n    }\n  }\n\n  /**\n   * Sets the map zoom level\n   */\n  setZoom(zoom: number): void {\n    if (this.map) {\n      this.map.setZoom(zoom);\n    }\n  }\n\n  // ------------------------------------------\n  // MARKER MANAGEMENT\n  // ------------------------------------------\n\n  /**\n   * Adds or updates a marker on the map\n   * @param coordinates - The marker position\n   * @param verticalOffset - Pixels to shift the view up (positive = marker appears lower)\n   */\n  async setMarker(coordinates: Coordinates, verticalOffset: number = 0): Promise<void> {\n    if (!this.map) {\n      throw new Error('Map not initialized');\n    }\n\n    // Remove existing marker\n    if (this.marker) {\n      this.marker.map = null;\n    }\n\n    // Create new advanced marker\n    const { AdvancedMarkerElement } = await google.maps.importLibrary('marker') as google.maps.MarkerLibrary;\n\n    this.marker = new AdvancedMarkerElement({\n      map: this.map,\n      position: coordinates,\n      gmpDraggable: true,\n    });\n\n    // Center map on marker\n    this.map.setCenter(coordinates);\n\n    // Apply vertical offset to make marker appear lower on screen\n    // Negative y value pans the map up, making the marker appear lower\n    if (verticalOffset > 0) {\n      this.map.panBy(0, -verticalOffset);\n    }\n  }\n\n  /**\n   * Adds a click listener to the map (like TEL: this.map.addListener(\"click\", ...))\n   * When user clicks on map, it triggers geocoding at that location\n   */\n  addMapClickListener(onMapClick: (coordinates: Coordinates) => void): void {\n    if (!this.map) {\n      console.warn('Map not initialized');\n      return;\n    }\n\n    this.map.addListener('click', (e: google.maps.MapMouseEvent) => {\n      if (e.latLng) {\n        const coordinates: Coordinates = {\n          lat: e.latLng.lat(),\n          lng: e.latLng.lng(),\n        };\n        onMapClick(coordinates);\n      }\n    });\n  }\n\n  /**\n   * Clears the marker from the map (like TEL: clear() method)\n   */\n  clear(): void {\n    this.removeMarker();\n  }\n\n  /**\n   * Gets the current marker position\n   */\n  getMarkerPosition(): Coordinates | null {\n    if (!this.marker?.position) {\n      return null;\n    }\n\n    const position = this.marker.position as google.maps.LatLngLiteral;\n    return {\n      lat: position.lat,\n      lng: position.lng,\n    };\n  }\n\n  /**\n   * Removes the marker from the map\n   */\n  removeMarker(): void {\n    if (this.marker) {\n      this.marker.map = null;\n      this.marker = null;\n    }\n  }\n\n  // ------------------------------------------\n  // INFOWINDOW (like TEL pattern)\n  // ------------------------------------------\n\n  /**\n   * Shows an InfoWindow at the marker position with custom HTML content\n   * Like TEL: this.infowindow.open(this.map, this.marker)\n   */\n  showInfoWindow(content: string, onContinueClick?: () => void): void {\n    if (!this.map || !this.marker) {\n      console.warn('Map or marker not initialized');\n      return;\n    }\n\n    // Close existing InfoWindow\n    this.closeInfoWindow();\n\n    // Override Google Maps InfoWindow styles - wider modal with rounded corners\n    const popStyle = `<style>\n      .gm-ui-hover-effect { display: none !important; }\n      .gm-style .gm-style-iw-c { padding: 0px !important; max-width: 400px !important; border-radius: 16px !important; overflow: visible !important; max-height: none !important; }\n      .gm-style .gm-style-iw-d { padding: 0px !important; overflow: visible !important; max-width: 400px !important; max-height: none !important; overflow-y: visible !important; }\n      .gm-style .gm-style-iw-d > div { overflow: visible !important; }\n      .gm-style .gm-style-iw-tc { display: none !important; }\n      .gm-style-iw { max-width: 400px !important; overflow: visible !important; max-height: none !important; }\n      .gm-style-iw-chr { display: none !important; }\n      .gm-style .gm-style-iw-d::-webkit-scrollbar { display: none !important; }\n    </style>`;\n\n    // Create InfoWindow with wider design\n    this.infoWindow = new google.maps.InfoWindow({\n      content: popStyle + content,\n      maxWidth: 400,\n    });\n\n    // Open InfoWindow at marker position\n    this.infoWindow.open({\n      anchor: this.marker,\n      map: this.map,\n    });\n\n    // Adjust InfoWindow styles after DOM is ready\n    this.infoWindow.addListener('domready', () => {\n      setTimeout(() => {\n        const iwc = document.querySelector('.gm-style-iw-c') as HTMLElement;\n        const iwd = document.querySelector('.gm-style-iw-d') as HTMLElement;\n\n        if (iwc) {\n          iwc.style.setProperty('max-width', '400px', 'important');\n          iwc.style.setProperty('padding', '0', 'important');\n          iwc.style.setProperty('border-radius', '16px', 'important');\n          iwc.style.setProperty('box-shadow', '0 4px 20px rgba(0,0,0,0.15)', 'important');\n        }\n        if (iwd) {\n          iwd.style.setProperty('max-width', '400px', 'important');\n          iwd.style.setProperty('overflow', 'visible', 'important');\n        }\n      }, 50);\n    });\n\n    // Store callback reference for external access\n    if (onContinueClick) {\n      (window as any).__infoWindowContinueCallback = onContinueClick;\n    }\n  }\n\n  /**\n   * Closes the InfoWindow\n   */\n  closeInfoWindow(): void {\n    if (this.infoWindow) {\n      this.infoWindow.close();\n      this.infoWindow = null;\n    }\n  }\n\n  /**\n   * Gets the current InfoWindow instance\n   */\n  getInfoWindow(): google.maps.InfoWindow | null {\n    return this.infoWindow;\n  }\n\n  // ------------------------------------------\n  // AUTOCOMPLETE\n  // ------------------------------------------\n\n  /**\n   * Initializes address autocomplete on an input element\n   */\n  async initAutocomplete(\n    inputElement: HTMLInputElement,\n    onPlaceSelected: (result: GeocodeResult) => void,\n  ): Promise<void> {\n    await this.loadGoogleMaps();\n\n    // Restrict to Puerto Rico\n    const options: google.maps.places.AutocompleteOptions = {\n      componentRestrictions: { country: 'pr' },\n      fields: ['address_components', 'geometry', 'formatted_address'],\n      types: ['address'],\n    };\n\n    this.autocomplete = new google.maps.places.Autocomplete(inputElement, options);\n\n    this.autocomplete.addListener('place_changed', () => {\n      const place = this.autocomplete?.getPlace();\n\n      if (!place?.geometry?.location) {\n        return;\n      }\n\n      const result = this.parseAddressComponents(place);\n      onPlaceSelected(result);\n\n      // Update map and marker if map exists\n      if (this.map) {\n        this.centerMap(result.coordinates);\n        this.setMarker(result.coordinates);\n      }\n    });\n  }\n\n  /**\n   * Parses Google Places address components\n   */\n  private parseAddressComponents(place: google.maps.places.PlaceResult): GeocodeResult {\n    const components = place.address_components || [];\n    let streetNumber = '';\n    let route = '';\n    let city = '';\n    let zipCode = '';\n\n    for (const component of components) {\n      const type = component.types[0];\n\n      switch (type) {\n        case 'street_number':\n          streetNumber = component.long_name;\n          break;\n        case 'route':\n          route = component.long_name;\n          break;\n        case 'locality':\n        case 'administrative_area_level_2':\n          city = city || component.long_name;\n          break;\n        case 'postal_code':\n          zipCode = component.long_name;\n          break;\n      }\n    }\n\n    const address = [streetNumber, route].filter(Boolean).join(' ');\n    const location = place.geometry?.location;\n\n    return {\n      address,\n      city,\n      zipCode,\n      coordinates: {\n        lat: location?.lat() || 0,\n        lng: location?.lng() || 0,\n      },\n      formattedAddress: place.formatted_address || '',\n    };\n  }\n\n  // ------------------------------------------\n  // GEOCODING\n  // ------------------------------------------\n\n  /**\n   * Geocodes an address to coordinates\n   */\n  async geocodeAddress(address: string): Promise<GeocodeResult | null> {\n    await this.loadGoogleMaps();\n\n    const geocoder = new google.maps.Geocoder();\n\n    return new Promise((resolve) => {\n      geocoder.geocode(\n        {\n          address,\n          componentRestrictions: { country: 'pr' },\n        },\n        (results, status) => {\n          if (status === 'OK' && results && results[0]) {\n            const place = results[0];\n            const result = this.parseGeocoderResult(place);\n            resolve(result);\n          } else {\n            resolve(null);\n          }\n        },\n      );\n    });\n  }\n\n  /**\n   * Reverse geocodes coordinates to an address\n   */\n  async reverseGeocode(coordinates: Coordinates): Promise<GeocodeResult | null> {\n    await this.loadGoogleMaps();\n\n    const geocoder = new google.maps.Geocoder();\n\n    return new Promise((resolve) => {\n      geocoder.geocode(\n        { location: coordinates },\n        (results, status) => {\n          if (status === 'OK' && results && results[0]) {\n            const place = results[0];\n            const result = this.parseGeocoderResult(place);\n            resolve(result);\n          } else {\n            resolve(null);\n          }\n        },\n      );\n    });\n  }\n\n  /**\n   * Parses geocoder result to GeocodeResult\n   */\n  private parseGeocoderResult(result: google.maps.GeocoderResult): GeocodeResult {\n    const components = result.address_components || [];\n    let streetNumber = '';\n    let route = '';\n    let city = '';\n    let zipCode = '';\n\n    for (const component of components) {\n      const type = component.types[0];\n\n      switch (type) {\n        case 'street_number':\n          streetNumber = component.long_name;\n          break;\n        case 'route':\n          route = component.long_name;\n          break;\n        case 'locality':\n        case 'administrative_area_level_2':\n          city = city || component.long_name;\n          break;\n        case 'postal_code':\n          zipCode = component.long_name;\n          break;\n      }\n    }\n\n    const address = [streetNumber, route].filter(Boolean).join(' ');\n    const location = result.geometry.location;\n\n    return {\n      address,\n      city,\n      zipCode,\n      coordinates: {\n        lat: location.lat(),\n        lng: location.lng(),\n      },\n      formattedAddress: result.formatted_address,\n    };\n  }\n\n  // ------------------------------------------\n  // GEOLOCATION\n  // ------------------------------------------\n\n  /**\n   * Gets the user's current location\n   */\n  async getCurrentLocation(): Promise<Coordinates> {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by this browser'));\n        return;\n      }\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          resolve({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n        },\n        (error) => {\n          let message = 'Error getting location';\n\n          switch (error.code) {\n            case error.PERMISSION_DENIED:\n              message = 'Location permission denied';\n              break;\n            case error.POSITION_UNAVAILABLE:\n              message = 'Location information unavailable';\n              break;\n            case error.TIMEOUT:\n              message = 'Location request timed out';\n              break;\n          }\n\n          reject(new Error(message));\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0,\n        },\n      );\n    });\n  }\n\n  /**\n   * Gets current location and reverse geocodes it\n   */\n  async getCurrentLocationWithAddress(): Promise<GeocodeResult | null> {\n    const coordinates = await this.getCurrentLocation();\n    return this.reverseGeocode(coordinates);\n  }\n\n  // ------------------------------------------\n  // CLEANUP\n  // ------------------------------------------\n\n  /**\n   * Cleans up map resources\n   */\n  destroy(): void {\n    this.closeInfoWindow();\n    this.removeMarker();\n    this.autocomplete = null;\n    this.map = null;\n  }\n}\n\n// ------------------------------------------\n// SINGLETON EXPORT\n// ------------------------------------------\n\nexport const mapsService = new MapsService();\nexport default mapsService;\n","// ============================================\n// STEP LOCATION - Styles\n// ============================================\n\n@import '../../../global/variables';\n@import '../../../global/mixins';\n\n:host {\n  display: block;\n}\n\n.step-location {\n  width: 100%;\n  position: relative;\n\n  // ------------------------------------------\n  // VALIDATING OVERLAY\n  // ------------------------------------------\n\n  &__validating-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(255, 255, 255, 0.9);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n    animation: fadeIn 0.2s ease-out;\n  }\n\n  &__validating-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: $spacing-4;\n    padding: $spacing-6;\n    background: $color-white;\n    border-radius: 16px;\n    box-shadow: $shadow-xl;\n  }\n\n  &__validating-spinner {\n    width: 48px;\n    height: 48px;\n    border: 4px solid $color-gray-200;\n    border-top-color: $color-primary;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  &__validating-text {\n    margin: 0;\n    font-size: 18px;\n    font-weight: $font-weight-semibold;\n    color: $color-text-primary;\n  }\n\n  // ------------------------------------------\n  // HEADER\n  // ------------------------------------------\n\n  &__header {\n    text-align: center;\n    margin-bottom: $spacing-4;\n  }\n\n  &__title {\n    @include font-heading-3;\n    color: $color-text-primary;\n    font-weight: $font-weight-regular;\n\n    &--highlight {\n      color: $color-primary;\n      font-weight: $font-weight-bold;\n    }\n  }\n\n  // ------------------------------------------\n  // MAP CONTAINER\n  // ------------------------------------------\n\n  &__map-container {\n    position: relative;\n    border-radius: $border-radius-lg;\n    overflow: hidden;\n    box-shadow: $shadow-card;\n  }\n\n  // ------------------------------------------\n  // CONTROLS\n  // ------------------------------------------\n\n  &__controls {\n    position: absolute;\n    top: 3.5rem;\n    left: $spacing-3;\n    right: $spacing-3;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 0;\n\n    // Mobile: barra de búsqueda ocupa casi todo el ancho\n    @include breakpoint-up(sm) {\n      left: 120px;\n      right: 50px;\n    }\n\n    @include breakpoint-up(md) {\n      top: 3.5rem;\n      left: 130px;\n      right: 60px;\n    }\n  }\n\n  &__input-group {\n    display: flex;\n    align-items: center;\n    background: $color-white;\n    border-radius: 10px 10px 0 0;\n    overflow: hidden;\n    border: 1px solid $color-gray-200;\n    border-bottom: none;\n  }\n\n  &__location-container {\n    background: $color-white;\n    border-radius: 0 0 10px 10px;\n    box-shadow: $shadow-md;\n    padding: 0.2rem 0.75rem;\n    border: 1px solid $color-gray-200;\n    border-top: 1px solid $color-gray-200;\n  }\n\n  &__input-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding-left: $spacing-3;\n    color: $color-gray-400;\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n  }\n\n  &__input {\n    flex: 1;\n    padding: $spacing-3 $spacing-3;\n    border: none;\n    font-size: $font-size-sm;\n    outline: none;\n    background: transparent;\n    min-width: 0;\n\n    &::placeholder {\n      color: $color-text-placeholder;\n    }\n  }\n\n  &__btn-validate {\n    padding: $spacing-3 $spacing-5;\n    background: $color-primary;\n    color: $color-white;\n    border: none;\n    font-size: $font-size-sm;\n    font-weight: $font-weight-semibold;\n    cursor: pointer;\n    transition: background-color $transition-fast;\n    white-space: nowrap;\n    min-width: 100px;\n\n    &:hover:not(:disabled) {\n      background: darken($color-primary, 8%);\n    }\n\n    &:disabled {\n      opacity: 0.6;\n      cursor: not-allowed;\n    }\n\n    &--loading {\n      pointer-events: none;\n    }\n\n    &-content {\n      display: inline-flex;\n      align-items: center;\n      gap: $spacing-2;\n    }\n  }\n\n  &__btn-spinner {\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    border-top-color: $color-white;\n    border-radius: 50%;\n    animation: btn-spin 0.8s linear infinite;\n  }\n\n  @keyframes btn-spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  &__btn-location {\n    display: inline-flex;\n    align-items: center;\n    gap: $spacing-1;\n    padding: $spacing-1 0;\n    background: transparent;\n    color: $color-secondary;\n    border: none;\n    border-radius: 0;\n    font-size: $font-size-xs;\n    font-weight: $font-weight-medium;\n    cursor: pointer;\n    box-shadow: none;\n    transition: opacity $transition-fast;\n    white-space: nowrap;\n    align-self: flex-start;\n\n    &:hover:not(:disabled) {\n      opacity: 0.8;\n    }\n\n    &:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    &-icon {\n      width: 14px;\n      height: 14px;\n    }\n  }\n\n  // ------------------------------------------\n  // MAP\n  // ------------------------------------------\n\n  &__map {\n    position: relative;\n    width: 100%;\n    height: 400px;\n    background: $color-gray-200;\n\n    @include breakpoint-up(md) {\n      height: 500px;\n    }\n  }\n\n  &__map-canvas {\n    width: 100%;\n    height: 100%;\n  }\n\n  &__map-loading {\n    @include flex-column-center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: $color-gray-100;\n    color: $color-text-secondary;\n    z-index: 5;\n\n    p {\n      @include font-body;\n      margin-top: $spacing-4;\n    }\n  }\n\n  &__map-error {\n    @include flex-column-center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: $color-gray-100;\n    color: $color-text-secondary;\n    z-index: 5;\n    padding: $spacing-4;\n    text-align: center;\n\n    p {\n      @include font-body;\n      color: $color-error;\n    }\n\n    small {\n      margin-top: $spacing-2;\n      font-size: $font-size-xs;\n    }\n  }\n\n  &__spinner {\n    width: 40px;\n    height: 40px;\n    border: 3px solid $color-gray-300;\n    border-top-color: $color-secondary;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  &__map-placeholder {\n    @include flex-column-center;\n    width: 100%;\n    height: 100%;\n    color: $color-text-secondary;\n\n    p {\n      @include font-body;\n    }\n\n    small {\n      margin-top: $spacing-2;\n      font-size: $font-size-xs;\n    }\n  }\n\n  // ------------------------------------------\n  // MODAL\n  // ------------------------------------------\n\n  &__modal-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: $z-index-modal-backdrop;\n    @include flex-center;\n  }\n\n  &__modal {\n    position: relative;\n    width: 90%;\n    max-width: 400px;\n    background: $color-white;\n    border-radius: $border-radius-lg;\n    padding: $spacing-8 $spacing-6;\n    text-align: center;\n    box-shadow: $shadow-xl;\n\n    &--error {\n      .step-location__modal-error-bar {\n        display: block;\n      }\n    }\n  }\n\n  &__modal-close {\n    position: absolute;\n    top: $spacing-3;\n    right: $spacing-3;\n    width: 32px;\n    height: 32px;\n    background: transparent;\n    border: none;\n    font-size: $font-size-xl;\n    color: $color-text-secondary;\n    cursor: pointer;\n    line-height: 1;\n\n    &:hover {\n      color: $color-text-primary;\n    }\n  }\n\n  &__modal-error-bar {\n    display: none;\n    background: $color-error;\n    color: $color-white;\n    padding: $spacing-2 $spacing-4;\n    margin: -$spacing-8 (-$spacing-6) $spacing-4;\n    font-weight: $font-weight-semibold;\n  }\n\n  &__modal-success-icon {\n    width: 60px;\n    height: 60px;\n    margin: 0 auto $spacing-4;\n    color: $color-success;\n\n    svg {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  &__modal-message {\n    @include font-body;\n    color: $color-text-primary;\n    margin-bottom: $spacing-6;\n  }\n\n  &__modal-btn {\n    @include button-secondary;\n    min-width: 150px;\n  }\n}\n","// ============================================\n// STEP LOCATION - Location/Map Step Component\n// Fixed Service Flow Web Component\n// ============================================\n\nimport { Component, Prop, State, Element, h, Host } from '@stencil/core';\nimport { flowActions } from '../../../store/flow.store';\nimport { coverageService, mapsService } from '../../../services';\nimport { LocationData } from '../../../store/interfaces';\nimport { ERROR_MESSAGES } from '../../../utils/constants';\nimport type { Coordinates, GeocodeResult } from '../../../services/maps.service';\n\n// Offset to shift the map view so marker appears lower (InfoWindow visible above search bar)\nconst MAP_VERTICAL_OFFSET = 150;\n\n@Component({\n  tag: 'step-location',\n  styleUrl: 'step-location.scss',\n  shadow: true,\n})\nexport class StepLocation {\n  // ------------------------------------------\n  // ELEMENT\n  // ------------------------------------------\n\n  @Element() el: HTMLElement;\n\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() googleMapsKey: string;\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  @State() address: string = '';\n  @State() isValidating: boolean = false;\n  @State() isLoadingMap: boolean = true;\n  @State() isGettingLocation: boolean = false;\n  @State() locationData: LocationData | null = null;\n  @State() mapError: string | null = null;\n  @State() currentCoordinates: Coordinates | null = null;\n  @State() geocodeResult: GeocodeResult | null = null;\n  @State() showErrorModal: boolean = false;\n  @State() errorMessage: string = '';\n\n  // ------------------------------------------\n  // REFS\n  // ------------------------------------------\n\n  private mapContainer: HTMLDivElement;\n  private addressInput: HTMLInputElement;\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  async componentDidLoad() {\n    await this.initializeMap();\n  }\n\n  disconnectedCallback() {\n    mapsService.destroy();\n  }\n\n  // ------------------------------------------\n  // MAP INITIALIZATION\n  // ------------------------------------------\n\n  private async initializeMap() {\n    if (!this.googleMapsKey) {\n      this.mapError = 'Google Maps API key no configurada';\n      this.isLoadingMap = false;\n      return;\n    }\n\n    try {\n      mapsService.setApiKey(this.googleMapsKey);\n\n      // Initialize map\n      await mapsService.initMap(this.mapContainer);\n\n      // Initialize autocomplete on address input\n      if (this.addressInput) {\n        await mapsService.initAutocomplete(this.addressInput, (result) => {\n          this.handlePlaceSelected(result);\n        });\n      }\n\n      // Add map click listener (like TEL: this.map.addListener(\"click\", ...))\n      mapsService.addMapClickListener(async (coordinates) => {\n        await this.handleMapClick(coordinates);\n      });\n\n      this.isLoadingMap = false;\n    } catch (error) {\n      console.error('Error initializing map:', error);\n      this.mapError = 'No podemos abrir la validación de cobertura en este momento. Intenta nuevamente más tarde.';\n      this.isLoadingMap = false;\n    }\n  }\n\n  // ------------------------------------------\n  // HANDLERS\n  // ------------------------------------------\n\n  private handleAddressChange = (e: Event) => {\n    this.address = (e.target as HTMLInputElement).value;\n  };\n\n  /**\n   * Handles keypress on address input (like TEL: inputText.addEventListener(\"keypress\", ...))\n   * Triggers validation when Enter is pressed\n   */\n  private handleKeyPress = (e: KeyboardEvent) => {\n    if (e.key === 'Enter' || e.code === 'Enter' || e.code === 'NumpadEnter') {\n      e.preventDefault();\n      this.handleValidate();\n    }\n  };\n\n  /**\n   * Handles click on map (like TEL: this.map.addListener(\"click\", ...))\n   * Reverse geocodes the clicked location and validates coverage\n   */\n  private handleMapClick = async (coordinates: Coordinates) => {\n    // Clear previous marker\n    mapsService.clear();\n\n    // Reverse geocode the clicked location\n    const result = await mapsService.reverseGeocode(coordinates);\n\n    if (result) {\n      this.geocodeResult = result;\n      this.address = result.formattedAddress || result.address;\n      this.currentCoordinates = result.coordinates;\n\n      // Update map marker with offset so InfoWindow appears below search bar\n      mapsService.setMarker(result.coordinates, MAP_VERTICAL_OFFSET);\n    } else {\n      // If reverse geocode fails, still set coordinates\n      this.currentCoordinates = coordinates;\n      mapsService.setMarker(coordinates, MAP_VERTICAL_OFFSET);\n    }\n\n    // Auto-validate coverage (like TEL does on map click)\n    await this.handleValidate();\n  };\n\n  private handlePlaceSelected = (result: GeocodeResult) => {\n    this.geocodeResult = result;\n    this.address = result.formattedAddress || result.address;\n    this.currentCoordinates = result.coordinates;\n\n    // Update map marker\n    mapsService.setMarker(result.coordinates);\n    mapsService.centerMap(result.coordinates);\n  };\n\n  private handleValidate = async () => {\n    if (!this.currentCoordinates && !this.address.trim()) {\n      return;\n    }\n\n    this.isValidating = true;\n\n    try {\n      let coords = this.currentCoordinates;\n      let city = this.geocodeResult?.city || '';\n      let zipCode = this.geocodeResult?.zipCode || '';\n\n      // If we don't have coordinates, try to geocode the address\n      if (!coords && this.address.trim()) {\n        const geocoded = await mapsService.geocodeAddress(this.address);\n        if (geocoded) {\n          coords = geocoded.coordinates;\n          city = geocoded.city;\n          zipCode = geocoded.zipCode;\n          this.currentCoordinates = coords;\n          this.geocodeResult = geocoded;\n\n          // Update map with offset so InfoWindow appears below search bar\n          mapsService.setMarker(coords, MAP_VERTICAL_OFFSET);\n        } else {\n          this.errorMessage = 'No se pudo encontrar la dirección. Por favor, intenta con otra dirección.';\n          this.showErrorModal = true;\n          this.isValidating = false;\n          return;\n        }\n      }\n\n      if (!coords) {\n        this.errorMessage = 'Por favor, ingresa una dirección válida.';\n        this.showErrorModal = true;\n        this.isValidating = false;\n        return;\n      }\n\n      // Validate coverage with API\n      const location = await coverageService.checkCoverage(\n        coords.lat,\n        coords.lng,\n        this.address || this.geocodeResult?.address || '',\n        city,\n        zipCode,\n      );\n\n      this.locationData = location;\n\n      // Determine coverage result type\n      if (location.isValid) {\n        if (location.serviceType.toUpperCase() === 'CLARO HOGAR') {\n          // CLARO HOGAR - show \"Fuera de área\" with options\n          this.showCoverageInfoWindow(location.serviceMessage, 'claro-hogar');\n        } else {\n          // GPON/VRAD - show success\n          this.showCoverageInfoWindow(location.serviceMessage, 'success');\n        }\n      } else if (location.serviceType === 'PR LIMIT') {\n        // PR LIMIT - show out of range message (no continue option)\n        this.showCoverageInfoWindow(location.serviceMessage, 'pr-limit');\n      } else {\n        // Generic no coverage error\n        this.showCoverageInfoWindow(ERROR_MESSAGES.NO_COVERAGE, 'no-coverage');\n      }\n    } catch (error) {\n      console.error('Coverage validation error:', error);\n      this.errorMessage = ERROR_MESSAGES.COVERAGE_ERROR;\n      this.showErrorModal = true;\n    } finally {\n      this.isValidating = false;\n    }\n  };\n\n  /**\n   * Shows coverage result in InfoWindow on the marker\n   * New design based on capturas 1.png and 2.png\n   * @param message - The message to display\n   * @param resultType - 'success' | 'claro-hogar' | 'pr-limit' | 'no-coverage'\n   */\n  private showCoverageInfoWindow(message: string, resultType: 'success' | 'claro-hogar' | 'pr-limit' | 'no-coverage'): void {\n    // SVG icon from covertura.svg (torre de transmisión con señal WiFi) - only for success\n    const coverageIcon = `<svg width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M4.58325 19.5815L10.9873 4.5376\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M17.875 19.582L11.4707 4.53809\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M7.06067 14.8589L16.9086 18.3631\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M15.3981 14.8547L5.55017 18.3589\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M8.31006 11.8936L15.1257 14.3188\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M9.56519 8.60864L13.8695 11.4782\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M14.0804 11.8904L7.26477 14.3156\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M12.913 8.60864L8.60864 11.4782\" stroke=\"black\" stroke-width=\"0.956522\" stroke-linecap=\"round\"/>\n      <path d=\"M11.2291 4.67082C11.8228 4.67082 12.3041 4.18951 12.3041 3.59579C12.3041 3.00206 11.8228 2.52075 11.2291 2.52075C10.6354 2.52075 10.1541 3.00206 10.1541 3.59579C10.1541 4.18951 10.6354 4.67082 11.2291 4.67082Z\" fill=\"#FC4646\" stroke=\"black\" stroke-width=\"0.956522\"/>\n      <path d=\"M15.5457 5.24186C16.2939 4.22535 16.2939 2.70912 15.5457 1.69263\" stroke=\"#FC4646\" stroke-width=\"0.840492\" stroke-linecap=\"round\"/>\n      <path d=\"M17.1342 6.11041C18.2923 4.62825 18.2923 2.32834 17.1342 0.846191\" stroke=\"#FC4646\" stroke-width=\"0.840492\" stroke-linecap=\"round\"/>\n      <path d=\"M13.9615 4.3841C14.3 3.84461 14.3 3.10638 13.9615 2.56689\" stroke=\"#FC4646\" stroke-width=\"0.840492\" stroke-linecap=\"round\"/>\n      <path d=\"M6.68811 5.24186C5.93984 4.22535 5.93984 2.70912 6.68811 1.69263\" stroke=\"#FC4646\" stroke-width=\"0.840492\" stroke-linecap=\"round\"/>\n      <path d=\"M5.09949 6.11041C3.94132 4.62825 3.94132 2.32834 5.09949 0.846191\" stroke=\"#FC4646\" stroke-width=\"0.840492\" stroke-linecap=\"round\"/>\n      <path d=\"M8.27209 4.3841C7.93361 3.84461 7.93361 3.10638 8.27209 2.56689\" stroke=\"#FC4646\" stroke-width=\"0.840492\" stroke-linecap=\"round\"/>\n    </svg>`;\n\n    // Configure content based on result type\n    let titleHtml: string;\n    let displayMessage: string;\n    let buttonHtml: string;\n\n    switch (resultType) {\n      case 'success':\n        // GPON/VRAD - Full coverage\n        titleHtml = `<span style=\"flex-shrink: 0; margin-top: 2px;\">${coverageIcon}</span>\n           <span>¡Tu área posee nuestro servicio!</span>`;\n        displayMessage = message;\n        buttonHtml = `<button\n          onclick=\"if(window.__infoWindowContinueCallback) window.__infoWindowContinueCallback();\"\n          style=\"\n            background: #DA291C;\n            color: #ffffff;\n            border: none;\n            padding: 12px 36px;\n            font-size: 14px;\n            font-weight: 600;\n            border-radius: 50px;\n            cursor: pointer;\n            min-width: 150px;\n          \"\n        >¡Lo quiero!</button>`;\n        break;\n\n      case 'claro-hogar':\n        // CLARO HOGAR - Wireless internet option\n        // TODO: Flujo CLARO HOGAR deshabilitado temporalmente. Restaurar cuando se habilite.\n        titleHtml = `<span style=\"color: #DA291C; font-weight: 700;\">¡Fuera de área!</span>`;\n        // displayMessage = 'Escoge entre nuestra selección de modems.'; // Original - restaurar cuando se habilite\n        displayMessage = 'No poseemos servicios en tu área'; // Provisional\n        // TODO: Restaurar botón cuando se habilite el flujo CLARO HOGAR\n        /*\n        buttonHtml = `<button\n          onclick=\"if(window.__infoWindowContinueCallback) window.__infoWindowContinueCallback();\"\n          style=\"\n            background: #DA291C;\n            color: #ffffff;\n            border: none;\n            padding: 12px 36px;\n            font-size: 14px;\n            font-weight: 600;\n            border-radius: 50px;\n            cursor: pointer;\n            min-width: 150px;\n          \"\n        >Ver opciones</button>`;\n        */\n        buttonHtml = ''; // Botón oculto temporalmente\n        break;\n\n      case 'pr-limit':\n        // PR LIMIT - Out of coverage range (no continue option)\n        titleHtml = `<span style=\"color: #DA291C; font-weight: 700;\">¡Fuera de área!</span>`;\n        displayMessage = message;\n        buttonHtml = ''; // No action button for PR LIMIT\n        break;\n\n      case 'no-coverage':\n      default:\n        // Generic no coverage\n        titleHtml = `<span style=\"color: #DA291C; font-weight: 700;\">¡Fuera de área!</span>`;\n        displayMessage = message;\n        buttonHtml = ''; // No action button\n        break;\n    }\n\n    const infoWindowContent = `\n      <div style=\"\n        font-family: 'Open Sans', Arial, sans-serif;\n        width: 100%;\n        min-width: 340px;\n        box-sizing: border-box;\n        background: #ffffff;\n        padding: 16px 20px 20px 20px;\n        text-align: center;\n        position: relative;\n        border-radius: 16px;\n      \">\n        <!-- Close button -->\n        <button\n          onclick=\"if(window.__infoWindowCloseCallback) window.__infoWindowCloseCallback();\"\n          style=\"\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            width: 24px;\n            height: 24px;\n            background: transparent;\n            border: none;\n            font-size: 18px;\n            color: #666;\n            cursor: pointer;\n            line-height: 1;\n            padding: 0;\n          \"\n        >×</button>\n\n        <!-- Title -->\n        <div style=\"\n          margin: 0 0 10px 0;\n          padding-right: 20px;\n          font-size: 15px;\n          font-weight: 700;\n          color: #333;\n          line-height: 1.4;\n          display: flex;\n          align-items: flex-start;\n          justify-content: center;\n          gap: 6px;\n        \">\n          ${titleHtml}\n        </div>\n\n        <!-- Message -->\n        <p style=\"\n          margin: 0 ${buttonHtml ? '0 16px 0' : '0 0 0'};\n          font-size: 13px;\n          color: #666;\n          line-height: 1.4;\n        \">${displayMessage}</p>\n\n        ${buttonHtml}\n      </div>\n    `;\n\n    // Set up close callback\n    (window as any).__infoWindowCloseCallback = () => {\n      mapsService.closeInfoWindow();\n    };\n\n    mapsService.showInfoWindow(infoWindowContent, () => {\n      switch (resultType) {\n        case 'success':\n          this.handleInfoWindowContinue();\n          break;\n        case 'claro-hogar':\n          this.handleNoConverageWithOptions();\n          break;\n        default:\n          // PR LIMIT and no-coverage - just close\n          mapsService.closeInfoWindow();\n          break;\n      }\n    });\n  }\n\n  /**\n   * Handles \"Ver opciones\" action when no coverage but CLARO HOGAR is available\n   */\n  private handleNoConverageWithOptions = () => {\n    mapsService.closeInfoWindow();\n\n    // Create location data for CLARO HOGAR flow\n    if (this.currentCoordinates) {\n      const claroHogarLocation: LocationData = {\n        latitude: this.currentCoordinates.lat,\n        longitude: this.currentCoordinates.lng,\n        address: this.address || this.geocodeResult?.address || '',\n        city: this.geocodeResult?.city || '',\n        zipCode: this.geocodeResult?.zipCode || '',\n        serviceType: 'CLARO HOGAR',\n        serviceMessage: 'Tenemos un poderoso servicio de internet inalámbrico en tu área que tú mismo instalas.',\n        isValid: true,\n      };\n\n      // Store in session and state\n      this.storeLocationInSession(claroHogarLocation);\n      flowActions.setLocation(claroHogarLocation);\n\n      // Navigate to next step (catalogue)\n      this.onNext?.();\n    }\n  };\n\n  /**\n   * Handles continue from InfoWindow (like TEL: goToRouter method)\n   */\n  private handleInfoWindowContinue = () => {\n    if (this.locationData && this.locationData.isValid) {\n      // Close InfoWindow\n      mapsService.closeInfoWindow();\n\n      // Store data in sessionStorage with Base64 encoding (like TEL)\n      this.storeLocationInSession(this.locationData);\n\n      // Set location in store\n      flowActions.setLocation(this.locationData);\n      this.onNext?.();\n    }\n  };\n\n  /**\n   * Stores location data in sessionStorage with Base64 encoding (like TEL)\n   * TEL pattern: sessionStorage.setItem('planCodeInternet', btoa(planCode))\n   */\n  private storeLocationInSession(location: LocationData): void {\n    try {\n      // Store coordinates in Base64 (like TEL)\n      sessionStorage.setItem('latitud', btoa(String(location.latitude)));\n      sessionStorage.setItem('longitud', btoa(String(location.longitude)));\n\n      // Special handling for CLARO HOGAR (like TEL)\n      // TEL: if (servicE_NAME == 'CLARO HOGAR') { sessionStorage.removeItem('planCodeInternet'); }\n      if (location.serviceType.toUpperCase() === 'CLARO HOGAR') {\n        sessionStorage.removeItem('planCodeInternet');\n        console.log('[StepLocation] CLARO HOGAR detected - planCodeInternet removed');\n      } else {\n        sessionStorage.setItem('planCodeInternet', btoa(location.serviceType));\n        console.log('[StepLocation] Service type stored:', location.serviceType);\n      }\n\n      // Also store full plan data as JSON (for convenience)\n      sessionStorage.setItem('plan', JSON.stringify({\n        serviceType: location.serviceType,\n        serviceMessage: location.serviceMessage,\n        address: location.address,\n        city: location.city,\n        zipCode: location.zipCode,\n      }));\n\n      console.log('[StepLocation] Location data stored in sessionStorage');\n    } catch (error) {\n      console.error('[StepLocation] Error storing location in sessionStorage:', error);\n    }\n  }\n\n  private handleUseCurrentLocation = async () => {\n    this.isGettingLocation = true;\n\n    try {\n      const result = await mapsService.getCurrentLocationWithAddress();\n\n      if (result) {\n        this.geocodeResult = result;\n        this.address = result.formattedAddress || result.address;\n        this.currentCoordinates = result.coordinates;\n\n        // Update map\n        mapsService.setMarker(result.coordinates);\n        mapsService.centerMap(result.coordinates);\n        mapsService.setZoom(17);\n      } else {\n        // Got coordinates but couldn't reverse geocode\n        const coords = await mapsService.getCurrentLocation();\n        this.currentCoordinates = coords;\n        mapsService.setMarker(coords);\n        mapsService.centerMap(coords);\n        mapsService.setZoom(17);\n      }\n    } catch (error) {\n      console.error('Geolocation error:', error);\n\n      if (error.message.includes('denied')) {\n        this.errorMessage = ERROR_MESSAGES.GEOLOCATION_DENIED;\n      } else if (error.message.includes('unavailable')) {\n        this.errorMessage = ERROR_MESSAGES.GEOLOCATION_UNAVAILABLE;\n      } else {\n        this.errorMessage = ERROR_MESSAGES.GEOLOCATION_TIMEOUT;\n      }\n\n      this.showErrorModal = true;\n    } finally {\n      this.isGettingLocation = false;\n    }\n  };\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    return (\n      <Host>\n        <div class=\"step-location\">\n          {/* Validating Overlay */}\n          {this.isValidating && (\n            <div class=\"step-location__validating-overlay\">\n              <div class=\"step-location__validating-content\">\n                <div class=\"step-location__validating-spinner\"></div>\n                <p class=\"step-location__validating-text\">Validando cobertura...</p>\n              </div>\n            </div>\n          )}\n\n          {/* Header */}\n          <header class=\"step-location__header\">\n            <h1 class=\"step-location__title\">\n              <span class=\"step-location__title--highlight\">Servicio fijo empresarial</span>\n              {' '}en tu área\n            </h1>\n          </header>\n\n          {/* Map Container */}\n          <div class=\"step-location__map-container\">\n            {/* Map controls */}\n            <div class=\"step-location__controls\">\n              {/* Search bar */}\n              <div class=\"step-location__input-group\">\n                <span class=\"step-location__input-icon\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"></path>\n                    <circle cx=\"12\" cy=\"10\" r=\"3\"></circle>\n                  </svg>\n                </span>\n                <input\n                  type=\"text\"\n                  class=\"step-location__input\"\n                  placeholder=\"Ingrese su dirección\"\n                  value={this.address}\n                  onInput={this.handleAddressChange}\n                  onKeyPress={this.handleKeyPress}\n                  ref={(el) => this.addressInput = el}\n                />\n                <button\n                  class={{\n                    'step-location__btn-validate': true,\n                    'step-location__btn-validate--loading': this.isValidating,\n                  }}\n                  onClick={this.handleValidate}\n                  disabled={this.isValidating || (!this.address.trim() && !this.currentCoordinates)}\n                >\n                  {this.isValidating ? (\n                    <span class=\"step-location__btn-validate-content\">\n                      <span class=\"step-location__btn-spinner\"></span>\n                      Validando...\n                    </span>\n                  ) : (\n                    'Validar'\n                  )}\n                </button>\n              </div>\n\n              {/* Location button container */}\n              <div class=\"step-location__location-container\">\n                <button\n                  class=\"step-location__btn-location\"\n                  onClick={this.handleUseCurrentLocation}\n                  disabled={this.isGettingLocation || this.isLoadingMap}\n                >\n                  <svg class=\"step-location__btn-location-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"none\">\n                    <path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/>\n                  </svg>\n                  {this.isGettingLocation ? 'Obteniendo ubicación...' : 'Utilizar Ubicación Actual'}\n                </button>\n              </div>\n            </div>\n\n            {/* Map */}\n            <div class=\"step-location__map\">\n              {this.isLoadingMap && !this.mapError && (\n                <div class=\"step-location__map-loading\">\n                  <div class=\"step-location__spinner\"></div>\n                  <p>Cargando mapa...</p>\n                </div>\n              )}\n\n              {this.mapError && (\n                <div class=\"step-location__map-error\">\n                  <p>{this.mapError}</p>\n                  {!this.googleMapsKey && (\n                    <small>Configura la prop google-maps-key en el componente</small>\n                  )}\n                </div>\n              )}\n\n              <div\n                class=\"step-location__map-canvas\"\n                ref={(el) => this.mapContainer = el}\n                style={{ display: this.mapError ? 'none' : 'block' }}\n              ></div>\n            </div>\n          </div>\n\n          {/* Error Modal (only for errors that can't be shown in InfoWindow) */}\n          {this.showErrorModal && (\n            <div class=\"step-location__modal-backdrop\">\n              <div class=\"step-location__modal step-location__modal--error\">\n                <button class=\"step-location__modal-close\" onClick={() => this.showErrorModal = false}>\n                  ×\n                </button>\n                <div class=\"step-location__modal-error-bar\">Error</div>\n                <p class=\"step-location__modal-message\">{this.errorMessage}</p>\n                <button\n                  class=\"step-location__modal-btn\"\n                  onClick={() => this.showErrorModal = false}\n                >\n                  Cerrar\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}