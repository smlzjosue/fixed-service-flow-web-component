{"file":"p-CqrnU9zH.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement","flowState"],"sources":["src/components/steps/step-contract/step-contract.scss?tag=step-contract&encapsulation=shadow","src/components/steps/step-contract/step-contract.tsx"],"sourcesContent":["// ============================================\n// STEP CONTRACT - Styles\n// ============================================\n\n@import '../../../global/variables';\n@import '../../../global/mixins';\n\n:host {\n  display: block;\n}\n\n.step-contract {\n  width: 100%;\n\n  // ------------------------------------------\n  // HEADER\n  // ------------------------------------------\n\n  &__header {\n    @include flex-between;\n    padding-bottom: $spacing-4;\n    margin-bottom: $spacing-4;\n    border-bottom: 1px solid $color-gray-300;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n  }\n\n  &__title {\n    @include font-heading-2;\n    color: $color-text-primary;\n  }\n\n  &__btn-back {\n    @include button-outline;\n    height: $button-height-md;\n  }\n\n  // ------------------------------------------\n  // TABS\n  // ------------------------------------------\n\n  &__tabs {\n    display: flex;\n    margin-bottom: $spacing-6;\n    background: $color-white;\n    border-radius: 0 0 $border-radius-lg $border-radius-lg;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n    overflow: hidden;\n  }\n\n  &__tab {\n    flex: 1;\n    padding: $spacing-5 $spacing-4;\n    background: transparent;\n    border: none;\n    cursor: pointer;\n    text-align: center;\n    position: relative;\n    transition: all $transition-fast;\n\n    // Vertical separator between tabs\n    &:first-child {\n      border-right: 1px solid $color-gray-200;\n    }\n\n    // Indicador de tab activo (línea cyan debajo)\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 4px;\n      background: transparent;\n      transition: background-color $transition-fast;\n    }\n\n    &--active {\n      &::after {\n        background: $color-secondary;\n      }\n    }\n\n    &:hover:not(&--active) {\n      background: $color-gray-50;\n    }\n  }\n\n  &__tab-title {\n    display: block;\n    font-size: $font-size-base;\n    font-weight: $font-weight-bold;\n    color: $color-text-primary;\n    margin-bottom: $spacing-1;\n  }\n\n  &__tab-subtitle {\n    display: block;\n    font-size: $font-size-sm;\n    color: $color-text-secondary;\n    line-height: $line-height-normal;\n  }\n\n  // ------------------------------------------\n  // OPTIONS\n  // ------------------------------------------\n\n  &__options {\n    display: flex;\n    flex-direction: column;\n    gap: $spacing-4;\n    align-items: center;\n\n    @include breakpoint-up(md) {\n      flex-direction: row;\n      justify-content: center;\n    }\n\n    // Cuando hay una sola opción, centrarla\n    &--single {\n      justify-content: center;\n    }\n  }\n\n  &__option {\n    flex: 0 0 auto;\n    width: 280px;\n    display: flex;\n    align-items: center;\n    padding: $spacing-4 $spacing-5;\n    background: $color-white;\n    border: 1px solid $color-border-default;\n    border-radius: $border-radius-lg;\n    cursor: pointer;\n    transition: all $transition-fast;\n    position: relative;\n    overflow: hidden;\n\n    @include breakpoint-down(sm) {\n      width: 100%;\n      max-width: 320px;\n    }\n\n    // Left side bar indicator (gris por defecto, cyan cuando seleccionado)\n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      width: 4px;\n      background: $color-gray-300;\n      border-radius: $border-radius-lg 0 0 $border-radius-lg;\n      transition: background-color $transition-fast;\n    }\n\n    input[type=\"radio\"] {\n      width: 20px;\n      height: 20px;\n      margin-right: $spacing-3;\n      accent-color: $color-secondary;\n      flex-shrink: 0;\n    }\n\n    &:hover {\n      border-color: $color-gray-400;\n    }\n\n    &--selected {\n      &::before {\n        background: $color-secondary;\n      }\n    }\n  }\n\n  &__option-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: $spacing-1;\n  }\n\n  &__option-title {\n    display: block;\n    font-size: $font-size-base;\n    font-weight: $font-weight-semibold;\n    color: $color-text-primary;\n    line-height: $line-height-snug;\n  }\n\n  &__option-price {\n    display: block;\n    font-size: $font-size-sm;\n    color: $color-text-secondary;\n\n    // Hacer el precio en negrita\n    strong, b {\n      font-weight: $font-weight-semibold;\n    }\n  }\n\n  // ------------------------------------------\n  // ACTIONS\n  // ------------------------------------------\n\n  &__actions {\n    margin-top: $spacing-6;\n    padding-top: $spacing-6;\n    border-top: 1px solid $color-gray-200;\n    text-align: center;\n  }\n\n  &__btn-continue {\n    @include button-primary;\n    min-width: 280px;\n    height: 44px;\n    padding: 0 $spacing-8;\n    border-radius: 22px;\n    font-size: $font-size-base;\n\n    &:disabled {\n      background-color: $color-gray-400;\n      border-color: $color-gray-400;\n      cursor: not-allowed;\n      opacity: 1;\n\n      &:hover {\n        background-color: $color-gray-400;\n        border-color: $color-gray-400;\n      }\n    }\n  }\n\n  // Mobile back button (below Continue)\n  &__btn-back-mobile {\n    display: none; // Hidden on desktop\n    width: 100%;\n    margin-top: $spacing-4;\n    padding: $spacing-2;\n    background: transparent;\n    border: none;\n    color: $color-secondary;\n    font-size: $font-size-base;\n    cursor: pointer;\n    text-decoration: none;\n    text-align: center;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n}\n\n// ------------------------------------------\n// MOBILE RESPONSIVE ADJUSTMENTS\n// ------------------------------------------\n\n@media (max-width: $breakpoint-md - 1) {\n  .step-contract {\n    padding: 0 $spacing-4;\n\n    &__header {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: $spacing-2;\n      padding-bottom: $spacing-3;\n      margin-bottom: $spacing-4;\n\n      .step-contract__title {\n        font-size: $font-size-lg;\n        line-height: $line-height-snug;\n      }\n\n      .step-contract__btn-back {\n        order: -1;\n        height: auto;\n        padding: $spacing-2 0;\n        border: none;\n        background: transparent;\n        color: $color-secondary;\n        font-size: $font-size-sm;\n\n        &:hover {\n          background: transparent;\n          text-decoration: underline;\n        }\n      }\n    }\n\n    &__tabs {\n      margin-bottom: $spacing-4;\n    }\n\n    &__tab {\n      padding: $spacing-3 $spacing-2;\n    }\n\n    &__tab-title {\n      font-size: $font-size-sm;\n    }\n\n    &__tab-subtitle {\n      font-size: $font-size-xs;\n      line-height: $line-height-snug;\n    }\n\n    &__options {\n      padding: 0;\n    }\n\n    &__option {\n      width: 100%;\n      max-width: none;\n    }\n\n    &__actions {\n      margin-top: $spacing-4;\n      padding-top: $spacing-4;\n    }\n\n    &__btn-continue {\n      width: 100%;\n      min-width: auto;\n    }\n\n    &__btn-back-mobile {\n      display: block;\n    }\n\n    // Hide header back button on mobile (use bottom one instead)\n    &__btn-back {\n      display: none;\n    }\n  }\n}\n","// ============================================\n// STEP CONTRACT - Contract Type Selection\n// Fixed Service Flow Web Component\n// ============================================\n\nimport { Component, Prop, State, h, Host } from '@stencil/core';\nimport { flowState, flowActions } from '../../../store/flow.store';\nimport { CONTRACT_OPTIONS, SelectedContract, ContractTypeId, ContractOption } from '../../../store/interfaces';\nimport { formatPrice } from '../../../utils/formatters';\n\n@Component({\n  tag: 'step-contract',\n  styleUrl: 'step-contract.scss',\n  shadow: true,\n})\nexport class StepContract {\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  @State() activeTab: ContractTypeId = 1; // 1 = Con contrato\n  @State() selectedOption: SelectedContract | null = null;\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  componentWillLoad() {\n    // Restaurar selección previa si existe (cuando el usuario vuelve a este paso)\n    this.restorePreviousSelection();\n  }\n\n  // ------------------------------------------\n  // METHODS\n  // ------------------------------------------\n\n  /**\n   * Restaura la selección previa desde el store o sessionStorage\n   * Esto permite mantener la selección cuando el usuario navega hacia atrás\n   */\n  private restorePreviousSelection() {\n    // Primero intentar desde el store\n    if (flowState.selectedContract) {\n      this.selectedOption = flowState.selectedContract;\n      this.activeTab = flowState.selectedContract.typeId;\n      return;\n    }\n\n    // Si no está en el store, intentar desde sessionStorage\n    const typeContractId = sessionStorage.getItem('typeContractId');\n    if (typeContractId !== null) {\n      const typeId = parseInt(typeContractId) as ContractTypeId;\n      const deadlines = parseInt(sessionStorage.getItem('contractInstallment') || '0');\n      const installation = parseInt(sessionStorage.getItem('contractInstallation') || '0');\n      const activation = parseInt(sessionStorage.getItem('contractActivation') || '0');\n      const modem = parseInt(sessionStorage.getItem('contractModen') || '0');\n\n      const contractType = CONTRACT_OPTIONS.find(c => c.typeId === typeId);\n\n      this.selectedOption = {\n        typeId,\n        typeName: contractType?.type || '',\n        deadlines,\n        installation,\n        activation,\n        modem,\n      };\n      this.activeTab = typeId;\n\n      // Sincronizar con el store\n      flowActions.setContract(this.selectedOption);\n    }\n  }\n\n  private handleTabChange = (typeId: ContractTypeId) => {\n    this.activeTab = typeId;\n    // No limpiar la selección si ya hay una del mismo tipo\n    if (this.selectedOption?.typeId !== typeId) {\n      this.selectedOption = null;\n    }\n  };\n\n  private handleSelectOption = (typeId: ContractTypeId, option: any) => {\n    const contractType = CONTRACT_OPTIONS.find(c => c.typeId === typeId);\n\n    this.selectedOption = {\n      typeId,\n      typeName: contractType?.type || '',\n      deadlines: option.deadlines,\n      installation: option.installation,\n      activation: option.activation,\n      modem: option.modem,\n    };\n\n    flowActions.setContract(this.selectedOption);\n  };\n\n  private handleContinue = () => {\n    if (this.selectedOption) {\n      this.onNext?.();\n    }\n  };\n\n  /**\n   * Calcula el costo total de instalación (instalación + activación + modem)\n   * Este es el valor que se muestra en la UI según el diseño de referencia\n   */\n  private getTotalInstallationCost(option: ContractOption): number {\n    return option.installation + option.activation + option.modem;\n  }\n\n  /**\n   * Formatea la duración del contrato para mostrar en la card\n   * Ej: \"12 Meses de Contrato\", \"24 Meses de Contrato\", \"Sin contrato\"\n   */\n  private formatContractLabel(months: number): string {\n    if (months === 0) return 'Sin contrato';\n    return `${months} Meses de Contrato`;\n  }\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    const withContract = CONTRACT_OPTIONS.find(c => c.typeId === 1);\n    const withoutContract = CONTRACT_OPTIONS.find(c => c.typeId === 0);\n\n    return (\n      <Host>\n        <div class=\"step-contract\">\n          {/* Header */}\n          <header class=\"step-contract__header\">\n            <h1 class=\"step-contract__title\">Selecciona un tipo de contrato</h1>\n            <button class=\"step-contract__btn-back\" onClick={this.onBack}>\n              Regresar\n            </button>\n          </header>\n\n          {/* Tabs */}\n          <div class=\"step-contract__tabs\">\n            <button\n              class={{\n                'step-contract__tab': true,\n                'step-contract__tab--active': this.activeTab === 1,\n              }}\n              onClick={() => this.handleTabChange(1)}\n            >\n              <span class=\"step-contract__tab-title\">Con contrato</span>\n              <span class=\"step-contract__tab-subtitle\">12 y 24 meses de contrato</span>\n            </button>\n            <button\n              class={{\n                'step-contract__tab': true,\n                'step-contract__tab--active': this.activeTab === 0,\n              }}\n              onClick={() => this.handleTabChange(0)}\n            >\n              <span class=\"step-contract__tab-title\">Sin contrato</span>\n              <span class=\"step-contract__tab-subtitle\">Plan mensual con pago por adelantado</span>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div class=\"step-contract__content\">\n            {this.activeTab === 1 && withContract && (\n              <div class=\"step-contract__options\">\n                {withContract.contract.map((option) => {\n                  const totalCost = this.getTotalInstallationCost(option);\n                  return (\n                    <label\n                      class={{\n                        'step-contract__option': true,\n                        'step-contract__option--selected':\n                          this.selectedOption?.deadlines === option.deadlines &&\n                          this.selectedOption?.typeId === 1,\n                      }}\n                    >\n                      <input\n                        type=\"radio\"\n                        name=\"contract\"\n                        checked={\n                          this.selectedOption?.deadlines === option.deadlines &&\n                          this.selectedOption?.typeId === 1\n                        }\n                        onChange={() => this.handleSelectOption(1, option)}\n                      />\n                      <div class=\"step-contract__option-content\">\n                        <span class=\"step-contract__option-title\">\n                          {this.formatContractLabel(option.deadlines)}\n                        </span>\n                        <span class=\"step-contract__option-price\">\n                          Instalación: {totalCost > 0 ? formatPrice(totalCost) : '$0.00'}\n                        </span>\n                      </div>\n                    </label>\n                  );\n                })}\n              </div>\n            )}\n\n            {this.activeTab === 0 && withoutContract && (\n              <div class=\"step-contract__options step-contract__options--single\">\n                {withoutContract.contract.map((option) => {\n                  const totalCost = this.getTotalInstallationCost(option);\n                  return (\n                    <label\n                      class={{\n                        'step-contract__option': true,\n                        'step-contract__option--selected':\n                          this.selectedOption?.typeId === 0,\n                      }}\n                    >\n                      <input\n                        type=\"radio\"\n                        name=\"contract\"\n                        checked={this.selectedOption?.typeId === 0}\n                        onChange={() => this.handleSelectOption(0, option)}\n                      />\n                      <div class=\"step-contract__option-content\">\n                        <span class=\"step-contract__option-title\">Sin contrato</span>\n                        <span class=\"step-contract__option-price\">\n                          Instalación: {formatPrice(totalCost)}\n                        </span>\n                      </div>\n                    </label>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Continue Button */}\n          <div class=\"step-contract__actions\">\n            <button\n              class=\"step-contract__btn-continue\"\n              onClick={this.handleContinue}\n              disabled={!this.selectedOption}\n            >\n              Continuar\n            </button>\n            <button\n              type=\"button\"\n              class=\"step-contract__btn-back-mobile\"\n              onClick={this.onBack}\n            >\n              Regresar\n            </button>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}