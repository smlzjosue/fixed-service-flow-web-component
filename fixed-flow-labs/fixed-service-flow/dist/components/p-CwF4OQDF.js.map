{"file":"p-CwF4OQDF.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement","flowState"],"sources":["src/components/steps/step-plans/step-plans.scss?tag=step-plans&encapsulation=shadow","src/components/steps/step-plans/step-plans.tsx"],"sourcesContent":["// ============================================\n// STEP PLANS - Styles\n// Design based on docs/capturas/4.png + Carousel\n// ============================================\n\n@import '../../../global/variables';\n@import '../../../global/mixins';\n\n:host {\n  display: block;\n}\n\n.step-plans {\n  width: 100%;\n  min-height: 100vh;\n  padding: $spacing-6;\n  padding-bottom: 180px; // Space for sticky footer\n\n  @include breakpoint-up(md) {\n    padding: $spacing-8;\n    padding-bottom: 140px;\n  }\n\n  // ------------------------------------------\n  // HEADER\n  // ------------------------------------------\n\n  &__header {\n    width: 100%;\n    background: $color-white;\n    padding: $spacing-4 0;\n    box-sizing: border-box;\n\n    @include breakpoint-down(sm) {\n      padding: $spacing-3 0;\n    }\n  }\n\n  &__back-link {\n    display: inline-flex;\n    align-items: center;\n    gap: $spacing-1;\n    padding: $spacing-2 0;\n    background: transparent;\n    border: none;\n    color: $color-secondary;\n    font-size: $font-size-sm;\n    font-weight: $font-weight-semibold;\n    cursor: pointer;\n    transition: opacity $transition-fast;\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    &:hover {\n      opacity: 0.8;\n    }\n  }\n\n  &__title {\n    margin: $spacing-3 0 $spacing-4;\n    font-size: 24px;\n    font-weight: $font-weight-bold;\n    color: $color-text-primary;\n    line-height: 1.2;\n\n    @include breakpoint-down(sm) {\n      font-size: 20px;\n      margin: $spacing-2 0 $spacing-3;\n    }\n  }\n\n  &__divider {\n    height: 1px;\n    background: $color-gray-200;\n    margin: 0 (-$spacing-6);\n\n    @include breakpoint-down(sm) {\n      margin: 0 (-$spacing-4);\n    }\n  }\n\n  // ------------------------------------------\n  // LOADING\n  // ------------------------------------------\n\n  &__loading {\n    @include flex-column-center;\n    padding: $spacing-12;\n    color: $color-text-secondary;\n  }\n\n  &__spinner {\n    width: 40px;\n    height: 40px;\n    border: 3px solid $color-gray-200;\n    border-top-color: $color-secondary;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: $spacing-4;\n  }\n\n  // ------------------------------------------\n  // ERROR\n  // ------------------------------------------\n\n  &__error {\n    @include flex-column-center;\n    padding: $spacing-8;\n    text-align: center;\n    color: $color-error;\n\n    button {\n      @include button-outline;\n      margin-top: $spacing-4;\n    }\n  }\n\n  // ------------------------------------------\n  // CAROUSEL CONTAINER\n  // ------------------------------------------\n\n  &__carousel-container {\n    padding: $spacing-4 0 $spacing-12;\n  }\n\n  // ------------------------------------------\n  // EMPTY STATE\n  // ------------------------------------------\n\n  &__empty {\n    @include flex-center;\n    padding: $spacing-12;\n    color: $color-text-secondary;\n  }\n\n  // ------------------------------------------\n  // FOOTER (STICKY) - Based on barra-resumen.png\n  // ------------------------------------------\n\n  &__footer {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: $color-white;\n    border-top: 1px solid $color-border-light;\n    padding: $spacing-3 $spacing-6;\n    z-index: $z-index-sticky;\n    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    @include breakpoint-down(sm) {\n      flex-direction: column;\n      gap: $spacing-3;\n      padding: $spacing-4;\n    }\n  }\n\n  &__footer-left {\n    display: flex;\n    flex-direction: column;\n\n    @include breakpoint-down(sm) {\n      width: 100%;\n    }\n  }\n\n  &__footer-info {\n    display: flex;\n    gap: $spacing-6;\n  }\n\n  &__footer-item {\n    display: flex;\n    flex-direction: column;\n\n    &--separator {\n      padding-left: $spacing-6;\n      border-left: 1px solid $color-border-light;\n    }\n  }\n\n  &__footer-label {\n    font-size: $font-size-xs;\n    color: $color-text-secondary;\n  }\n\n  &__footer-value {\n    font-size: 1.25rem;\n    font-weight: $font-weight-bold;\n    color: $color-text-primary;\n\n    &--highlight {\n      color: $color-primary;\n    }\n  }\n\n  &__footer-note {\n    font-size: $font-size-xs;\n    color: $color-text-tertiary;\n    margin: $spacing-1 0 0;\n  }\n\n  &__footer-btn {\n    @include button-primary;\n    min-width: 160px;\n\n    @include breakpoint-down(sm) {\n      width: 100%;\n    }\n  }\n}\n\n// ============================================\n// PLAN CARD - Based on docs/capturas/plan-card.png\n// ============================================\n\n.plan-card {\n  background: $color-white;\n  border-radius: 16px;\n  // Default: no border, only subtle shadow (per captura 4)\n  border: 2px solid transparent;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  flex-direction: column;\n  // height handled by carousel's align-items: stretch\n  min-height: 340px;\n\n  &:hover {\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\n    transform: translateY(-2px);\n  }\n\n  // Selected: cyan border (per captura 4)\n  &--selected {\n    border-color: $color-secondary;\n    box-shadow: 0 6px 24px rgba($color-secondary, 0.25);\n  }\n\n  &--processing {\n    pointer-events: none;\n    opacity: 0.8;\n  }\n\n  // ------------------------------------------\n  // CARD HEADER - Black bar centered (per plan-card.png)\n  // ------------------------------------------\n\n  &__header {\n    display: flex;\n    justify-content: center;\n    padding-top: 0;\n  }\n\n  &__name {\n    background: #1a1a1a;\n    color: $color-white;\n    font-size: $font-size-sm;\n    font-weight: $font-weight-bold;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    line-height: 1.3;\n    padding: $spacing-3 $spacing-4;\n    width: 70%;\n    text-align: center;\n    border-radius: 0 0 12px 12px;\n  }\n\n  // ------------------------------------------\n  // CARD BODY (per plan-card.png)\n  // ------------------------------------------\n\n  &__body {\n    flex: 1;\n    padding: $spacing-5 $spacing-4;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n  }\n\n  &__includes-label {\n    font-size: $font-size-base;\n    color: $color-text-secondary;\n    margin: 0 0 $spacing-3;\n    font-weight: $font-weight-medium;\n  }\n\n  // ------------------------------------------\n  // FEATURES LIST - Centered, no bullets (per plan-card.png)\n  // ------------------------------------------\n\n  &__features {\n    list-style: none;\n    padding: 0;\n    margin: 0 0 $spacing-4;\n    text-align: center;\n    flex: 1;\n  }\n\n  &__feature {\n    margin-bottom: $spacing-2;\n    font-size: $font-size-sm;\n    color: $color-text-primary;\n    font-weight: $font-weight-semibold;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  // ------------------------------------------\n  // PRICE - Cyan color like reference (per plan-card.png)\n  // ------------------------------------------\n\n  &__price {\n    font-size: 1.75rem;\n    font-weight: $font-weight-bold;\n    color: $color-secondary;\n    margin: $spacing-4 0 0;\n  }\n\n  // ------------------------------------------\n  // CARD FOOTER (per plan-card.png)\n  // ------------------------------------------\n\n  &__footer {\n    padding: $spacing-4;\n  }\n\n  &__btn {\n    width: 100%;\n    padding: $spacing-3 $spacing-4;\n    border-radius: 25px;\n    font-size: $font-size-base;\n    font-weight: $font-weight-semibold;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    // Default: outline style (not selected)\n    background: $color-white;\n    color: $color-secondary;\n    border: 2px solid $color-secondary;\n\n    &:hover {\n      background: rgba($color-secondary, 0.1);\n    }\n\n    // Selected: filled style\n    &--selected {\n      background: $color-secondary;\n      color: $color-white;\n      border-color: $color-secondary;\n\n      &:hover {\n        background: darken($color-secondary, 8%);\n      }\n    }\n\n    &--loading {\n      cursor: wait;\n      opacity: 0.8;\n    }\n\n    &:disabled {\n      cursor: not-allowed;\n      opacity: 0.6;\n    }\n  }\n\n  // ------------------------------------------\n  // BUTTON LOADING STATE\n  // ------------------------------------------\n\n  &__btn-loading {\n    display: inline-flex;\n    align-items: center;\n    gap: $spacing-2;\n  }\n\n  &__btn-spinner {\n    width: 14px;\n    height: 14px;\n    border: 2px solid rgba($color-white, 0.3);\n    border-top-color: $color-white;\n    border-radius: 50%;\n    animation: spin 0.8s linear infinite;\n  }\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n","// ============================================\n// STEP PLANS - Plan Selection Step Component\n// Fixed Service Flow Web Component\n// Design based on docs/capturas/4.png + Carousel\n// ============================================\n\nimport { Component, Prop, State, h, Host } from '@stencil/core';\nimport { flowState, flowActions } from '../../../store/flow.store';\nimport { plansService, productService } from '../../../services';\nimport { Plan } from '../../../store/interfaces';\nimport { formatPrice } from '../../../utils/formatters';\n\n@Component({\n  tag: 'step-plans',\n  styleUrl: 'step-plans.scss',\n  shadow: true,\n})\nexport class StepPlans {\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  @State() plans: Plan[] = [];\n  @State() selectedPlan: Plan | null = null;\n  @State() isLoading: boolean = true;\n  @State() error: string | null = null;\n  @State() isAddingToCart: boolean = false;\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  async componentWillLoad() {\n    await this.loadPlans();\n\n    // Check if there's a previously selected plan in session\n    const storedPlanId = plansService.getStoredPlanId();\n    if (storedPlanId > 0) {\n      const storedPlan = this.plans.find(p => p.planId === storedPlanId);\n      if (storedPlan) {\n        this.selectedPlan = storedPlan;\n        flowActions.selectPlan(storedPlan);\n      }\n    }\n  }\n\n  // ------------------------------------------\n  // METHODS\n  // ------------------------------------------\n\n  private async loadPlans() {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const serviceType = flowState.location?.serviceType || 'GPON';\n\n      // For CLARO HOGAR, get subcatalogId from productService (stored when product was selected)\n      let catalogId = 0;\n      if (serviceType === 'CLARO HOGAR') {\n        // Use subcatalogId from session (set in step-catalogue when product was selected)\n        catalogId = productService.getSubcatalogId();\n        console.log('[StepPlans] CLARO HOGAR - using subcatalogId:', catalogId);\n      }\n\n      this.plans = await plansService.getPlans(serviceType, catalogId);\n      this.plans = plansService.sortByPrice(this.plans);\n    } catch (err) {\n      this.error = 'Error al cargar los planes';\n      console.error(err);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  /**\n   * Handles plan selection - following TEL's flow:\n   * 1. Check if there's an existing different plan -> delete it\n   * 2. Store plan in session\n   * 3. Call addToCart API\n   */\n  private handleSelectPlan = async (plan: Plan) => {\n    // If clicking the same plan, do nothing\n    if (this.selectedPlan?.planId === plan.planId) {\n      return;\n    }\n\n    this.isAddingToCart = true;\n    this.error = null;\n\n    try {\n      // Step 1: If there's a different plan already in cart, delete it first (TEL pattern)\n      const currentPlanId = plansService.getStoredPlanId();\n      const currentCartId = plansService.getCartId();\n\n      if (currentPlanId > 0 && currentPlanId !== plan.planId && currentCartId > 0) {\n        console.log('[StepPlans] Removing previous plan from cart:', currentPlanId);\n        await plansService.deleteFromCart(currentCartId);\n      }\n\n      // Step 2: Add new plan to cart\n      console.log('[StepPlans] Adding plan to cart:', plan.planId, plan.planName);\n      await plansService.addToCart(plan);\n\n      // Step 3: Update local state\n      this.selectedPlan = plan;\n      flowActions.selectPlan(plan);\n\n      console.log('[StepPlans] Plan added successfully');\n    } catch (err) {\n      console.error('[StepPlans] Error adding plan to cart:', err);\n      this.error = 'Error al agregar el plan. Por favor intente de nuevo.';\n\n      // Still allow selection locally even if cart API fails\n      // This way the user can continue the flow\n      this.selectedPlan = plan;\n      flowActions.selectPlan(plan);\n    } finally {\n      this.isAddingToCart = false;\n    }\n  };\n\n  private handleContinue = () => {\n    if (this.selectedPlan && !this.isAddingToCart) {\n      this.onNext?.();\n    }\n  };\n\n  // ------------------------------------------\n  // RENDER HELPERS\n  // ------------------------------------------\n\n  private renderPlanCard(plan: Plan) {\n    const isSelected = this.selectedPlan?.planId === plan.planId;\n    const isProcessing = this.isAddingToCart && isSelected;\n    const features = plansService.parsePlanFeatures(plan.planDesc || '');\n\n    // Default features if none parsed\n    const displayFeatures = features.length > 0 ? features : [\n      'Internet fibra 1',\n      'Internet 2',\n      'Internet 3'\n    ];\n\n    return (\n      <div\n        class={{\n          'plan-card': true,\n          'plan-card--selected': isSelected,\n          'plan-card--processing': isProcessing,\n        }}\n        onClick={() => !this.isAddingToCart && this.handleSelectPlan(plan)}\n      >\n        {/* Card Header - Cyan bar with plan name */}\n        <div class=\"plan-card__header\">\n          <span class=\"plan-card__name\">{plan.planName}</span>\n        </div>\n\n        {/* Card Body */}\n        <div class=\"plan-card__body\">\n          {/* Plan includes label */}\n          <p class=\"plan-card__includes-label\">Plan incluye</p>\n\n          {/* Features list */}\n          <ul class=\"plan-card__features\">\n            {displayFeatures.slice(0, 4).map((feature) => (\n              <li class=\"plan-card__feature\">{feature}</li>\n            ))}\n          </ul>\n\n          {/* Price */}\n          <p class=\"plan-card__price\">{formatPrice(plan.decPrice)}</p>\n        </div>\n\n        {/* Card Footer with button */}\n        <div class=\"plan-card__footer\">\n          <button\n            class={{\n              'plan-card__btn': true,\n              'plan-card__btn--selected': isSelected,\n              'plan-card__btn--loading': isProcessing,\n            }}\n            disabled={this.isAddingToCart}\n          >\n            {isProcessing ? (\n              <span class=\"plan-card__btn-loading\">\n                <span class=\"plan-card__btn-spinner\"></span>\n                Agregando...\n              </span>\n            ) : isSelected ? (\n              'Plan seleccionado'\n            ) : (\n              'Solicitar plan'\n            )}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    const monthlyPayment = this.selectedPlan ? this.selectedPlan.decPrice : 0;\n    const totalToday = 0;\n\n    return (\n      <Host>\n        <div class=\"step-plans\">\n          {/* Header */}\n          <header class=\"step-plans__header\">\n            <button class=\"step-plans__back-link\" onClick={this.onBack}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <polyline points=\"15 18 9 12 15 6\"></polyline>\n              </svg>\n              <span>Regresar</span>\n            </button>\n            <h1 class=\"step-plans__title\">Elige tu plan</h1>\n            <div class=\"step-plans__divider\"></div>\n          </header>\n\n          {/* Loading */}\n          {this.isLoading && (\n            <div class=\"step-plans__loading\">\n              <div class=\"step-plans__spinner\"></div>\n              <p>Cargando planes...</p>\n            </div>\n          )}\n\n          {/* Error */}\n          {this.error && (\n            <div class=\"step-plans__error\">\n              <p>{this.error}</p>\n              <button onClick={() => this.loadPlans()}>Reintentar</button>\n            </div>\n          )}\n\n          {/* Plans Carousel - Single row with navigation */}\n          {!this.isLoading && !this.error && this.plans.length > 0 && (\n            <div class=\"step-plans__carousel-container\">\n              <ui-carousel\n                totalItems={this.plans.length}\n                gap={24}\n                showNavigation={false}\n                showPagination={true}\n                breakpoints={[\n                  { minWidth: 0, slidesPerView: 1 },\n                  { minWidth: 500, slidesPerView: 2 },\n                  { minWidth: 800, slidesPerView: 3 },\n                  { minWidth: 1100, slidesPerView: 4 },\n                ]}\n              >\n                {this.plans.map((plan) => this.renderPlanCard(plan))}\n              </ui-carousel>\n            </div>\n          )}\n\n          {/* Empty state if no plans */}\n          {!this.isLoading && !this.error && this.plans.length === 0 && (\n            <div class=\"step-plans__empty\">\n              <p>No hay planes disponibles para tu Ã¡rea.</p>\n            </div>\n          )}\n\n          {/* Sticky Footer */}\n          <footer class=\"step-plans__footer\">\n            <div class=\"step-plans__footer-left\">\n              <div class=\"step-plans__footer-info\">\n                <div class=\"step-plans__footer-item\">\n                  <span class=\"step-plans__footer-label\">Pago mensual</span>\n                  <span class=\"step-plans__footer-value\">{formatPrice(monthlyPayment)}</span>\n                </div>\n                <div class=\"step-plans__footer-item step-plans__footer-item--separator\">\n                  <span class=\"step-plans__footer-label\">Paga hoy</span>\n                  <span class=\"step-plans__footer-value step-plans__footer-value--highlight\">\n                    {formatPrice(totalToday)}\n                  </span>\n                </div>\n              </div>\n              <p class=\"step-plans__footer-note\">\n                Renta mensual aproximada no incluye cargos estatales, federales, ni otros impuestos.\n              </p>\n            </div>\n            <button\n              class=\"step-plans__footer-btn\"\n              onClick={this.handleContinue}\n              disabled={!this.selectedPlan || this.isAddingToCart}\n            >\n              {this.isAddingToCart ? 'Procesando...' : 'Continuar'}\n            </button>\n          </footer>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}