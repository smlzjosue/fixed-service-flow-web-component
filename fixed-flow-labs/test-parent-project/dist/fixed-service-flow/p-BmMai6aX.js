import{h as a,t as l}from"./p-CNBAjIjF.js";const e={get(a){try{const l=sessionStorage.getItem(a);return l}catch{return null}},set(a,l){try{sessionStorage.setItem(a,l)}catch(a){console.error("[StorageUtils] Error setting value:",a)}},getJSON(a){try{const l=sessionStorage.getItem(a);if(!l)return null;return JSON.parse(l)}catch{return null}},setJSON(a,l){try{sessionStorage.setItem(a,JSON.stringify(l))}catch(a){console.error("[StorageUtils] Error setting JSON value:",a)}},remove(a){try{sessionStorage.removeItem(a)}catch(a){console.error("[StorageUtils] Error removing value:",a)}},clear(){try{sessionStorage.clear()}catch(a){console.error("[StorageUtils] Error clearing storage:",a)}},getEncoded(a){try{const l=sessionStorage.getItem(a);if(!l)return null;return atob(l)}catch{return null}},setEncoded(a,l){try{sessionStorage.setItem(a,btoa(l))}catch(a){console.error("[StorageUtils] Error setting encoded value:",a)}},getEncodedJSON(a){try{const l=sessionStorage.getItem(a);if(!l)return null;const e=atob(l);return JSON.parse(e)}catch{return null}},setEncodedJSON(a,l){try{const e=JSON.stringify(l);sessionStorage.setItem(a,btoa(e))}catch(a){console.error("[StorageUtils] Error setting encoded JSON value:",a)}}};const u=[{label:"Adjuntas",value:"00601"},{label:"Adjuntas",value:"00631"},{label:"Aguada",value:"00602"},{label:"Aguadilla",value:"00603"},{label:"Aguadilla",value:"00604"},{label:"Aguadilla",value:"00605"},{label:"Aguadilla",value:"00690"},{label:"Aguas Buenas",value:"00703"},{label:"Aibonito",value:"00705"},{label:"La Plata",value:"00786"},{label:"Añasco",value:"00610"},{label:"Angeles",value:"00611"},{label:"Arecibo",value:"00612"},{label:"Arecibo",value:"00613"},{label:"Arecibo",value:"00614"},{label:"Arecibo",value:"00616"},{label:"Arecibo",value:"00652"},{label:"Arecibo",value:"00688"},{label:"Arroyo",value:"00714"},{label:"Barceloneta",value:"00617"},{label:"Barranquitas",value:"00794"},{label:"Bayamón",value:"00956"},{label:"Bayamón",value:"00957"},{label:"Bayamón",value:"00959"},{label:"Bayamón",value:"00961"},{label:"Bayamón",value:"00958"},{label:"Cabo Rojo",value:"00623"},{label:"Boquerón",value:"00622"},{label:"Caguas",value:"00725"},{label:"Caguas",value:"00727"},{label:"Caguas",value:"00726"},{label:"Camuy",value:"00627"},{label:"Canóvanas",value:"00729"},{label:"Canóvanas",value:"00745"},{label:"Carolina",value:"00979"},{label:"Carolina",value:"00982"},{label:"Carolina",value:"00983"},{label:"Carolina",value:"00985"},{label:"Carolina",value:"00987"},{label:"Carolina",value:"00981"},{label:"Carolina",value:"00984"},{label:"Carolina",value:"00986"},{label:"Carolina",value:"00988"},{label:"Cataño",value:"00962"},{label:"Cataño",value:"00963"},{label:"Cayey",value:"00736"},{label:"Cayey",value:"00737"},{label:"Ceiba",value:"00735"},{label:"Ceiba",value:"00742"},{label:"Ciales",value:"00638"},{label:"Cidra",value:"00739"},{label:"Coamo",value:"00769"},{label:"Comerio",value:"00782"},{label:"Corozal",value:"00783"},{label:"Culebra",value:"00775"},{label:"Dorado",value:"00646"},{label:"Fajardo",value:"00738"},{label:"Fajardo",value:"00740"},{label:"Florida",value:"00650"},{label:"Guánica",value:"00653"},{label:"Guánica",value:"00647"},{label:"Guayama",value:"00784"},{label:"Guayama",value:"00704"},{label:"Guayama",value:"00785"},{label:"Guayanilla",value:"00656"},{label:"Guaynabo",value:"00965"},{label:"Guaynabo",value:"00966"},{label:"Guaynabo",value:"00968"},{label:"Guaynabo",value:"00971"},{label:"Guaynabo",value:"00970"},{label:"Guaynabo",value:"00969"},{label:"Gurabo",value:"00778"},{label:"Hatillo",value:"00659"},{label:"Hormigueros",value:"00660"},{label:"Humacao",value:"00791"},{label:"Humacao",value:"00792"},{label:"Humacao",value:"00741"},{label:"Isabela",value:"00662"},{label:"Jayuya",value:"00664"},{label:"Juana Díaz",value:"00795"},{label:"Juncos",value:"00777"},{label:"Lajas",value:"00667"},{label:"Lares",value:"00669"},{label:"Las Marías",value:"00670"},{label:"Las Piedras",value:"00771"},{label:"Loíza",value:"00772"},{label:"Luquillo",value:"00773"},{label:"Manatí",value:"00674"},{label:"Maricao",value:"00606"},{label:"Maunabo",value:"00707"},{label:"Mayaguez",value:"00680"},{label:"Mayaguez",value:"00682"},{label:"Mayaguez",value:"00681"},{label:"Moca",value:"00676"},{label:"Morovis",value:"00687"},{label:"Naguabo",value:"00718"},{label:"Rio Blanco",value:"00744"},{label:"Naranjito",value:"00719"},{label:"Orocovis",value:"00720"},{label:"Patillas",value:"00723"},{label:"Peñuelas",value:"00624"},{label:"Ponce",value:"00716"},{label:"Ponce",value:"00717"},{label:"Ponce",value:"00728"},{label:"Ponce",value:"00730"},{label:"Ponce",value:"00731"},{label:"Ponce",value:"00733"},{label:"Ponce",value:"00780"},{label:"Ponce",value:"00715"},{label:"Ponce",value:"00732"},{label:"Ponce",value:"00734"},{label:"Quebradillas",value:"00678"},{label:"Rincón",value:"00677"},{label:"Río Grande",value:"00721"},{label:"Río Grande",value:"00745"},{label:"Sabana Grande",value:"00637"},{label:"Salinas",value:"00751"},{label:"San Germán",value:"00683"},{label:"San Germán",value:"00636"},{label:"San Juan",value:"00921"},{label:"San Juan",value:"00923"},{label:"San Juan",value:"00924"},{label:"San Juan",value:"00929"},{label:"San Juan",value:"00915"},{label:"San Juan",value:"00916"},{label:"San Juan",value:"00920"},{label:"San Juan",value:"00909"},{label:"San Juan",value:"00910"},{label:"Fort Buchanan",value:"00934"},{label:"San Juan",value:"00936"},{label:"San Juan",value:"00917"},{label:"San Juan",value:"00919"},{label:"San Juan",value:"00911"},{label:"San Juan",value:"00912"},{label:"San Juan",value:"00913"},{label:"San Juan",value:"00914"},{label:"San Juan",value:"00940"},{label:"San Juan",value:"00901"},{label:"San Juan",value:"00902"},{label:"San Juan",value:"00906"},{label:"San Juan",value:"00925"},{label:"San Juan",value:"00926"},{label:"San Juan",value:"00927"},{label:"San Juan",value:"00928"},{label:"San Juan",value:"00930"},{label:"San Juan",value:"00907"},{label:"San Juan",value:"00908"},{label:"San Juan",value:"00931"},{label:"San Juan",value:"00933"},{label:"San Lorenzo",value:"00754"},{label:"San Sebastián",value:"00685"},{label:"Santa Isabel",value:"00757"},{label:"Toa Alta",value:"00953"},{label:"Toa Alta",value:"00954"},{label:"Toa Baja",value:"00949"},{label:"Toa Baja",value:"00950"},{label:"Toa Baja",value:"00951"},{label:"Toa Baja",value:"00952"},{label:"Trujillo Alto",value:"00976"},{label:"Trujillo Alto",value:"00977"},{label:"Saint Just",value:"00978"},{label:"Utuado",value:"00641"},{label:"Utuado",value:"00611"},{label:"Vega Alta",value:"00692"},{label:"Vega Baja",value:"00693"},{label:"Vega Baja",value:"00694"},{label:"Vieques",value:"00765"},{label:"Villalba",value:"00766"},{label:"Yabucoa",value:"00767"},{label:"Yauco",value:"00698"}];const n=["PO BOX","P.O. BOX","P O BOX","HC ","RR ","APARTADO"];const o={SHIPMENT_ID:"shipmentId",ZIP_CODE:"zipCode",SHIPPING_ADDRESS:"shippingAddress",DELIVERY_METHOD:"deliveryMethodInfo"};class r{http;constructor(){this.http=a}async createAddress(a,u="6"){const n=e.get("wBCUserID")||"0";const o=l.getToken();const r=new FormData;r.append("token",o);r.append("flowId",u);r.append("userId",n);r.append("name",a.name);r.append("email",a.email);r.append("phone",this.cleanPhoneNumber(a.phone));r.append("phone2",this.cleanPhoneNumber(a.phone2||""));r.append("address1",a.address1);r.append("address2",a.address2||"");r.append("city",a.city);r.append("zip",a.zip+"-0000");r.append("state",a.state);r.append("town",a.city);r.append("notes",a.notes||"");r.append("chvAuthorizerName",a.authorizerName||"");r.append("chvAuthorizerPhone",this.cleanPhoneNumber(a.authorizerPhone||""));try{const l=await this.http.postFormData("api/Address/create",r);if(!l.hasError&&l.response){this.setShipmentId(l.response);this.setZipCode(a.zip);this.storeShippingAddress(a)}return l}catch(a){console.error("[ShippingService] Create address error:",a);return{hasError:true,message:"Error al crear la dirección de envío"}}}async getDeliveryMethods(){const a=l.getToken();const e=new FormData;e.append("token",a);try{const a=await this.http.postFormData("api/Address/getDeliveryMethods",e);return a}catch(a){console.error("[ShippingService] Get delivery methods error:",a);return{hasError:true,errorDesc:"Error al obtener métodos de entrega"}}}getShipmentId(){const a=e.get(o.SHIPMENT_ID);return a?parseInt(a,10):0}setShipmentId(a){e.set(o.SHIPMENT_ID,a.toString())}getZipCode(){return e.get(o.ZIP_CODE)||""}setZipCode(a){e.set(o.ZIP_CODE,a)}storeShippingAddress(a){e.setJSON(o.SHIPPING_ADDRESS,a)}getStoredShippingAddress(){return e.getJSON(o.SHIPPING_ADDRESS)}storeDeliveryMethod(a){e.setJSON(o.DELIVERY_METHOD,a)}getStoredDeliveryMethod(){return e.getJSON(o.DELIVERY_METHOD)}clearShippingData(){e.remove(o.SHIPMENT_ID);e.remove(o.ZIP_CODE);e.remove(o.SHIPPING_ADDRESS);e.remove(o.DELIVERY_METHOD)}validateZipCode(a){const l=u.find((l=>l.value===a));return l?l.label:null}getMunicipalityByZip(a){return this.validateZipCode(a)||""}getAllZipCodes(){return u}isValidPhysicalAddress(a){const l=a.toUpperCase();return!n.some((a=>l.includes(a)))}isValidEmail(a){const l=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return l.test(a)}isValidPhone(a){const l=this.cleanPhoneNumber(a);return l.length===10}cleanPhoneNumber(a){return a.replace(/\(|\)|-|\s/g,"")}formatPhoneNumber(a){const l=this.cleanPhoneNumber(a);if(l.length!==10)return a;return`(${l.slice(0,3)}) ${l.slice(3,6)}-${l.slice(6)}`}}const t=new r;export{e as a,t as s};
//# sourceMappingURL=p-BmMai6aX.js.map