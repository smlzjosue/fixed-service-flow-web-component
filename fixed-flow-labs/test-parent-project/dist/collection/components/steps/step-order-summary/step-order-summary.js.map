{"version":3,"file":"step-order-summary.js","sourceRoot":"","sources":["../../../../src/components/steps/step-order-summary/step-order-summary.tsx"],"names":[],"mappings":"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","sourcesContent":["// ============================================\n// STEP ORDER SUMMARY - Cart Review for CLARO HOGAR\n// Fixed Service Flow Web Component\n// Design based on TEL order-summary-web.component\n// ============================================\n\nimport { Component, Prop, State, h, Host } from '@stencil/core';\nimport { cartService } from '../../../services/cart.service';\nimport { CartResponse, CartItem } from '../../../store/interfaces';\n\n@Component({\n  tag: 'step-order-summary',\n  styleUrl: 'step-order-summary.scss',\n  shadow: true,\n})\nexport class StepOrderSummary {\n  // ------------------------------------------\n  // PROPS\n  // ------------------------------------------\n\n  @Prop() onNext: () => void;\n  @Prop() onBack: () => void;\n\n  // ------------------------------------------\n  // STATE\n  // ------------------------------------------\n\n  @State() cart: CartResponse | null = null;\n  @State() isLoading: boolean = true;\n  @State() error: string | null = null;\n  @State() promoCode: string = '';\n  @State() isApplyingPromo: boolean = false;\n  @State() promoError: string | null = null;\n  @State() promoSuccess: boolean = false;\n  @State() termsAccepted: boolean = false;\n  @State() deletingItemId: number | null = null;\n\n  // ------------------------------------------\n  // LIFECYCLE\n  // ------------------------------------------\n\n  componentWillLoad() {\n    this.loadCart();\n  }\n\n  // ------------------------------------------\n  // METHODS\n  // ------------------------------------------\n\n  private async loadCart() {\n    this.isLoading = true;\n    this.error = null;\n\n    try {\n      const response = await cartService.getCart();\n\n      if (response.hasError) {\n        this.error = response.message || 'Error al cargar el carrito';\n        return;\n      }\n\n      this.cart = response;\n      console.log('[StepOrderSummary] Cart loaded:', this.cart);\n      console.log('[StepOrderSummary] Products:', this.cart.products?.map(p => ({\n        cartId: p.cartId,\n        name: p.productName,\n        equipment: p.equipment,\n        home: p.home,\n        plan: p.plan,\n        parentCartId: p.parentCartId,\n        installments: p.installments,\n        price: p.decPrice,\n      })));\n\n    } catch (err) {\n      console.error('[StepOrderSummary] Error:', err);\n      this.error = 'Error de conexión al cargar el carrito';\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private handlePromoCodeChange = (e: Event) => {\n    this.promoCode = (e.target as HTMLInputElement).value.toUpperCase();\n    this.promoError = null;\n    this.promoSuccess = false;\n  };\n\n  private handleApplyPromo = async () => {\n    if (!this.promoCode.trim()) {\n      this.promoError = 'Ingresa un código promocional';\n      return;\n    }\n\n    this.isApplyingPromo = true;\n    this.promoError = null;\n    this.promoSuccess = false;\n\n    try {\n      cartService.storeDiscountCoupon(this.promoCode);\n      const response = await cartService.getCart(this.promoCode);\n\n      if (response.hasError) {\n        this.promoError = 'Código promocional inválido';\n        cartService.clearDiscountCoupon();\n        return;\n      }\n\n      this.cart = response;\n      this.promoSuccess = true;\n      console.log('[StepOrderSummary] Promo applied successfully');\n\n    } catch (err) {\n      console.error('[StepOrderSummary] Promo error:', err);\n      this.promoError = 'Error al aplicar el código';\n      cartService.clearDiscountCoupon();\n    } finally {\n      this.isApplyingPromo = false;\n    }\n  };\n\n  private handleRemoveItem = async (item: CartItem) => {\n    this.deletingItemId = item.cartId;\n\n    try {\n      const result = await cartService.deleteItem(item.cartId, item.productId);\n\n      if (result.hasError) {\n        console.error('[StepOrderSummary] Delete error:', result.message);\n        return;\n      }\n\n      await this.loadCart();\n\n    } catch (err) {\n      console.error('[StepOrderSummary] Error removing item:', err);\n    } finally {\n      this.deletingItemId = null;\n    }\n  };\n\n  private handleTermsChange = (e: Event) => {\n    this.termsAccepted = (e.target as HTMLInputElement).checked;\n  };\n\n  private handleProceed = () => {\n    if (!this.termsAccepted) {\n      return;\n    }\n    this.onNext?.();\n  };\n\n  private formatPrice(price: number): string {\n    return `$${(price || 0).toFixed(2)}`;\n  }\n\n  private getItemCount(): number {\n    return this.cart?.products?.reduce((sum, item) => sum + item.qty, 0) || 0;\n  }\n\n  // Separate equipment from plans\n  // Classification logic for CLARO HOGAR flow:\n  // - The API returns both equipment and plan with same flags and catalogName\n  // - Key differentiators:\n  //   1. catalogName === \"Catalogo de Planes Fijos\" (for some flows)\n  //   2. installments: Equipment has > 0 (financed), Plan has === 0 (monthly service)\n  //   3. plan flag or parentCartId > 0\n  private getEquipmentItems(): CartItem[] {\n    if (!this.cart?.products) return [];\n\n    console.log('[StepOrderSummary] Classifying products...');\n\n    return this.cart.products.filter(item => {\n      // Log each item for debugging\n      console.log('[StepOrderSummary] Item:', item.productName, {\n        catalogName: item.catalogName,\n        equipment: item.equipment,\n        home: item.home,\n        plan: item.plan,\n        parentCartId: item.parentCartId,\n        installments: item.installments,\n      });\n\n      // Check catalogName for fixed plans catalog\n      if (item.catalogName === 'Catalogo de Planes Fijos') {\n        console.log('[StepOrderSummary] -> PLAN (catalogName: Catalogo de Planes Fijos)');\n        return false;\n      }\n\n      // If explicitly marked as plan, it's not equipment\n      if (item.plan) {\n        console.log('[StepOrderSummary] -> PLAN (explicit plan flag)');\n        return false;\n      }\n\n      // If it has a parentCartId > 0, it's a plan linked to equipment\n      if (item.parentCartId && item.parentCartId > 0) {\n        console.log('[StepOrderSummary] -> PLAN (has parentCartId)');\n        return false;\n      }\n\n      // TEL Logic: If home === true && internet === true, it's an internet PLAN\n      if (item.home && item.internet) {\n        console.log('[StepOrderSummary] -> PLAN (home + internet flags)');\n        return false;\n      }\n\n      // CLARO HOGAR heuristic: Equipment has financing (installments > 0)\n      if (item.home && item.installments > 0) {\n        console.log('[StepOrderSummary] -> EQUIPMENT (home with installments)');\n        return true;\n      }\n\n      // CLARO HOGAR heuristic: No installments = monthly plan (not equipment)\n      if (item.home && (!item.installments || item.installments === 0)) {\n        console.log('[StepOrderSummary] -> PLAN (home without installments = monthly plan)');\n        return false;\n      }\n\n      // Regular equipment (phones, accessories, etc.)\n      if (item.equipment || item.accesory) {\n        console.log('[StepOrderSummary] -> EQUIPMENT');\n        return true;\n      }\n\n      console.log('[StepOrderSummary] -> UNKNOWN (not classified)');\n      return false;\n    });\n  }\n\n  private getPlanItems(): CartItem[] {\n    if (!this.cart?.products) return [];\n\n    return this.cart.products.filter(item => {\n      // Check catalogName for fixed plans catalog\n      if (item.catalogName === 'Catalogo de Planes Fijos') return true;\n\n      // Explicit plan flag\n      if (item.plan) return true;\n\n      // If it has a parentCartId > 0, it's a plan linked to equipment\n      if (item.parentCartId && item.parentCartId > 0) return true;\n\n      // TEL Logic: If home === true && internet === true, it's an internet PLAN\n      if (item.home && item.internet) return true;\n\n      // CLARO HOGAR heuristic: home=true without installments = monthly internet plan\n      if (item.home && (!item.installments || item.installments === 0)) return true;\n\n      return false;\n    });\n  }\n\n  // ------------------------------------------\n  // RENDER HELPERS\n  // ------------------------------------------\n\n  private renderEquipmentItem(item: CartItem, index: number) {\n    const isDeleting = this.deletingItemId === item.cartId;\n    const planItem = this.getPlanItems().find(p => p.parentCartId === item.cartId);\n\n    return (\n      <div class=\"product-card\" key={`equip-${item.cartId}`}>\n        {/* Equipment Section Header */}\n        <div class=\"section-header section-header--equipment\">\n          <div class=\"section-header__icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <rect x=\"5\" y=\"2\" width=\"14\" height=\"20\" rx=\"2\" ry=\"2\"></rect>\n              <line x1=\"12\" y1=\"18\" x2=\"12.01\" y2=\"18\"></line>\n            </svg>\n          </div>\n          <div class=\"section-header__text\">\n            <span class=\"section-header__label\">EQUIPO</span>\n            {index === 0 && <span class=\"section-header__badge\">Principal</span>}\n          </div>\n        </div>\n\n        {/* Main Product Row */}\n        <div class=\"product-card__main\">\n          {/* Image */}\n          <div class=\"product-card__image\">\n            <img\n              src={item.imgUrl || item.detailImage || '/assets/placeholder.png'}\n              alt={item.productName}\n              onError={(e) => (e.target as HTMLImageElement).src = '/assets/placeholder.png'}\n            />\n          </div>\n\n          {/* Details */}\n          <div class=\"product-card__details\">\n            <h3 class=\"product-name\">{item.productName}</h3>\n\n            <div class=\"product-specs\">\n              {/* Color */}\n              {item.colorName && (\n                <div class=\"spec-item\">\n                  <span\n                    class=\"color-circle\"\n                    style={{ backgroundColor: item.webColor || '#ccc' }}\n                  ></span>\n                  <span class=\"spec-label\">{item.colorName}</span>\n                </div>\n              )}\n\n              {/* Storage */}\n              {item.storageName && item.storage && (\n                <div class=\"spec-item\">\n                  <span class=\"storage-badge\">{item.storage}GB</span>\n                </div>\n              )}\n\n              {/* Quantity */}\n              <div class=\"spec-item\">\n                <span class=\"qty-label\">Cant: {item.qty}</span>\n              </div>\n            </div>\n\n            {/* Financing info */}\n            {item.installments > 1 && (\n              <div class=\"financing-info\">\n                <span class=\"financing-label\">Financiamiento de Equipo:</span>\n                <span class=\"financing-detail\">Término de pago ({item.installments} meses)</span>\n              </div>\n            )}\n          </div>\n\n          {/* Pricing */}\n          <div class=\"product-card__pricing\">\n            {item.installments > 1 ? (\n              <div class=\"price-financing\">\n                <span class=\"price-monthly\">{this.formatPrice(item.decTotalPerMonth || item.decPrice)}</span>\n                <span class=\"price-period\">/mes</span>\n              </div>\n            ) : (\n              <div class=\"price-single\">\n                <span class=\"price-total\">{this.formatPrice(item.decTotalPrice || item.decPrice)}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div class=\"product-card__actions\">\n            <button\n              class=\"btn-action btn-action--delete\"\n              onClick={() => this.handleRemoveItem(item)}\n              disabled={isDeleting}\n              title=\"Eliminar\"\n            >\n              {isDeleting ? (\n                <span class=\"spinner-small\"></span>\n              ) : (\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\"></path>\n                  <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\n                  <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\n                </svg>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Associated Plan Section */}\n        {planItem && this.renderAssociatedPlan(planItem)}\n      </div>\n    );\n  }\n\n  private renderAssociatedPlan(plan: CartItem) {\n    const isDeleting = this.deletingItemId === plan.cartId;\n\n    return (\n      <div class=\"plan-section\">\n        {/* Plan Section Header */}\n        <div class=\"section-header section-header--plan\">\n          <div class=\"section-header__icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M22 12h-4l-3 9L9 3l-3 9H2\"></path>\n            </svg>\n          </div>\n          <div class=\"section-header__text\">\n            <span class=\"section-header__label\">TU PLAN</span>\n          </div>\n        </div>\n\n        <div class=\"plan-section__content\">\n          <div class=\"plan-info\">\n            <span class=\"plan-name\">{plan.productName}</span>\n            <span class=\"plan-type\">Plan de Internet</span>\n          </div>\n          <div class=\"plan-price\">\n            <span class=\"price\">{this.formatPrice(plan.decPrice || plan.decTotalPerMonth)}</span>\n            <span class=\"period\">/mes</span>\n          </div>\n          <button\n            class=\"btn-action btn-action--delete-small\"\n            onClick={() => this.handleRemoveItem(plan)}\n            disabled={isDeleting}\n            title=\"Eliminar plan\"\n          >\n            {isDeleting ? (\n              <span class=\"spinner-small\"></span>\n            ) : (\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\"></path>\n              </svg>\n            )}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  private renderStandalonePlan(plan: CartItem) {\n    const isDeleting = this.deletingItemId === plan.cartId;\n\n    return (\n      <div class=\"product-card product-card--plan\" key={`plan-${plan.cartId}`}>\n        {/* Plan Section Header */}\n        <div class=\"section-header section-header--plan\">\n          <div class=\"section-header__icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M22 12h-4l-3 9L9 3l-3 9H2\"></path>\n            </svg>\n          </div>\n          <div class=\"section-header__text\">\n            <span class=\"section-header__label\">PLAN DE INTERNET</span>\n          </div>\n        </div>\n\n        <div class=\"product-card__main product-card__main--plan\">\n          <div class=\"product-card__image product-card__image--plan\">\n            <img\n              src={plan.imgUrl || plan.detailImage || '/assets/placeholder.png'}\n              alt={plan.productName}\n              onError={(e) => (e.target as HTMLImageElement).src = '/assets/placeholder.png'}\n            />\n          </div>\n\n          <div class=\"product-card__details\">\n            <h3 class=\"product-name\">{plan.productName}</h3>\n            <span class=\"plan-type\">Renta mensual</span>\n          </div>\n\n          <div class=\"product-card__pricing\">\n            <div class=\"price-financing\">\n              <span class=\"price-monthly\">{this.formatPrice(plan.decPrice || plan.decTotalPerMonth)}</span>\n              <span class=\"price-period\">/mes</span>\n            </div>\n          </div>\n\n          <div class=\"product-card__actions\">\n            <button\n              class=\"btn-action btn-action--delete\"\n              onClick={() => this.handleRemoveItem(plan)}\n              disabled={isDeleting}\n              title=\"Eliminar\"\n            >\n              {isDeleting ? (\n                <span class=\"spinner-small\"></span>\n              ) : (\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\"></path>\n                </svg>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private renderPromoCode() {\n    return (\n      <div class=\"summary-card promo-section\">\n        <h4 class=\"summary-card__title\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z\"></path>\n            <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\"></line>\n          </svg>\n          Cupón de descuento\n        </h4>\n        <div class=\"promo-input-group\">\n          <input\n            type=\"text\"\n            class={{\n              'promo-input': true,\n              'error': !!this.promoError,\n              'success': this.promoSuccess,\n            }}\n            placeholder=\"Ingresa tu código\"\n            value={this.promoCode}\n            onInput={this.handlePromoCodeChange}\n            disabled={this.isApplyingPromo}\n          />\n          <button\n            class=\"promo-button\"\n            onClick={this.handleApplyPromo}\n            disabled={this.isApplyingPromo || !this.promoCode.trim()}\n          >\n            {this.isApplyingPromo ? (\n              <span class=\"spinner-small\"></span>\n            ) : (\n              'Aplicar'\n            )}\n          </button>\n        </div>\n        {this.promoError && (\n          <span class=\"promo-message error\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"14\" height=\"14\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n              <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" stroke=\"white\" stroke-width=\"2\"></line>\n              <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" stroke=\"white\" stroke-width=\"2\"></line>\n            </svg>\n            {this.promoError}\n          </span>\n        )}\n        {this.promoSuccess && (\n          <span class=\"promo-message success\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"14\" height=\"14\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n              <polyline points=\"9 12 11 14 15 10\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"></polyline>\n            </svg>\n            ¡Cupón aplicado!\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  private renderPaymentSummary() {\n    if (!this.cart) return null;\n\n    const monthlyRent = this.cart.subTotalPerMonth || 0;\n    const subtotal = this.cart.subTotalPrice || 0;\n    const tax = this.cart.totalTax || 0;\n    const total = this.cart.totalPrice || 0;\n    const downPayment = this.cart.totalDownPayment || 0;\n    // Discount is calculated from promo code application (stored locally if applied)\n    const discount = 0; // Will be calculated when promo system is fully integrated\n\n    return (\n      <div class=\"summary-card payment-summary\">\n        {/* Monthly Rent Section - TEL Style */}\n        {monthlyRent > 0 && (\n          <div class=\"rent-section\">\n            <div class=\"rent-row\">\n              <span class=\"rent-label\">Renta mensual</span>\n              <span class=\"rent-value\">{this.formatPrice(monthlyRent)}</span>\n            </div>\n            <p class=\"rent-note\">*No incluye cargos estatales y federales</p>\n          </div>\n        )}\n\n        {/* Payment Breakdown */}\n        <div class=\"payment-breakdown\">\n          <h4 class=\"summary-card__title\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" ry=\"2\"></rect>\n              <line x1=\"1\" y1=\"10\" x2=\"23\" y2=\"10\"></line>\n            </svg>\n            Detalle del pago\n          </h4>\n\n          <div class=\"detail-rows\">\n            {subtotal > 0 && (\n              <div class=\"detail-row\">\n                <span class=\"label\">Subtotal equipos</span>\n                <span class=\"value\">{this.formatPrice(subtotal)}</span>\n              </div>\n            )}\n\n            {downPayment > 0 && (\n              <div class=\"detail-row\">\n                <span class=\"label\">Pago inicial</span>\n                <span class=\"value\">{this.formatPrice(downPayment)}</span>\n              </div>\n            )}\n\n            {discount > 0 && (\n              <div class=\"detail-row detail-row--discount\">\n                <span class=\"label\">Descuento aplicado</span>\n                <span class=\"value\">-{this.formatPrice(discount)}</span>\n              </div>\n            )}\n\n            <div class=\"detail-row\">\n              <span class=\"label\">Cargos estatales y federales</span>\n              <span class=\"value\">{this.formatPrice(tax)}</span>\n            </div>\n\n            <div class=\"detail-row detail-row--shipping\">\n              <span class=\"label\">Costo de envío</span>\n              <span class=\"value value--free\">GRATIS</span>\n            </div>\n          </div>\n\n          {/* Total */}\n          <div class=\"total-section\">\n            <div class=\"total-row\">\n              <span class=\"total-label\">Paga hoy</span>\n              <span class=\"total-value\">{this.formatPrice(total)}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private renderTermsCheckbox() {\n    return (\n      <div class=\"terms-section\">\n        <label class=\"terms-checkbox\">\n          <input\n            type=\"checkbox\"\n            checked={this.termsAccepted}\n            onChange={this.handleTermsChange}\n          />\n          <span class=\"checkmark\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\">\n              <polyline points=\"20 6 9 17 4 12\"></polyline>\n            </svg>\n          </span>\n          <span class=\"terms-text\">\n            Acepto los <a href=\"#\" onClick={(e) => e.preventDefault()}>términos y condiciones</a> de Claro Puerto Rico\n          </span>\n        </label>\n      </div>\n    );\n  }\n\n  // ------------------------------------------\n  // RENDER\n  // ------------------------------------------\n\n  render() {\n    const itemCount = this.getItemCount();\n    const hasItems = itemCount > 0;\n    const canProceed = hasItems && this.termsAccepted;\n    const equipmentItems = this.getEquipmentItems();\n    const standalonePlans = this.getPlanItems().filter(p => !p.parentCartId);\n\n    return (\n      <Host>\n        <div class=\"step-order-summary\">\n          {/* Header */}\n          <header class=\"header\">\n            <button class=\"btn-back\" onClick={this.onBack}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M19 12H5M12 19l-7-7 7-7\"></path>\n              </svg>\n              <span>Regresar</span>\n            </button>\n            <div class=\"header__title-group\">\n              <h1 class=\"title\">Resumen de tu orden</h1>\n              {hasItems && (\n                <span class=\"item-count\">\n                  {itemCount} {itemCount === 1 ? 'artículo' : 'artículos'}\n                </span>\n              )}\n            </div>\n          </header>\n\n          {/* Loading */}\n          {this.isLoading && (\n            <div class=\"state-container\">\n              <div class=\"spinner\"></div>\n              <p>Cargando tu carrito...</p>\n            </div>\n          )}\n\n          {/* Error */}\n          {this.error && !this.isLoading && (\n            <div class=\"state-container state-container--error\">\n              <svg class=\"state-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n                <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n              </svg>\n              <p>{this.error}</p>\n              <button class=\"btn-retry\" onClick={() => this.loadCart()}>\n                Reintentar\n              </button>\n            </div>\n          )}\n\n          {/* Empty Cart */}\n          {!this.isLoading && !this.error && !hasItems && (\n            <div class=\"state-container state-container--empty\">\n              <svg class=\"state-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n                <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                <path d=\"M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6\"></path>\n              </svg>\n              <h3>Tu carrito está vacío</h3>\n              <p>Agrega productos para continuar con tu compra</p>\n              <button class=\"btn-back-catalog\" onClick={this.onBack}>\n                Ir al catálogo\n              </button>\n            </div>\n          )}\n\n          {/* Cart Content */}\n          {!this.isLoading && !this.error && hasItems && (\n            <div class=\"content-layout\">\n              {/* Products Column */}\n              <div class=\"products-column\">\n                {equipmentItems.map((item, index) => this.renderEquipmentItem(item, index))}\n                {standalonePlans.map(plan => this.renderStandalonePlan(plan))}\n              </div>\n\n              {/* Summary Column */}\n              <div class=\"summary-column\">\n                {this.renderPromoCode()}\n                {this.renderPaymentSummary()}\n                {this.renderTermsCheckbox()}\n\n                <button\n                  class={{\n                    'btn-proceed': true,\n                    'disabled': !canProceed,\n                  }}\n                  onClick={this.handleProceed}\n                  disabled={!canProceed}\n                >\n                  <span>Procesar orden</span>\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <path d=\"M5 12h14M12 5l7 7-7 7\"></path>\n                  </svg>\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n"]}